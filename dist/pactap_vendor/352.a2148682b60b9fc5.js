"use strict";(self.webpackChunkpactap_vendor=self.webpackChunkpactap_vendor||[]).push([[352],{91352:(Co,D,u)=>{u.r(D),u.d(D,{QuotesModule:()=>_o});var m=u(96814),h=u(72253),c=u(64716),d=u(16676),e=u(99468),q=u(93851),_=u(29917),b=u(21355),v=u(50458),l=u(56223),y=u(64686);function w(o,s){1&o&&e._UZ(0,"img",59)}function F(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",60)(2,"input",61),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.show=i)})("change",function(i){const a=e.CHM(t).index,p=e.oxw();return e.KtG(p.hideShowCol(i,a))}),e.qZA(),e.TgZ(3,"label",62),e._uU(4),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(2),e.MGl("id","col",n,""),e.Q6J("ngModel",t.show),e.xp6(1),e.MGl("for","col",n,""),e.xp6(1),e.hij(" ",t.column," ")}}function U(o,s){if(1&o&&(e.TgZ(0,"option",63),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.hij(" ",null==t||null==t.adminProduct?null:t.adminProduct.productName,"")}}const I=function(o,s){return{"btn-success":o,"btn-danger":s}},T=function(){return["/quotes/detail"]},Z=function(o){return{quoteId:o}};function k(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",68)(1,"div",69)(2,"div",70)(3,"h1"),e._uU(4),e.qZA(),e.TgZ(5,"span",71),e._uU(6),e.qZA()(),e.TgZ(7,"div",72)(8,"h1"),e._uU(9,"SC"),e.qZA(),e.TgZ(10,"div",73)(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"h2"),e._uU(14),e.qZA()()(),e.TgZ(15,"div",74)(16,"h2"),e._uU(17),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA()(),e.TgZ(20,"div",75)(21,"div",76)(22,"h1"),e._uU(23,"Timeline:"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.ALo(26,"date"),e.qZA()(),e.TgZ(27,"div",77)(28,"a",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.viewQuoteTimeLine(r))}),e._uU(29,"View More"),e.qZA()()(),e.TgZ(30,"div",79)(31,"a",80),e._uU(32,"View"),e.qZA()()()()}if(2&o){const t=s.$implicit;e.xp6(4),e.hij("Quote ID: ",null==t?null:t.quoteId,""),e.xp6(1),e.Q6J("ngClass",e.WLB(13,I,"QUOTED"===(null==t?null:t.quoteStatus)||"ARCHIVED"===(null==t?null:t.quoteStatus),"EXPIRED"===(null==t?null:t.quoteStatus))),e.xp6(1),e.Oqu(null==t?null:t.quoteStatus),e.xp6(6),e.hij("Customer ID: ",null==t||null==t.customerLogin?null:t.customerLogin.customerId,""),e.xp6(2),e.hij(" ",null==t||null==t.customer||null==t.customer.countryObj?null:t.customer.countryObj.name,""),e.xp6(3),e.hij("Product ID: ",null==t||null==t.customerProduct?null:t.customerProduct.customerProductId,""),e.xp6(2),e.hij("Product Type: ",null==t||null==t.category?null:t.category.categoryName,""),e.xp6(6),e.hij("Quoted On: ",e.xi3(26,10,null==t?null:t.validUpto,"dd/MM/YYYY"),""),e.xp6(6),e.Q6J("routerLink",e.DdM(16,T))("queryParams",e.VKq(17,Z,null==t?null:t._id))}}function S(o,s){1&o&&(e.TgZ(0,"div",81),e._uU(1,"Quotes not found"),e.qZA())}function N(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",64),e.NdJ("scrolled",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onScrollDown(i))}),e.TgZ(1,"div",44)(2,"div",65)(3,"div",23),e.YNc(4,k,33,19,"div",66),e.YNc(5,S,2,0,"div",67),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300),e.xp6(4),e.Q6J("ngForOf",t.quotes),e.xp6(1),e.Q6J("ngIf",t.gridView&&(null==t.quotes?null:t.quotes.length)<1)}}const f=function(o){return{colHide:o}};function J(o,s){if(1&o&&(e.TgZ(0,"th",88),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=s.index,i=e.oxw(2);e.Tol("col"+n),e.Q6J("ngClass",e.VKq(4,f,!i.columns[n].show)),e.xp6(1),e.hij(" ",t.column,"")}}const A=function(o){return["/quotes/re-quote",o]};function Y(o,s){if(1&o&&(e.TgZ(0,"a",101),e._uU(1,"Re-Quote"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,A,null==t?null:t._id))}}function O(o,s){if(1&o&&(e.TgZ(0,"a",101),e._uU(1,"View"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,A,null==t?null:t._id))}}function L(o,s){if(1&o&&(e.TgZ(0,"a",102),e._uU(1,"View"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.DdM(2,T))("queryParams",e.VKq(3,Z,null==t?null:t._id))}}function V(o,s){if(1&o&&(e.TgZ(0,"a",102),e._uU(1,"View"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.DdM(2,T))("queryParams",e.VKq(3,Z,null==t?null:t._id))}}function R(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",89),e._uU(2),e.qZA(),e.TgZ(3,"td",90)(4,"a",91),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7),e.qZA(),e.TgZ(8,"td",92)(9,"a",93),e._uU(10),e.qZA(),e._UZ(11,"br"),e._uU(12),e.qZA(),e.TgZ(13,"td",94),e._uU(14),e.ALo(15,"date"),e._UZ(16,"br"),e.TgZ(17,"a",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.viewQuoteTimeLine(r))}),e._uU(18," View More "),e.qZA()(),e.TgZ(19,"td",95),e._uU(20),e.qZA(),e.TgZ(21,"td",96)(22,"a",97),e._uU(23),e.qZA()(),e.TgZ(24,"td"),e.YNc(25,Y,2,3,"a",98),e.YNc(26,O,2,3,"a",99),e.YNc(27,L,2,5,"a",100),e.YNc(28,V,2,5,"a",100),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(24,f,!n.columns[0].show)),e.xp6(1),e.hij(" ",null==t?null:t.quoteId,""),e.xp6(1),e.Q6J("ngClass",e.VKq(26,f,!n.columns[1].show)),e.xp6(2),e.hij("ID:",null==t||null==t.customerLogin?null:t.customerLogin.customerId,""),e.xp6(2),e.hij("",null==t||null==t.customer||null==t.customer.countryObj?null:t.customer.countryObj.name," "),e.xp6(1),e.Q6J("ngClass",e.VKq(28,f,!n.columns[2].show)),e.xp6(2),e.hij("ID: ",null==t||null==t.customerProduct?null:t.customerProduct.customerProductId,""),e.xp6(2),e.hij(" Type: ",null==t||null==t.product?null:t.product.productName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(30,f,!n.columns[3].show)),e.xp6(1),e.hij(" Quoted On: ",e.xi3(15,21,null==t?null:t.createdAt,"dd/MM/YYYY")," "),e.xp6(5),e.Q6J("ngClass",e.VKq(32,f,!n.columns[4].show)),e.xp6(1),e.lnq(" ",t.minMaxQuant.min||"-"," ",t.minMaxQuant.max?"to":""," ",t.minMaxQuant.max," "),e.xp6(1),e.Q6J("ngClass",e.VKq(34,f,!n.columns[5].show)),e.xp6(1),e.Q6J("ngClass","EXPIRED"===(null==t?null:t.quoteStatus)?"btn-danger":"btn-success"),e.xp6(1),e.hij(" ",null==t?null:t.quoteStatus," "),e.xp6(2),e.Q6J("ngIf","UNSHARE"!=(null==t?null:t.state)&&"EXPIRED"===(null==t?null:t.quoteStatus)&&!0===(null==t?null:t.isReQuoteRequested)),e.xp6(1),e.Q6J("ngIf","QUOTED"===(null==t?null:t.quoteStatus)&&n.today>(null==t?null:t.validUpto)),e.xp6(1),e.Q6J("ngIf","QUOTED"===(null==t?null:t.quoteStatus)&&n.today<(null==t?null:t.validUpto)),e.xp6(1),e.Q6J("ngIf","UNSHARE"!=(null==t?null:t.state)&&"EXPIRED"===(null==t?null:t.quoteStatus))}}function E(o,s){1&o&&(e.TgZ(0,"div",81),e._uU(1," Quotes not found "),e.qZA())}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",82)(1,"div",83)(2,"div",84)(3,"div",85),e.NdJ("scrolled",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onScrollDown(i))}),e.TgZ(4,"table",56)(5,"thead")(6,"tr"),e.YNc(7,J,2,6,"th",86),e.TgZ(8,"th"),e._uU(9,"\xa0"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,R,29,36,"tr",87),e.qZA()(),e.YNc(12,E,2,0,"div",67),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),e.xp6(4),e.Q6J("ngForOf",t.columns),e.xp6(4),e.Q6J("ngForOf",t.quotes),e.xp6(1),e.Q6J("ngIf",!t.gridView&&(null==t.quotes?null:t.quotes.length)<1)}}const P=function(o){return{selected:o}},j=function(o){return{"fa-spin fa-spinner":o}};let W=(()=>{class o{constructor(t,n,i,r){this.QS=t,this.ngxService=n,this.PS=i,this._notifier=r,this.gridView=!1,this.productId="",this.searchKey="",this.status="",this.isLoading=!1,this.columns=[{column:"Quote ID",show:!0,key:"quoteId"},{column:"Customer Details",show:!0,key:"customer.companyName"},{column:"Product Details",show:!0,key:"product.productName"},{column:"Timeline",show:!0,key:"createdAt"},{column:"Quantity",show:!0,key:"quantity"},{column:"Status",show:!0,key:"quoteStatus"}],this.page=1,this.contentPerPage=10,this.totalPage=0}ngOnInit(){this.getQuoteList(),this.today=d().valueOf(),this.getProducts()}searchLeads(t){this.searchKey=t.target.value,this.page=1,this.getQuoteList()}hideShowCol(t,n){n&&2!==n&&5!==n?t.target.checked?$(`.col${n}`).removeClass("colHide"):$(`.col${n}`).addClass("colHide"):(this.columns[n].show=!0,$(`#col${n}`).prop("checked",!0))}exportDetails(){this.isLoading=!0;let t=JSON.parse(JSON.stringify(this.columns));t.map((i,r,a)=>{"Customer Details"===i.column&&i.show&&"Customer ID"!==a[r-1].column&&a.splice(r,0,{column:"Customer ID",show:!0,key:"customerLogin.customerId"}),"Timeline"===i.column&&i.show&&"Quoted On"!==a[r-1].column&&a.splice(r,1,{column:"Quoted On",show:!0,key:"quotedAt"}),"Quantity"===i.column&&i.show&&"Minimum Quantity"!==a[r-1].column&&a.splice(r,1,{column:"Minimum Quantity",show:!0,key:"minQuantity"},{column:"Maximum Quantity",show:!0,key:"maxQuantity"}),"Product Detail"===i.column&&i.show&&"Category Name"!==a[r-1].column&&a.splice(r,0,{column:"Product ID",show:!0,key:"product.productId"},{column:"Category Name",show:!0,key:"category.categoryName"})}),this.QS.exportQuoteDetails({searchKey:this.searchKey,productId:this.productId,startDate:this.fromDate||"",endDate:this.toDate||"",isExcelDownload:!0,quoteStatus:this.status,columnPermission:t}).subscribe(i=>{this.isLoading=!1;const r=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(r),p=document.createElement("a");p.href=a,p.download="quotes.xlsx",p.click(),window.URL.revokeObjectURL(a),p.remove(),this._notifier.showSuccess("File downloaded successfully","Success")},i=>{this._notifier.showError("Something Went Wrong","Error"),this.isLoading=!1})}ngAfterViewInit(){setTimeout(()=>{this.initDateRangePicker()},200)}initDateRangePicker(){$(".daterangePickerLeads").dateRangePicker({format:"DD-MM-YYYY",autoClose:!0,endDate:d().endOf("day").format("DD-MM-YYYY")}).on("datepicker-change",(t,n)=>{this.fromDate=d(n.date1).valueOf(),this.toDate=d(n.date2).valueOf(),this.page=1,this.getQuoteList()})}openCalendar(t){t.stopPropagation(),$(".daterangePickerLeads").data("dateRangePicker").open()}getProducts(){this.ngxService.start(),this.PS.getProducts().pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t?.meta?.status?(this.myProducts=t.data,console.log(this.myProducts)):this.myProducts=[]})}toTimeStamp(t){return Date.parse(t)/1e3}filterByProduct(t){this.productId=t?.target?.value,this.page=1,this.getQuoteList()}filterByStatus(t){this.page=1,this.status=t?.target?.value,this.getQuoteList()}addQueryParams(){return{searchKey:this.searchKey,productId:this.productId,startDate:this.fromDate,endDate:this.toDate,quoteStatus:this.status}}onScrollDown(t){this.page<this.totalPage&&(this.page+=1,this.getQuoteList(!0))}getQuoteList(t){this.ngxService.start(),this.QS.quoteList(this.page,this.contentPerPage,this.addQueryParams()).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(n=>{n?.meta?.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.quotes=t?[...this.quotes,...n.data]:n.data,this.quotes.map(i=>{let r=this.findMinMax(i.quotation,"quantity"),a=this.findMinMax(i.quotation,"totalPrice");i.minMaxQuant=r,i.minMaxPrice=a})):this.quotes=t?this.quotes:[]})}findMinMax(t,n){const{min:i,max:r}=t.reduce((a,p)=>({min:Math.min(a.min,p[n]),max:Math.max(a.max,p[n])}),{min:1/0,max:-1/0});return{min:i,max:r}}viewQuoteTimeLine(t){this.quoteDetail=t,$("#quotesId").modal("show")}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(q.P),e.Y36(_.LA),e.Y36(b.s),e.Y36(v.c))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-quotes"]],decls:101,vars:30,consts:[[1,"dashboardMain"],[1,"page-header","product-page-header","d-flex","justify-content-between","row"],[1,"rightColumnDrop","d-flex","flex-wrap","justify-content-end"],[1,"viewMode"],[1,"view"],["data-view","grid-view",1,"selected","fa","fa-list",3,"ngClass","click"],["data-view","list-view",1,"fa","fa-th",3,"ngClass","click"],[1,"d-flex","flex-wrap","gap-2"],[1,"main_btn","flex-grow-1"],["type","button",1,"btn","btn-light","px-4","w-100",3,"disabled","click"],[1,"fa",3,"ngClass"],["src","assets/images/download.png","class","download-img me-1",4,"ngIf"],[1,"column-btns","d-flex","align-items-center","justify-content-end","flex-grow-1"],[1,"dropdown","w-100"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside",1,"btn","btn-white","dropdown-toggle","w-100"],["src","assets/images/column-icon.png",1,"me-2"],["aria-labelledby","dropdownMenuButton1","checked","",1,"dropdown-menu","form-filter-drop"],[1,"form-box","form-filter"],["class","form-group",4,"ngFor","ngForOf"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-lg-12"],[1,"row"],[1,"col-12","col-md-6","col-sm-6","col-lg-4"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search by Quote\xa0Id","aria-label","Search","aria-describedby","basic-addon2",1,"form-control","border-0",3,"keyup"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],[1,"col-6","col-md-6","col-sm-6","col-lg-2"],[1,"form-control",3,"change"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","col-md-6","col-lg-2"],["value","QUOTED"],["value","ARCHIVED"],["value","EXPIRED"],[1,"col-12","col-md-6","col-lg-4"],[1,"form-group","calendarInput"],["type","text","placeholder","EX: 12/02/2023  -  12/02/2023",1,"form-control","daterangePicker","daterangePickerLeads"],[1,"formIconsinner",3,"click"],[1,"bi","bi-calendar-week"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"leadMain","quotesMain"],["class","row","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],["class","prod grid-view",4,"ngIf"],["id","quotesId",1,"modal","fade","previousQuotes"],[1,"modal-dialog","modal-dialog-centered","modal-md","sample-popup-form"],[1,"modal-content"],[1,"modal-body"],[1,"d-flex","justify-content-between","mb-3"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"pop-table","quotesId"],[1,"table-row","table-responsive","request_sample"],["width","100%","cellspacing","0",1,"table","table-bordered"],[1,"fw500"],["fgsColor","#3E916C",3,"hasProgressBar"],["src","assets/images/download.png",1,"download-img","me-1"],[1,"form-check"],["type","checkbox","name","columnName",1,"form-check-input",3,"id","ngModel","ngModelChange","change"],[1,"form-check-label",3,"for"],[3,"value"],["infiniteScroll","",1,"row",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"itemList"],["class","col-12 col-sm-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],["class","col-100 my-3 text-center",4,"ngIf"],[1,"col-12","col-sm-12","col-md-6","col-lg-4"],[1,"quotesBox"],[1,"qouteId","m-0"],[1,"btn","btn-sm",3,"ngClass"],[1,"leadsCustomer"],[1,"customerDetails"],[1,"quotesPro"],[1,"timeLineMain"],[1,"timeLine"],[1,"viewMore"],["href","javascript:void(0)",3,"click"],[1,"main_btn","text-center","mt-3"],[1,"btn","btn-success",3,"routerLink","queryParams"],[1,"col-100","my-3","text-center"],[1,"prod","grid-view"],[1,"item","first"],[1,"leadsDetails"],["infiniteScroll","",1,"table-row","table-responsive","fix-headertbl","request_sample",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","nowrap",3,"ngClass","class",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"nowrap",3,"ngClass"],[1,"col0",3,"ngClass"],[1,"col1",3,"ngClass"],["href","javascript:void(0)"],[1,"col2",3,"ngClass"],["href","javascript:void(0)",1,"nowrap"],[1,"col3",3,"ngClass"],[1,"col4",3,"ngClass"],[1,"col5",3,"ngClass"],["href","javascript:void(0)",1,"btn","underline-none",3,"ngClass"],["class","text-success w-70 d-inline-block  underline-none viewText mr-1","href","javascript:void(0)",3,"routerLink",4,"ngIf"],["class","text-success  w-70 d-inline-block underline-none viewText mr-1","href","javascript:void(0)",3,"routerLink",4,"ngIf"],["class","text-success underline-none viewText mr-1",3,"routerLink","queryParams",4,"ngIf"],["href","javascript:void(0)",1,"text-success","w-70","d-inline-block","underline-none","viewText","mr-1",3,"routerLink"],[1,"text-success","underline-none","viewText","mr-1",3,"routerLink","queryParams"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"My Quotes"),e.qZA(),e.TgZ(4,"span")(5,"div",2)(6,"div",3)(7,"div",4)(8,"i",5),e.NdJ("click",function(){return i.gridView=!1}),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return i.gridView=!0}),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"button",9),e.NdJ("click",function(){return i.exportDetails()}),e._UZ(13,"i",10),e.YNc(14,w,1,0,"img",11),e._uU(15," Export Details"),e.qZA()(),e.TgZ(16,"div",12)(17,"div",13)(18,"button",14),e._UZ(19,"img",15),e._uU(20," Manage Column "),e.qZA(),e.TgZ(21,"div",16)(22,"div",17),e.YNc(23,F,5,4,"div",18),e.qZA()()()()()()()(),e.TgZ(24,"div",19)(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23)(29,"div",24)(30,"div",25)(31,"div",26)(32,"input",27),e.NdJ("keyup",function(a){return i.searchLeads(a)}),e.qZA(),e.TgZ(33,"div",28)(34,"button",29),e._UZ(35,"i",30),e.qZA()()()()(),e.TgZ(36,"div",31)(37,"div",25)(38,"select",32),e.NdJ("change",function(a){return i.filterByProduct(a)}),e.TgZ(39,"option",33),e._uU(40,"Product"),e.qZA(),e.YNc(41,U,2,2,"option",34),e.qZA()()(),e.TgZ(42,"div",35)(43,"div",25)(44,"select",32),e.NdJ("change",function(a){return i.filterByStatus(a)}),e.TgZ(45,"option",33),e._uU(46,"Quote Status"),e.qZA(),e.TgZ(47,"option",36),e._uU(48,"Quoted"),e.qZA(),e.TgZ(49,"option",37),e._uU(50,"Archived"),e.qZA(),e.TgZ(51,"option",38),e._uU(52,"Expired"),e.qZA()()()(),e.TgZ(53,"div",39)(54,"div",40),e._UZ(55,"input",41),e.TgZ(56,"span",42),e.NdJ("click",function(a){return i.openCalendar(a)}),e._UZ(57,"i",43),e.qZA()()()()()(),e.TgZ(58,"div",44)(59,"div",45),e.YNc(60,N,6,4,"div",46),e.YNc(61,M,13,6,"div",47),e.qZA()()()()(),e.TgZ(62,"div",48)(63,"div",49)(64,"div",50)(65,"div",51)(66,"div",52)(67,"h1"),e._uU(68),e.TgZ(69,"span"),e._uU(70),e.qZA()(),e._UZ(71,"button",53),e.qZA(),e.TgZ(72,"div",54)(73,"div",55)(74,"table",56)(75,"thead")(76,"tr")(77,"th"),e._uU(78,"Timeline "),e.qZA(),e.TgZ(79,"th"),e._uU(80," Date "),e.qZA()()(),e.TgZ(81,"tbody")(82,"tr")(83,"td",57),e._uU(84,"Quote Requested on"),e.qZA(),e.TgZ(85,"td"),e._uU(86),e.ALo(87,"date"),e.qZA()(),e.TgZ(88,"tr")(89,"td",57),e._uU(90,"Quote Created on "),e.qZA(),e.TgZ(91,"td"),e._uU(92),e.ALo(93,"date"),e.qZA()(),e.TgZ(94,"tr")(95,"td",57),e._uU(96,"Quote Valid upto "),e.qZA(),e.TgZ(97,"td"),e._uU(98),e.ALo(99,"date"),e.qZA()()()()()()()()()(),e._UZ(100,"ngx-ui-loader",58)),2&n&&(e.xp6(8),e.Q6J("ngClass",e.VKq(24,P,!i.gridView)),e.xp6(1),e.Q6J("ngClass",e.VKq(26,P,i.gridView)),e.xp6(3),e.Q6J("disabled",i.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(28,j,i.isLoading)),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(9),e.Q6J("ngForOf",i.columns),e.xp6(18),e.Q6J("ngForOf",i.myProducts),e.xp6(19),e.Q6J("ngIf",i.gridView),e.xp6(1),e.Q6J("ngIf",!i.gridView),e.xp6(7),e.hij("Quote ID: ",null==i.quoteDetail?null:i.quoteDetail.quoteId," "),e.xp6(2),e.hij("Converted to order ID: ",null==i.quoteDetail||null==i.quoteDetail.product?null:i.quoteDetail.product.productId,""),e.xp6(16),e.Oqu(e.xi3(87,15,null==i.quoteDetail?null:i.quoteDetail.quoteRequestedDate,"dd MMMM YYYY")),e.xp6(6),e.Oqu(e.xi3(93,18,null==i.quoteDetail?null:i.quoteDetail.createdAt,"dd MMMM YYYY")),e.xp6(6),e.Oqu(e.xi3(99,21,null==i.quoteDetail?null:i.quoteDetail.validUpto,"dd MMMM YYYY")),e.xp6(2),e.Q6J("hasProgressBar",!1))},dependencies:[_.Eo,h.rH,m.mk,m.sg,m.O5,l.YN,l.Kr,l.Wl,l.JJ,l.On,y.Ry,m.uU],styles:[".colHide[_ngcontent-%COMP%]{display:none}"]})}return o})();var Q=u(15861),B=u(69862),K=u(63049),G=u(61379),H=u(6530),X=u(4213),C=u(48983);function z(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",null==t.leadDraft||null==t.leadDraft.customer?null:t.leadDraft.customer.companyName,",")}}function ee(o,s){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.AsE(", Customer Name: ",null==t.lead||null==t.lead.customerLogin?null:t.lead.customerLogin.firstName," ",null==t.lead||null==t.lead.customerLogin?null:t.lead.customerLogin.lastName,"")}}function te(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.gL8(" ",null==t?null:t.warehouseName,"",null==t?null:t.factoryName,",",null==t?null:t.addressLine1,",",null==t?null:t.cityName,",",null==t||null==t.state?null:t.state.name,",",null==t||null==t.country?null:t.country.name," ")}}function oe(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.gL8(" ",null==t?null:t.warehouseName,"",null==t?null:t.factoryName,",",null==t?null:t.addressLine1,",",null==t?null:t.cityName,",",null==t||null==t.state?null:t.state.name,",",null==t||null==t.country?null:t.country.name," ")}}function ie(o,s){1&o&&(e.TgZ(0,"td")(1,"div",91)(2,"div",21)(3,"div",92)(4,"label",93),e._uU(5,"Lower Limit"),e.qZA(),e.TgZ(6,"div",10),e._UZ(7,"input",94),e.TgZ(8,"span"),e._uU(9,"%"),e.qZA()()(),e.TgZ(10,"div",92)(11,"label",95),e._uU(12,"Upper Limit"),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"input",96),e.TgZ(15,"span"),e._uU(16,"%"),e.qZA()()()()()())}function ne(o,s){1&o&&(e.TgZ(0,"td",97),e._uU(1," ---- "),e.qZA())}function se(o,s){if(1&o&&(e.TgZ(0,"tr",27)(1,"td"),e._UZ(2,"input",88),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",89),e.qZA(),e.YNc(5,ie,17,0,"td",9),e.YNc(6,ne,2,0,"td",90),e.qZA()),2&o){const t=s.$implicit,n=e.oxw();e.Q6J("formGroup",n.getFormGroup(t)),e.xp6(5),e.Q6J("ngIf",t.value.hasOwnProperty("lowerTolerance")),e.xp6(1),e.Q6J("ngIf",!t.value.hasOwnProperty("lowerTolerance"))}}const re=function(o){return{active:o}};function ae(o,s){if(1&o&&(e.TgZ(0,"div",98),e._UZ(1,"img",99),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngClass",e.VKq(2,re,0===s.index)),e.xp6(1),e.Q6J("src",t,e.LSH)}}function le(o,s){1&o&&(e.TgZ(0,"div",100)(1,"button",101),e._UZ(2,"span",102),e.TgZ(3,"span",103),e._uU(4,"Previous"),e.qZA()(),e.TgZ(5,"button",104),e._UZ(6,"span",105),e.TgZ(7,"span",103),e._uU(8,"Next"),e.qZA()()())}function ue(o,s){if(1&o&&e._UZ(0,"img",117),2&o){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function ce(o,s){if(1&o&&e._UZ(0,"img",118),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function de(o,s){if(1&o&&e._UZ(0,"img",119),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function pe(o,s){if(1&o&&e._UZ(0,"img",120),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function me(o,s){if(1&o&&e._UZ(0,"img",121),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function ge(o,s){if(1&o&&e._UZ(0,"img",122),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function he(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",109)(1,"span"),e.YNc(2,ue,1,2,"img",110),e.YNc(3,ce,1,1,"img",111),e.YNc(4,de,1,1,"img",112),e.YNc(5,pe,1,1,"img",113),e.YNc(6,me,1,1,"img",114),e.YNc(7,ge,1,1,"img",115),e.qZA(),e.TgZ(8,"h2"),e._uU(9),e.qZA(),e.TgZ(10,"div",39)(11,"a",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.downloadImage(r.url))}),e._uU(12,"Download "),e._UZ(13,"img",116),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function _e(o,s){if(1&o&&(e.TgZ(0,"div",106)(1,"h1"),e._uU(2,"Artwork:"),e.qZA(),e.TgZ(3,"div",107),e.YNc(4,he,14,7,"div",108),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.productArtworks)}}function fe(o,s){if(1&o&&e._UZ(0,"img",117),2&o){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function qe(o,s){if(1&o&&e._UZ(0,"img",118),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function ve(o,s){if(1&o&&e._UZ(0,"img",119),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Te(o,s){if(1&o&&e._UZ(0,"img",120),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Ze(o,s){if(1&o&&e._UZ(0,"img",121),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Ce(o,s){if(1&o&&e._UZ(0,"img",122),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",109)(1,"span"),e.YNc(2,fe,1,2,"img",110),e.YNc(3,qe,1,1,"img",111),e.YNc(4,ve,1,1,"img",112),e.YNc(5,Te,1,1,"img",113),e.YNc(6,Ze,1,1,"img",114),e.YNc(7,Ce,1,1,"img",115),e.qZA(),e.TgZ(8,"h2"),e._uU(9),e.qZA(),e.TgZ(10,"div",39)(11,"a",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.downloadImage(r.url))}),e._uU(12,"Download "),e._UZ(13,"img",123),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function De(o,s){if(1&o&&(e.TgZ(0,"div",106)(1,"h1"),e._uU(2,"Additional Attachments:"),e.qZA(),e.TgZ(3,"div",107),e.YNc(4,xe,14,7,"div",108),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.productAttachments)}}function be(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function ye(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Shipping term is required. "),e.qZA())}function Ae(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,ye,2,0,"div",9),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.quotationsFormGroupControls.shippingTerms.errors.required)}}const g=function(o){return{"is-invalid":o}};function Pe(o,s){if(1&o&&(e.TgZ(0,"div",57)(1,"div",10)(2,"label"),e._uU(3," Shipping Terms"),e.qZA(),e.TgZ(4,"select",124)(5,"option",125),e._uU(6,"Select Shipping Term"),e.qZA(),e.YNc(7,be,2,2,"option",13),e.qZA(),e.YNc(8,Ae,2,1,"div",60),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(3,g,t.quotationFormSubmittied&&t.quotationsFormGroupControls.shippingTerms.errors)),e.xp6(3),e.Q6J("ngForOf",t.shippingTermsList),e.xp6(1),e.Q6J("ngIf",t.quotationFormSubmittied&&t.quotationsFormGroupControls.shippingTerms.errors)}}function Qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",127)(1,"div",51),e._UZ(2,"input",128),e._uU(3),e.qZA(),e.TgZ(4,"div",129)(5,"div",130),e._uU(6," \xb1 "),e._UZ(7,"input",131),e._uU(8," % "),e.qZA(),e.TgZ(9,"div",52)(10,"input",132),e.NdJ("keydown",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.restrictToInteger(i))}),e.qZA()(),e.TgZ(11,"div",52)(12,"div",74)(13,"span",133),e._uU(14),e.qZA(),e.TgZ(15,"input",134),e.NdJ("keyup",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.changePrice(r))}),e.qZA()()(),e.TgZ(16,"div",52)(17,"div",74)(18,"span",133),e._uU(19),e.qZA(),e._UZ(20,"input",135),e.qZA()(),e.TgZ(21,"div",52),e._UZ(22,"input",136),e.qZA(),e.TgZ(23,"div",52),e._UZ(24,"input",137),e.qZA(),e.TgZ(25,"div",52),e._UZ(26,"input",138),e.qZA()()()}if(2&o){const t=s.$implicit,n=e.oxw();e.Q6J("formGroup",n.getFormGroup(t)),e.xp6(3),e.hij(" ",null==n.leadDraft||null==n.leadDraft.customerProducts?null:n.leadDraft.customerProducts.quantityType," "),e.xp6(11),e.Oqu(null==n.leadDraft?null:n.leadDraft.currency),e.xp6(5),e.Oqu(null==n.leadDraft?null:n.leadDraft.currency)}}function we(o,s){if(1&o&&(e.TgZ(0,"h6"),e._uU(1),e.TgZ(2,"span"),e._uU(3,"Notified by Customer"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij("Case Pack: ",null==t.leadDraft||null==t.leadDraft.customerProducts||null==t.leadDraft.customerProducts.productForm?null:t.leadDraft.customerProducts.productForm.casePack," ")}}function Fe(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Case Pack is required. "),e.qZA())}function Ue(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Fe,2,0,"div",9),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.casePack.errors.required)}}function Ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",10)(2,"label"),e._uU(3," Case Pack"),e.qZA(),e.TgZ(4,"input",139),e.NdJ("keyup",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.changeCasepack(i))}),e.qZA(),e.YNc(5,Ue,2,1,"div",60),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(2,g,t.packagingFormSubmittied&&t.packagingFormControls.casePack.errors)),e.xp6(1),e.Q6J("ngIf",t.packagingFormSubmittied&&t.packagingFormControls.casePack.errors)}}function ke(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Valid Upto date is required. "),e.qZA())}function Se(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,ke,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.validUpto.errors.required)}}function Ne(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Length is required. "),e.qZA())}function Je(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Ne,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.length.errors.required)}}function Ye(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Breadth is required. "),e.qZA())}function Oe(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Ye,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.breadth.errors.required)}}function Le(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Height is required. "),e.qZA())}function Ve(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Le,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.height.errors.required)}}function Re(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Gross weight is required. "),e.qZA())}function Ee(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Re,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.grossWeight.errors.required)}}function Me(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1," Shipping Address "),e.qZA())}function je(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1," Origin Port"),e.qZA())}function We(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1," Destination Port"),e.qZA())}function Be(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function $e(o,s){if(1&o&&(e.TgZ(0,"select",143)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,Be,3,4,"option",13),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,g,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.nearestPortArr)}}function Ke(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function Ge(o,s){if(1&o&&(e.TgZ(0,"select",143)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,Ke,3,4,"option",13),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,g,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.cifShippingPorts)}}function He(o,s){if(1&o&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.HOy(" ",t.name,", ",null==t?null:t.addressLine1,", ",null==t?null:t.addressLine2,", ",null==t?null:t.cityName," ")}}function Xe(o,s){if(1&o&&(e.TgZ(0,"select",143)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,He,2,5,"option",13),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,g,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.addresses)}}function ze(o,s){1&o&&(e.ynx(0),e._uU(1," Origin Port "),e.BQk())}function et(o,s){1&o&&(e.ynx(0),e._uU(1," Origin Port "),e.BQk())}function tt(o,s){1&o&&(e.ynx(0),e._uU(1," Shipping address "),e.BQk())}function ot(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ze,2,0,"ng-container",9),e.YNc(2,et,2,0,"ng-container",9),e.YNc(3,tt,2,0,"ng-container",9),e._uU(4," is required. "),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms||"Delivered"===t.quotationsForm.value.shippingTerms)}}function it(o,s){if(1&o&&(e.TgZ(0,"div",144),e.YNc(1,ot,5,3,"div",9),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.shippingAddress.errors.required)}}function nt(o,s){if(1&o&&(e.TgZ(0,"div",140)(1,"div",10),e.YNc(2,Me,2,0,"label",9),e.YNc(3,je,2,0,"label",9),e.YNc(4,We,2,0,"label",9),e.YNc(5,$e,4,4,"select",141),e.YNc(6,Ge,4,4,"select",141),e.YNc(7,Xe,4,4,"select",141),e.YNc(8,it,2,1,"div",142),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms||"Delivered"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms||"Delivered"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf",t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)}}function st(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," PPS Quantity is required. "),e.qZA())}function rt(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,st,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleQuantity.errors.required)}}function at(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Production Lead Time is required. "),e.qZA())}function lt(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,at,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleProductionLeadTime.errors.required)}}function ut(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Grand Total Price "),e.qZA())}function ct(o,s){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,ut,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleTotalPrice.errors.required)}}function dt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55)(2,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submitPpsForm())}),e._uU(3," Save"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.hasPpsChanges)}}function pt(o,s){if(1&o&&(e.TgZ(0,"option",154),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=e.oxw(2);e.s9C("value",t),e.Q6J("disabled",n.isSelected(t)),e.xp6(1),e.hij(" ",t," ")}}function mt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",155),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw();return e.KtG(r.removeOneTimeCost(i))}),e._UZ(1,"i",156),e.qZA()}}function gt(o,s){1&o&&e._UZ(0,"a",157)}function ht(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",158),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addItem())}),e._UZ(1,"i",159),e.qZA()}}function _t(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",145)(1,"div",69)(2,"div",10)(3,"select",146)(4,"option",125),e._uU(5,"Select Cost"),e.qZA(),e.YNc(6,pt,2,3,"option",147),e.qZA()()(),e.TgZ(7,"div",69)(8,"div",10)(9,"div",74)(10,"span",75),e._uU(11),e.qZA(),e.TgZ(12,"input",148),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.totalOneTimeCost())}),e.qZA()()()(),e.TgZ(13,"div",149)(14,"div",10)(15,"div",150),e.YNc(16,mt,2,0,"a",151),e.YNc(17,gt,1,0,"a",152),e.YNc(18,ht,2,0,"a",153),e.qZA()()()()}if(2&o){const t=s.$implicit,n=s.last,i=e.oxw();e.Q6J("formGroup",i.getFormGroup(t)),e.xp6(6),e.Q6J("ngForOf",i.costsList),e.xp6(5),e.Oqu(null==i.leadDraft?null:i.leadDraft.currency),e.xp6(5),e.Q6J("ngIf",i.oneTimeCostFormControls.controls.length>1),e.xp6(1),e.Q6J("ngIf",!n),e.xp6(1),e.Q6J("ngIf",n)}}const x=function(o){return{"fa-spin fa-spinner":o}};let ft=(()=>{class o{constructor(t,n,i,r,a,p,fo,qo,vo,To,Zo){this.routes=t,this.PS=n,this.QS=i,this.ngxService=r,this._notify=a,this.FB=p,this.LS=fo,this.route=qo,this.FS=vo,this._US=To,this.WS=Zo,this.currentDate=d().format("YYYY-MM-DD"),this.factoryWarehouseSelectedId=null,this.factoryWarehouseSelectedType="",this.selectedLeadId="",this.selectedProductId="",this.packagingFormSubmittied=!1,this.ppsFormSubmittied=!1,this.quotationFormSubmittied=!1,this.toleranceFormSubmittied=!1,this.isLoading=!1,this.totalOneTimeCostNum=0,this.fields=[],this.moment=d(),this.selectedImage=0,this.hasToleranceChanges=!1,this.hasQuoteChanges=!1,this.hasPpsChanges=!1,this.hasOneTimeChanges=!1,this.hasPackagingChanges=!1,this.nearestPortArr=[],this.isPackageLoading=!1,this.isLoadingQuote=!1,this.isLoadingTolerance=!1,this.productArtworks=[],this.productAttachments=[],this.isCasePackNotfied=!1,this.checkppsformdisabled=!1,this.isToleranceDraft=!1,this.isOneTimeCostDraft=!1,this.isQuotationDraft=!1,this.packagingDraft=!1,this.isPpsDraft=!1,this.cifShippingPorts=[],this.addresses=[]}ngOnInit(){this.initForm(),this.routes.params.subscribe(t=>{t&&t.id&&(this.quoteId=t.id,this.getRequoteDetails())}),this._US.getUser().subscribe(t=>{this.currentVendor=t.user,this.shippingTermString=this.currentVendor.ownVendor?"":"FOB",this.currentVendor.ownVendor||this.quotationsForm.get("shippingTerms")?.setValue("FOB")}),this.oneTimeCost(),this.shippingTerm(),this.getFactoryList(),this.getWarehouseList()}ngAfterViewInit(){this.quotationsForm.valueChanges.subscribe(t=>{t.shippingTerms&&(this.shippingTermString=t.shippingTerms,"Ex-Factory"!==t.shippingTerms?this.packagingForm.addControl("shippingAddress",new l.NI("",l.kI.required)):this.packagingForm.removeControl("shippingAddress"),"Ex-Factory"!==t.shippingTerms&&this.packagingForm.get("shippingAddress")?.reset(this.lead?.shippingAddress?this.lead?.shippingAddress:"")),this.hasQuoteChanges=!this.areValuesEqual(this.quotationsForm.value,this.previousQuoteFormValue)})}changeOfFactoryWarehouse(t){this.factoryWarehouseSelectedId=t?.target?.value;let n=this.factoryList.find(r=>r?._id===t?.target?.value),i=this.warehouseList.find(r=>r?._id===t?.target?.value);this.nearestPortArr=[],n&&(this.nearestPortArr.push(n.nearestPort),this.factoryWarehouseSelectedType="factory"),i&&(this.nearestPortArr.push(i.nearestPort),this.factoryWarehouseSelectedType="warehouse")}addQueryParams(){return new B.LE}getFactoryList(){this.ngxService.start(),this.FS.factoryList(this.addQueryParams()).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{this.factoryList=t?.meta?.status?t.data:[]})}areValuesEqual(t,n){return JSON.stringify(t)===JSON.stringify(n)}getWarehouseList(){this.ngxService.start(),this.WS.warehouseList(this.addQueryParams()).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{this.warehouseList=t?.meta?.status?t.data:[]})}initForm(){this.ppsForm=this.FB.group({prePurchaseSampleQuantity:[{value:""},l.kI.required],prePurchaseSampleProductionLeadTime:["",l.kI.required],prePurchaseSampleTotalPrice:["",l.kI.required]}),this.packagingForm=this.FB.group({casePack:["",l.kI.required],validUpto:["",l.kI.required],length:[0,l.kI.required],breadth:[0,l.kI.required],height:[0,l.kI.required],grossWeight:["",l.kI.required],shippingAddress:["",l.kI.required]}),this.oneTimeCostForm=this.FB.group({costsArray:new l.Oe([])}),this.quotationsForm=this.FB.group({shippingTerms:["",l.kI.required],quotationsArray:new l.Oe([])}),this.toleranceForm=this.FB.group({toleranceArray:new l.Oe([])}),this.toleranceForm.valueChanges.subscribe(t=>{this.hasToleranceChanges=!this.areValuesEqual(this.toleranceForm.value,this.previousToleranceFormValue)}),this.ppsForm.valueChanges.subscribe(t=>{const n=this.ppsForm.value;this.leadDraft?.customerProducts?.isPrePurchaseSampleRequired&&(this.hasPpsChanges=!this.areValuesEqual(n,this.previousPpsFormValue),console.log("log1",this.hasPpsChanges,n,this.previousPpsFormValue))}),this.oneTimeCostForm.valueChanges.subscribe(t=>{this.hasOneTimeChanges=!this.areValuesEqual(this.oneTimeCostForm.value,this.previousOneTimeFormValue)}),this.packagingForm.valueChanges.subscribe(t=>{this.hasPackagingChanges=!this.areValuesEqual(this.packagingForm.value,this.previousPackagingFormValue)})}get ppsFormControls(){return this.ppsForm.controls}get packagingFormControls(){return this.packagingForm.controls}get oneTimeCostFormControls(){return this.oneTimeCostForm.controls.costsArray}get quotationsFormControls(){return this.quotationsForm.controls.quotationsArray}get quotationsFormGroupControls(){return this.packagingForm.controls}get toleranceFormControls(){return this.toleranceForm.controls.toleranceArray}addTolerance(t,n,i){this.toleranceFormControls.push(this.tolegranceItem(t,n,i))}addQuotation(t,n){this.quotationsFormControls.push(this.quotationItem(t,n))}tolegranceItem(t,n,i){return this.FB.group(n?{name:t?.name,measurement:t?.measurement,...t.upperTolerance&&{upperTolerance:[t?.upperTolerance,l.kI.required],lowerTolerance:[t?.lowerTolerance,l.kI.required]},...t.upperTolerance&&{unit:[t?.unit,l.kI.required]}}:{name:t?.label,measurement:this.findValue(t.key),...t.isTolerance&&{upperTolerance:[i.upperLimit,l.kI.required],lowerTolerance:[i.lowerLimt,l.kI.required]},...t.isTolerance&&{unit:[i?.unit,l.kI.required]}})}findValue(t){return"object"==typeof this.lead?.customerProducts?.productForm[t]?`${this.lead?.customerProducts?.productForm[t].value} ${this.lead?.customerProducts?.productForm[t].unit}`:this.lead?.customerProducts?.productForm[t]}quotationItem(t,n){return this.FB.group({quantity:n?t?.quantity:t,quantityTolerance:n?t?.quantityTolerance:t,productionleadTime:n?t?.productionleadTime:"",pricePerPiece:n?t?.pricePerPiece:"",totalPrice:[{value:n?t?.totalPrice:"",disabled:!0}],totalCbm:[{value:n?t?.totalCbm:"",disabled:!0}],totalCartons:[{value:n?t?.totalCartons:"Carton"===this.lead?.customerProducts?.quantityType?t:0,disabled:!0}],totalWeight:[{value:n?t?.totalWeight:"",disabled:!0}]})}restrictToInteger(t){-1===["Backspace","ArrowLeft","ArrowRight","Tab","Delete"].indexOf(t.key)&&(t.key<"0"||t.key>"9")&&t.preventDefault()}createItem(t){return this.FB.group({name:t?t?.name:"",cost:t?t?.cost:""})}addItem(t){this.oneTimeCostFormControls.push(this.createItem(t))}removeOneTimeCost(t){this.oneTimeCostForm.controls.costsArray.removeAt(t),this.totalOneTimeCost()}changePrice(t){t.get("totalPrice")?.setValue(Number(t.value.pricePerPiece)*t.value.quantity)}changeCasepack(t){this.quotationsFormControls.controls.map(i=>{"CARTON"===this.lead?.customerProducts?.quantityType.toUpperCase()||i.get("totalCartons")?.setValue((t.target.value?i.value.quantity/Number(t.target.value):0).toFixed())})}changeWeight(t){this.quotationsFormControls.controls.map(n=>{n.get("totalWeight")?.setValue((n.getRawValue().totalCartons*Number(t.target.value)).toFixed())})}changeLbh(t){this.quotationsFormControls.controls.map(n=>{let i=Number(n.get("totalCartons")?.value);Number(this.packagingForm.get("length")?.value)&&Number(this.packagingForm.get("breadth")?.value)&&Number(this.packagingForm.get("height")?.value)&&n.get("totalCbm")?.setValue(Number(this.packagingForm.get("length")?.value||0)*Number(this.packagingForm.get("breadth")?.value||0)*Number(this.packagingForm.get("height")?.value||0)*16387064e-12*i)})}oneTimeCost(){this.ngxService.start(),this.QS.getAppConfigByKey("ONE_TIME_COST").pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?this.costsList=t.data.value.split("|").map(n=>n.trim()):this._notify.showError(t.meta.msg,"Error")})}isSelected(t){this.oneTimeCostForm.value.costsArray.map((n,i)=>n?.name===t)}totalOneTimeCost(){let t=0;this.oneTimeCostForm.value.costsArray.map((n,i)=>{t+=n?.cost}),this.totalOneTimeCostNum=t}submitOneTimeForm(){if(this.oneTimeCostForm.valid){this.isLoading=!0;let t={_id:this.quoteId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},oneTimeCost:this.oneTimeCostForm.value.costsArray,totalOneTimeCost:this.totalOneTimeCostNum};this.QS.requoteAddOneTimeCost(t).pipe((0,c.x)(()=>{this.isLoading=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.ppsFormSubmittied=!0}getFormGroup(t){return t}shippingTerm(){this.ngxService.start(),this.QS.getAppConfigByKey("SHIPPING_TERMS_VALUE").pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.shippingTermsList=t.data.value.split("|"),this.shippingTermsList=this.shippingTermsList.map(n=>n.trim())):this._notify.showError(t.meta.msg,"Error")})}onSelectChange(t){if(this.newShippingAddres="",this.packagingForm.value.shippingAddress)return 0!=this.addresses.length&&this.addresses.forEach(n=>{n._id===t&&(this.newShippingAddres=n?.name+" "+n?.addressLine1+" "+n?.addressLine2+" "+n?.cityName)}),this.newShippingAddres}submitPackagingForm(){if(this.packagingForm.valid){this.isPackageLoading=!0;let t={_id:this.quoteId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},casePack:this.packagingForm.value.casePack,validUpto:d(this.packagingForm.value.validUpto,["DD-MM-YYYY"]).valueOf(),dimension:{length:this.packagingForm.value.length,breadth:this.packagingForm.value.breadth,height:this.packagingForm.value.height},grossWeight:this.packagingForm.value.grossWeight,shippingAddress:""};"DDU"===this.quotationsForm.value.shippingTerms||"DDP"===this.quotationsForm.value.shippingTerms||"Delivered"===this.quotationsForm.value.shippingTerms?t.shippingAddress=this.onSelectChange(this.packagingForm.value.shippingAddress):("DDU"!=this.quotationsForm.value.shippingTerms||"DDP"!=this.quotationsForm.value.shippingTerms||"Delivered"!=this.quotationsForm.value.shippingTerms)&&(t.shippingAddress=this.packagingForm.value.shippingAddress),this.QS.requoteAddPackaging(t).pipe((0,c.x)(()=>{this.isPackageLoading=!1})).subscribe(n=>{n.meta.status?(this.previousPackagingFormValue=this.packagingForm.value,this.hasPackagingChanges=!this.areValuesEqual(this.previousPackagingFormValue,this.previousPackagingFormValue),this._notify.showSuccess(n.meta.msg,"Success")):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.packagingFormSubmittied=!0}submitPpsForm(){if(this.ppsForm.valid){this.isLoading=!0;let t={_id:this.quoteId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},prePurchaseSampleQuantity:this.ppsForm.value.prePurchaseSampleQuantity,prePurchaseSampleProductionLeadTime:this.ppsForm.value.prePurchaseSampleProductionLeadTime,prePurchaseSampleTotalPrice:this.ppsForm.value.prePurchaseSampleTotalPrice};this.QS.requoteAddPps(t).pipe((0,c.x)(()=>{this.isLoading=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.ppsFormSubmittied=!0}toTimeStamp(t){return Date.parse(t)/1e3}submitQuotation(){if(this.quotationsForm.valid){this.isLoadingQuote=!0;let t={_id:this.quoteId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},quotation:this.quotationsForm.getRawValue().quotationsArray,shippingTerms:this.quotationsForm.getRawValue().shippingTerms};this.QS.requoteAddQuotation(t).pipe((0,c.x)(()=>{this.isLoadingQuote=!1})).subscribe(n=>{n.meta.status?(this.previousQuoteFormValue=this.quotationsForm.getRawValue(),this.hasQuoteChanges=!this.areValuesEqual(this.previousQuoteFormValue,this.previousQuoteFormValue),this._notify.showSuccess(n.meta.msg,"Success")):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.quotationFormSubmittied=!0}saveTolerance(){if(this.toleranceForm.valid){this.isLoadingTolerance=!0;let t={_id:this.quoteId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},productTolerance:this.toleranceForm.value.toleranceArray};this.QS.requoteAddTolerance(t).pipe((0,c.x)(()=>{this.isLoadingTolerance=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.toleranceFormSubmittied=!0}getLeadDetail(){this.lead=this.leadDraft,this.isCasePackNotfied=this.lead?.customerProducts.productForm.hasOwnProperty("casePack")&&""!=this.lead?.customerProducts.productForm.casePack.value,this.isCasePackNotfied&&this.packagingForm.get("casePack")?.setValue(this.lead?.customerProducts.productForm.casePack),this.lead?.customerProducts?.productArtworks.map(t=>{let n=t.split("/"),i=this.getFileType(n[n.length-1]);delete i.type,this.productArtworks.push({url:t,name:n[n.length-1],...i})}),this.lead?.customerProducts?.productAttachments.map(t=>{let n=t.split("/"),i=this.getFileType(n[n.length-1]);delete i.type,this.productAttachments.push({url:t,name:n[n.length-1],...i})})}getDetail(){this.ngxService.start(),this.QS.quoteDetail(this.quoteId,!1).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(n=>{n.meta.status&&(this.leadDraft=n?.data,this.addresses=this.leadDraft.userAddresses,this.cifShippingPorts=this.leadDraft.userAddresses.map(i=>i.mappedPort),this.cifShippingPorts=[...new Set(this.cifShippingPorts)],this.selectedLeadId=this.leadDraft?.leadId,this.factoryWarehouseSelectedType=this.leadDraft.factoryId?"factory":"warehouse",this.leadDraft?.factoryId?(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.factory.nearestPort),this.factoryWarehouseSelectedId=this.leadDraft?.factoryId):this.leadDraft.warehouseId&&(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.warehouse.nearestPort),this.factoryWarehouseSelectedId=this.leadDraft?.warehouseId),this.isToleranceDraft||(this.leadDraft?.productTolerance.map((i,r)=>{this.addTolerance(i,!0)}),this.previousToleranceFormValue=this.toleranceForm.value,this.hasToleranceChanges=!this.areValuesEqual(this.previousToleranceFormValue,this.previousToleranceFormValue)),this.isQuotationDraft||this.leadDraft?.quotation.map((i,r)=>{this.addQuotation(i,!0)}),!this.isPpsDraft&&this.leadDraft?.customerProducts?.isPrePurchaseSampleRequired?(this.ppsForm.patchValue({prePurchaseSampleProductionLeadTime:this.leadDraft?.prePurchaseSampleProductionLeadTime,prePurchaseSampleQuantity:this.leadDraft?.prePurchaseSampleQuantity,prePurchaseSampleTotalPrice:this.leadDraft?.prePurchaseSampleTotalPrice}),this.previousPpsFormValue=this.ppsForm.value,this.hasPpsChanges=!this.areValuesEqual(this.previousPpsFormValue,this.previousPpsFormValue),console.log("log2",this.hasPpsChanges)):(this.ppsForm.disable(),this.checkppsformdisabled=!0),this.packagingDraft||(this.packagingForm.patchValue({casePack:this.leadDraft?.casePack,validUpto:d(this.leadDraft?.validUpto).format("DD-MM-YYYY"),length:this.leadDraft?.dimension?.length,breadth:this.leadDraft?.dimension?.breadth,height:this.leadDraft?.dimension?.height,grossWeight:this.leadDraft?.grossWeight,shippingAddress:this.leadDraft?.shippingAddress}),this.previousPackagingFormValue=this.packagingForm.value,this.hasPackagingChanges=!this.areValuesEqual(this.previousPackagingFormValue,this.previousPackagingFormValue),this.hasPackagingChanges=d(this.leadDraft?.validUpto).isBefore(d())),this.leadDraft?.shippingTerms&&this.quotationsForm.get("shippingTerms")?.setValue(this.leadDraft?.shippingTerms),this.previousQuoteFormValue=this.quotationsForm.value,this.hasQuoteChanges=!this.areValuesEqual(this.previousQuoteFormValue,this.previousQuoteFormValue),this.leadDraft?.isOneTimeCostSubmitted||(this.isOneTimeCostDraft=!0,this.leadDraft?.oneTimeCost.map((i,r)=>{this.addItem(i)}),this.previousOneTimeFormValue=this.oneTimeCostForm.value,this.hasOneTimeChanges=!this.areValuesEqual(this.previousOneTimeFormValue,this.previousOneTimeFormValue)),this.totalOneTimeCost()),this.initDatePicker()})}initDatePicker(){$(".validUpToDatePicker").dateRangePicker({format:"DD-MM-YYYY",singleDate:!0,showShortcuts:!1,singleMonth:!0,autoClose:!0,startDate:d().add(1,"days").format("DD-MM-YYYY")}).on("datepicker-change",(t,n)=>{this.packagingForm.get("validUpto")?.setValue(d(n.date1).format("DD-MM-YYYY"))})}getRequoteDetails(){this.ngxService.start(),this.QS.quoteDetail(this.quoteId,!0).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(n=>{n.meta.status?(this.leadDraft=n?.data,this.addresses=this.leadDraft.userAddresses,this.cifShippingPorts=this.leadDraft.userAddresses.map(i=>i.mappedPort),this.cifShippingPorts=[...new Set(this.cifShippingPorts)],this.selectedLeadId=this.leadDraft?.leadId,this.factoryWarehouseSelectedType=this.leadDraft.factoryId?"factory":"warehouse",this.leadDraft?.factoryId?(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.factory.nearestPort),this.factoryWarehouseSelectedId=this.leadDraft?.factoryId):this.leadDraft.warehouseId&&(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.warehouse.nearestPort),this.factoryWarehouseSelectedId=this.leadDraft?.warehouseId),this.getLeadDetail(),!this.leadDraft?.isProductToleranceSubmitted&&this.leadDraft?.productTolerance.length&&(this.isToleranceDraft=!0,this.leadDraft?.productTolerance.map((i,r)=>{this.addTolerance(i,!0)}),this.previousToleranceFormValue=this.toleranceForm.value,this.hasToleranceChanges=!this.areValuesEqual(this.previousToleranceFormValue,this.previousToleranceFormValue)),this.leadDraft?.isQuotationSubmitted&&(this.isQuotationDraft=!0,this.leadDraft?.quotation.map((i,r)=>{this.addQuotation(i,!0)})),this.leadDraft?.customerProducts?.isPrePurchaseSampleRequired?(console.log("innnnnnnnnn",this.leadDraft),this.isPpsDraft=!0,this.ppsForm.patchValue({prePurchaseSampleProductionLeadTime:this.leadDraft?.prePurchaseSampleProductionLeadTime,prePurchaseSampleQuantity:this.leadDraft?.prePurchaseSampleQuantity,prePurchaseSampleTotalPrice:this.leadDraft?.prePurchaseSampleTotalPrice}),this.previousPpsFormValue=this.ppsForm.value,this.hasPpsChanges=!this.areValuesEqual(this.previousPpsFormValue,this.previousPpsFormValue),console.log("log 3",this.hasPpsChanges)):(this.ppsForm.disable(),this.checkppsformdisabled=!0),this.leadDraft?.isPackagingDetailsSubmitted&&(this.packagingDraft=!0,this.packagingForm.patchValue({casePack:this.leadDraft?.casePack,validUpto:d(this.leadDraft?.validUpto).format("DD-MM-YYYY"),length:this.leadDraft?.dimension?.length,breadth:this.leadDraft?.dimension?.breadth,height:this.leadDraft?.dimension?.height,grossWeight:this.leadDraft?.grossWeight,shippingAddress:this.leadDraft?.shippingAddress}),this.previousPackagingFormValue=this.packagingForm.value,this.hasPackagingChanges=!this.areValuesEqual(this.previousPackagingFormValue,this.previousPackagingFormValue),this.hasPackagingChanges=d(this.leadDraft?.validUpto).isBefore(d())),this.leadDraft?.shippingTerms&&this.quotationsForm.get("shippingTerms")?.setValue(this.leadDraft?.shippingTerms),this.previousQuoteFormValue=this.quotationsForm.value,this.hasQuoteChanges=!this.areValuesEqual(this.previousQuoteFormValue,this.previousQuoteFormValue),this.leadDraft?.isOneTimeCostSubmitted&&(this.isOneTimeCostDraft=!0,this.leadDraft?.oneTimeCost.map((i,r)=>{this.addItem(i)}),this.previousOneTimeFormValue=this.oneTimeCostForm.value,this.hasOneTimeChanges=!this.areValuesEqual(this.previousOneTimeFormValue,this.previousOneTimeFormValue),this.totalOneTimeCost()),this.getDetail()):this.getDetail()})}submitQuote(){this.isLoading=!0,this.QS.requoteSubmit(this.quoteId).pipe((0,c.x)(()=>{this.isLoading=!1})).subscribe(t=>{t.meta.status?(this._notify.showSuccess(t.meta.msg,"Success"),this.route.navigate(["/quotes"])):this._notify.showWarning(t.meta.msg,"Error")},t=>{this._notify.showError("Something Went Wrong","Error")})}getFileType(t){const n=t.lastIndexOf(".");if(-1===n)return"File name has no extension";switch(t.substring(n+1).toLowerCase()){case"jpg":case"jpeg":case"png":return{type:"Image file",isImage:!0};case"pdf":return{type:"PDF file",isPdf:!0};case"doc":case"docx":return{type:"Word document",isWord:!0};case"txt":return{type:"Text file",isText:!0};case"ai":return{type:"Adobe Illustrator file",isIllustrator:!0};case"cdr":return{type:"CorelDRAW file",isCorelDraw:!0};case"xls":return{type:"Excel spreadsheet",isExcel:!0};case"csv":return{type:"CSV file",isExcel:!0};default:return"Unknown file type"}}downloadImage(t){return(0,Q.Z)(function*(){const i=yield(yield fetch(`${t}?pactap=1`)).blob(),r=t.substring(t.lastIndexOf("/")+1),a=document.createElement("a"),p=window.URL.createObjectURL(i);a.href=p,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(h.gz),e.Y36(b.s),e.Y36(q.P),e.Y36(_.LA),e.Y36(v.c),e.Y36(l.qu),e.Y36(K.C),e.Y36(h.F0),e.Y36(G.L),e.Y36(H.K),e.Y36(X.l))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-requote"]],decls:259,vars:81,consts:[["id","printQuoteNowPage",1,"dashboardMain"],[1,"page-header","product-page-header","d-flex","justify-content-between"],[1,"quotesHeader"],[1,"backBtn","printPageButton"],["href","javascript:history.back()"],[1,"bi","bi-arrow-left-short"],[1,"formBox","form-box"],[1,"text-success"],[1,"profile-info"],[4,"ngIf"],[1,"form-group"],[1,"form-control","form-ctrl",3,"ngModel","ngModelChange","change"],["label","Factory"],[3,"value",4,"ngFor","ngForOf"],["label","Warehouse"],[1,"dropDownExport"],[1,"rightColumnDrop","mt-4","printPageButton"],["printSectionId","printQuoteNowPage","ngxPrint","",1,"btn","btn-submit","btn-outline-success",2,"width","222px",3,"useExistingCss"],["src","assets/images/download.png","alt","",1,"me-2",2,"max-width","20px"],[1,"productDetailsPage"],[1,"login-white-box","bg-white","white-well"],[1,"row"],[1,"col-12","col-sm-8","col-md-8","col-lg-8"],[1,"quotations-script","bg-success-light"],[1,"mb-0","text-white"],[1,"table-responsive"],[1,"tableBorder"],[3,"formGroup"],[3,"formGroup",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","col-md-4","col-lg-4"],[1,"productSliderBox"],[1,"main_btn","text-end","printPageButton"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa",3,"ngClass"],[1,"machineSlider"],["id","robotcarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","nextprev",4,"ngIf"],[1,"main_btn","printPageButton"],["href","javascript:void(0)",1,"btn","btn-default",3,"click"],["src","assets/images/download.png","alt",""],["class","atWorkBox",4,"ngIf"],[1,"bg-white","white-well"],[1,"login-white-box"],[1,"d-sm-inline-block","ms-3"],[1,"col-12","col-sm-12","col-md-12","col-lg-12",3,"formGroup"],["class","col-12 col-sm-4 col-md-4 col-lg-3",4,"ngIf"],[1,"tableBorder","tbldesignforlist"],[1,"tblflexcolumn"],[1,"tblflexcolumnin","pe-0"],[1,"listtitlegreen"],[1,"listcontentgreen"],["class","tblflexcolumnin  ps-0 ",3,"formGroup",4,"ngFor","ngForOf"],[1,"smallBtn","printPageButton"],[1,"main_btn","text-end"],[1,"packagingDetails","form-box"],[1,"col-12","col-sm-4","col-md-4","col-lg-3"],["type","text","placeholder","DD/MM/YYYY","formControlName","validUpto",1,"form-control","form-ctrl","validUpToDatePicker",3,"ngClass"],["src","assets/images/celender-icon.png","alt",""],["class","invalid-feedback",4,"ngIf"],[1,"threeBox"],["type","number","placeholder","L","formControlName","length",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","B","formControlName","breadth",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","H","formControlName","height",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","Gross Weight","formControlName","grossWeight",1,"form-control","form-ctrl",3,"ngClass","keyup"],["class","col-12 col-sm-4 col-md-4 col-lg-9",4,"ngIf"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"ppsCost","form-box"],[1,"col-12","col-sm-5","col-md-5","col-lg-5"],[1,"table-responsive","fix-headertbl","d-none"],[1,"td_green"],["type","text","placeholder","PPS Quantity","formControlName","prePurchaseSampleQuantity",1,"form-control","form-ctrl",3,"ngClass"],["type","text","placeholder","Production Lead Time","formControlName","prePurchaseSampleProductionLeadTime",1,"form-control","form-ctrl",3,"ngClass"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","placeholder","Price","formControlName","prePurchaseSampleTotalPrice",1,"form-control","form-ctrl",3,"ngClass"],["class","smallBtn printPageButton",4,"ngIf"],[1,"col-12","col-sm-7","col-md-7","col-lg-7"],[1,"oneTimeCost"],[1,"bgGrayBox","mb-4"],[1,"col-12","col-sm-6","col-md-6","col-lg-6"],[1,"formOneTime"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"main_btn","text-end","mt-5","printPageButton"],["fgsColor","#3E916C",3,"hasProgressBar"],[3,"value"],["type","text","readonly","","formControlName","name",1,"form-control","form-ctrl","showastext"],["type","text","formControlName","measurement",1,"form-control","form-ctrl","showastext"],["class","text-center",4,"ngIf"],[1,"form-box"],[1,"col-md-6"],["for","lowerLimit",1,"mb-2"],["id","lowerLimit","type","number","placeholder","","formControlName","lowerTolerance",1,"form-control","form-ctrl"],["for","upperLimit",1,"mb-2"],["id","upperLimit","type","number","placeholder","","formControlName","upperTolerance",1,"form-control","form-ctrl"],[1,"text-center"],[1,"carousel-item","active",3,"ngClass"],["alt"," ",1,"d-block","w-100",3,"src"],[1,"nextprev"],["type","button","data-bs-target","#robotcarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#robotcarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"atWorkBox"],[1,"pdfDownloadBox"],["class","downLoadPdf",4,"ngFor","ngForOf"],[1,"downLoadPdf"],[3,"src","alt",4,"ngIf"],["src","assets/images/cdr-icon.png",3,"alt",4,"ngIf"],["src","assets/images/pdf-icon.png",3,"alt",4,"ngIf"],["src","assets/images/word-icon.png",3,"alt",4,"ngIf"],["src","assets/images/xls-icon.png",3,"alt",4,"ngIf"],["src","assets/images/illustrator-icon.png",3,"alt",4,"ngIf"],["src","assets/images/download.png","alt","Download Art"],[3,"src","alt"],["src","assets/images/cdr-icon.png",3,"alt"],["src","assets/images/pdf-icon.png",3,"alt"],["src","assets/images/word-icon.png",3,"alt"],["src","assets/images/xls-icon.png",3,"alt"],["src","assets/images/illustrator-icon.png",3,"alt"],["src","assets/images/download.png","alt","Download Addiotional Attachment"],["formControlName","shippingTerms",1,"form-ctrl","form-control",3,"ngClass"],["value",""],[1,"invalid-feedback"],[1,"tblflexcolumnin","ps-0",3,"formGroup"],["type","text","placeholder","","readonly","","formControlName","quantity",1,"form-control","form-ctrl","showastext2",2,"width","50px"],[1,"form-box","formboxtbl"],[1,"listcontentgreen","tolerancetextfield"],["type","number","placeholder","","formControlName","quantityTolerance","placeholder","5",1,"form-control","form-ctrl"],["type","text","placeholder","","formControlName","productionleadTime",1,"form-control","form-ctrl",3,"keydown"],[1,"input-group-text",2,"height","35px"],["type","number","placeholder","","formControlName","pricePerPiece",1,"form-control","form-ctrl",3,"keyup"],["type","number","placeholder","","formControlName","totalPrice",1,"form-control","form-ctrl"],["type","text","placeholder","","formControlName","totalCbm",1,"form-control","form-ctrl"],["type","text","placeholder","","formControlName","totalCartons",1,"form-control","form-ctrl"],["type","text","placeholder","","formControlName","totalWeight",1,"form-control","form-ctrl"],["type","number","placeholder","Case Pack","formControlName","casePack",1,"form-control","form-ctrl",3,"ngClass","keyup"],[1,"col-12","col-sm-4","col-md-4","col-lg-9"],["class","form-ctrl form-control","formControlName","shippingAddress",3,"ngClass",4,"ngIf"],["style","display: block;","class","invalid-feedback",4,"ngIf"],["formControlName","shippingAddress",1,"form-ctrl","form-control",3,"ngClass"],[1,"invalid-feedback",2,"display","block"],[1,"row",3,"formGroup"],["formControlName","name",1,"form-control","form-ctrl"],[3,"value","disabled",4,"ngFor","ngForOf"],["type","number","placeholder"," 30.000","formControlName","cost",1,"form-control","form-ctrl",3,"change"],[1,"col-12","col-sm-2","col-md-2","col-lg-2","align-items-center","d-flex"],[1,"delete_add"],["href","javascript:void(0)",3,"click",4,"ngIf"],["style","border:none;","href","javascript:void(0)",4,"ngIf"],["class","add ms-2","href","javascript:void(0)",3,"click",4,"ngIf"],[3,"value","disabled"],["href","javascript:void(0)",3,"click"],[1,"fa","fa-trash-o"],["href","javascript:void(0)",2,"border","none"],["href","javascript:void(0)",1,"add","ms-2",3,"click"],[1,"bi","bi-plus-lg"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"div",6)(7,"h3"),e._uU(8," Quoting "),e.TgZ(9,"span",7),e._uU(10),e.qZA()(),e.TgZ(11,"div",8)(12,"h6",7),e._uU(13),e.qZA(),e.TgZ(14,"h6")(15,"span",7),e.YNc(16,z,2,1,"span",9),e._uU(17),e.YNc(18,ee,2,2,"ng-container",9),e._uU(19),e.qZA()(),e.TgZ(20,"h6",7),e._uU(21),e.qZA()(),e.TgZ(22,"div",10)(23,"label"),e._uU(24,"Quoting From:"),e.qZA(),e.TgZ(25,"select",11),e.NdJ("ngModelChange",function(a){return i.factoryWarehouseSelectedId=a})("change",function(a){return i.changeOfFactoryWarehouse(a)}),e.TgZ(26,"optgroup",12),e.YNc(27,te,2,7,"option",13),e.qZA(),e.TgZ(28,"optgroup",14),e.YNc(29,oe,2,7,"option",13),e.qZA()()()(),e.TgZ(30,"div",15)(31,"span")(32,"div",16)(33,"button",17),e._UZ(34,"img",18),e._uU(35," Export as PDF "),e.qZA()()()()()(),e.TgZ(36,"div",19)(37,"div",20)(38,"div",21)(39,"div",22)(40,"div",23)(41,"h4",24),e._uU(42,"Product Details"),e.qZA()(),e.TgZ(43,"div",25)(44,"div",26)(45,"form",27)(46,"table")(47,"tbody")(48,"tr")(49,"th"),e._uU(50," Details"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Measurements "),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Tolerances "),e.qZA()(),e.YNc(55,se,7,3,"tr",28),e.qZA()()()()()(),e.TgZ(56,"div",29)(57,"div",30)(58,"div",31)(59,"button",32),e.NdJ("click",function(){return i.saveTolerance()}),e._UZ(60,"i",33),e._uU(61," Save "),e.qZA()(),e.TgZ(62,"div",34)(63,"div",35)(64,"div",36),e.YNc(65,ae,2,4,"div",37),e.qZA(),e.YNc(66,le,9,0,"div",38),e.qZA(),e.TgZ(67,"div",39)(68,"a",40),e.NdJ("click",function(){return i.downloadImage(null==i.leadDraft||null==i.leadDraft.product?null:i.leadDraft.product.productImg[i.selectedImage])}),e._uU(69,"Download "),e._UZ(70,"img",41),e.qZA()()(),e.YNc(71,_e,5,1,"div",42),e.YNc(72,De,5,1,"div",42),e.qZA()()()(),e.TgZ(73,"div",43)(74,"div",44)(75,"div",23)(76,"h4",24),e._uU(77,"Quotations"),e.qZA()(),e.TgZ(78,"span",45),e._uU(79),e.qZA(),e.TgZ(80,"div",21)(81,"div",46),e.YNc(82,Pe,9,5,"div",47),e.TgZ(83,"div",25)(84,"div",48)(85,"form")(86,"div",49)(87,"div",50)(88,"ul")(89,"li",51),e._uU(90,"Quantity"),e.qZA(),e.TgZ(91,"li",52),e._uU(92,"Quantity Tolerance:"),e.qZA(),e.TgZ(93,"li",52),e._uU(94,"Prod. Lead Time (In Days):"),e.qZA(),e.TgZ(95,"li",52),e._uU(96),e.qZA(),e.TgZ(97,"li",52),e._uU(98,"Total Price:"),e.qZA(),e.TgZ(99,"li",52),e._uU(100,"Total CBM:"),e.qZA(),e.TgZ(101,"li",52),e._uU(102,"Total Cartons:"),e.qZA(),e.TgZ(103,"li",52),e._uU(104,"Total Weight (In kg):"),e.qZA()()(),e.YNc(105,Qe,27,4,"div",53),e.qZA()()()(),e.TgZ(106,"div",54)(107,"div",55)(108,"button",32),e.NdJ("click",function(){return i.submitQuotation()}),e._UZ(109,"i",33),e._uU(110," Save "),e.qZA()()()()()()(),e.TgZ(111,"div",20)(112,"div",23)(113,"h4",24),e._uU(114,"Packaging Details"),e.qZA()(),e.TgZ(115,"div",56),e.YNc(116,we,4,1,"h6",9),e.TgZ(117,"form",27)(118,"div",21),e.YNc(119,Ie,6,4,"div",47),e.TgZ(120,"div",57)(121,"div",10)(122,"label"),e._uU(123," Valid Upto"),e.qZA(),e._UZ(124,"input",58),e.TgZ(125,"span"),e._UZ(126,"img",59),e.qZA(),e.YNc(127,Se,2,1,"div",60),e.qZA()(),e.TgZ(128,"div",57)(129,"div",10)(130,"label"),e._uU(131," Carton Dimensions "),e.TgZ(132,"span"),e._uU(133,"(in Inches)"),e.qZA()(),e.TgZ(134,"div",61)(135,"input",62),e.NdJ("keyup",function(a){return i.changeLbh(a)}),e.qZA(),e.TgZ(136,"input",63),e.NdJ("keyup",function(a){return i.changeLbh(a)}),e.qZA(),e.TgZ(137,"input",64),e.NdJ("keyup",function(a){return i.changeLbh(a)}),e.qZA()(),e.YNc(138,Je,2,1,"div",60),e.YNc(139,Oe,2,1,"div",60),e.YNc(140,Ve,2,1,"div",60),e.qZA()(),e.TgZ(141,"div",57)(142,"div",10)(143,"label"),e._uU(144," Gross Weight "),e.TgZ(145,"span"),e._uU(146,"(per case in kg)"),e.qZA()(),e.TgZ(147,"input",65),e.NdJ("keyup",function(a){return i.changeWeight(a)}),e.qZA(),e.YNc(148,Ee,2,1,"div",60),e.qZA()(),e.YNc(149,nt,9,7,"div",66),e.qZA()(),e.TgZ(150,"div",54)(151,"div",55)(152,"button",32),e.NdJ("click",function(){return i.submitPackagingForm()}),e._UZ(153,"i",33),e._uU(154," Save "),e.qZA()()()()(),e.TgZ(155,"div",21)(156,"div",67)(157,"div",68)(158,"div",21)(159,"div",69)(160,"div",44)(161,"div",23)(162,"h4",24),e._uU(163,"PPS"),e.qZA()(),e.TgZ(164,"div",70)(165,"div",26)(166,"table")(167,"tbody")(168,"tr")(169,"th"),e._uU(170," PPS Quantity"),e.qZA(),e.TgZ(171,"th"),e._uU(172,"10"),e.qZA()(),e.TgZ(173,"tr")(174,"td",71),e._uU(175,"Prod. Lead Time (In Days): "),e.qZA(),e.TgZ(176,"td"),e._uU(177,"45 Days "),e.qZA()(),e.TgZ(178,"tr")(179,"td",71),e._uU(180,"Grand Total Price: "),e.qZA(),e.TgZ(181,"td"),e._uU(182," $ 750.00"),e.qZA()()()()()(),e.TgZ(183,"div",44)(184,"form",27)(185,"div",21)(186,"div",67)(187,"div",10)(188,"label"),e._uU(189," PPS Quantity "),e.TgZ(190,"span"),e._uU(191,":"),e.qZA()(),e._UZ(192,"input",72),e.YNc(193,rt,2,1,"div",60),e.qZA()(),e.TgZ(194,"div",67)(195,"div",10)(196,"label"),e._uU(197," Production Lead Time "),e.TgZ(198,"span"),e._uU(199,"(In Days):"),e.qZA()(),e._UZ(200,"input",73),e.YNc(201,lt,2,1,"div",60),e.qZA()(),e.TgZ(202,"div",67)(203,"div",10)(204,"label"),e._uU(205," Grand Total Price:"),e.qZA(),e.TgZ(206,"div",74)(207,"span",75),e._uU(208),e.qZA(),e._UZ(209,"input",76),e.qZA(),e.YNc(210,ct,2,1,"div",60),e.qZA()()()(),e.YNc(211,dt,4,1,"div",77),e.qZA()()(),e.TgZ(212,"div",78)(213,"div",44)(214,"div",23)(215,"h4",24),e._uU(216,"One Time Cost"),e.qZA()(),e.TgZ(217,"div",70)(218,"div",26)(219,"table")(220,"tbody")(221,"tr")(222,"th"),e._uU(223,"One Time Cost"),e.qZA(),e.TgZ(224,"th"),e._uU(225,"Cost"),e.qZA()(),e.TgZ(226,"tr")(227,"td",71),e._uU(228,"Cylinder Cost "),e.qZA(),e.TgZ(229,"td"),e._uU(230,"$ 30,000 "),e.qZA()(),e.TgZ(231,"tr")(232,"td",71),e._uU(233,"Total One Time Cost: "),e.qZA(),e.TgZ(234,"td"),e._uU(235,"$ 30,000"),e.qZA()()()()()(),e.TgZ(236,"div",44)(237,"div",79)(238,"div",80)(239,"div",21)(240,"div",81)(241,"h2"),e._uU(242,"One Time Cost"),e.qZA()(),e.TgZ(243,"div",81)(244,"h2"),e._uU(245,"Cost"),e.qZA()()()(),e.TgZ(246,"div",82)(247,"form",27),e.YNc(248,_t,19,6,"div",83),e.qZA()()(),e.TgZ(249,"h6",84),e._uU(250),e.qZA(),e.TgZ(251,"div",54)(252,"div",55)(253,"button",32),e.NdJ("click",function(){return i.submitOneTimeForm()}),e._uU(254," Save"),e.qZA()()()()()()()()()(),e.TgZ(255,"div",85)(256,"button",32),e.NdJ("click",function(){return i.submitQuote()}),e._uU(257," Submit Quote "),e.qZA()()()(),e._UZ(258,"ngx-ui-loader",86)),2&n&&(e.xp6(10),e.hij("(",null==i.leadDraft||null==i.leadDraft.product?null:i.leadDraft.product.productName,")"),e.xp6(3),e.hij("Product ID: ",null==i.leadDraft?null:i.leadDraft.customerProducts.customerProductId,""),e.xp6(3),e.Q6J("ngIf",i.currentVendor.ownVendor),e.xp6(1),e.hij(" Customer ID: ",null==i.leadDraft||null==i.leadDraft.customerLogin?null:i.leadDraft.customerLogin.customerId," "),e.xp6(1),e.Q6J("ngIf",i.currentVendor.ownVendor),e.xp6(1),e.hij(" (",null==i.leadDraft||null==i.leadDraft.customer||null==i.leadDraft.customer.countryObj?null:i.leadDraft.customer.countryObj.name,")"),e.xp6(2),e.AsE(" Vendor ID : ",null==i.leadDraft||null==i.leadDraft.vendor?null:i.leadDraft.vendor.vendorId,"(",null==i.leadDraft||null==i.leadDraft.factory?null:i.leadDraft.factory.cityName,") "),e.xp6(4),e.Q6J("ngModel",i.factoryWarehouseSelectedId),e.xp6(2),e.Q6J("ngForOf",i.factoryList),e.xp6(2),e.Q6J("ngForOf",i.warehouseList),e.xp6(4),e.Q6J("useExistingCss",!0),e.xp6(12),e.Q6J("formGroup",i.toleranceForm),e.xp6(10),e.Q6J("ngForOf",i.toleranceFormControls.controls),e.xp6(4),e.Q6J("disabled",!i.hasToleranceChanges||i.isLoadingTolerance),e.xp6(1),e.Q6J("ngClass",e.VKq(59,x,i.isLoadingTolerance)),e.xp6(5),e.Q6J("ngForOf",null==i.leadDraft||null==i.leadDraft.product?null:i.leadDraft.product.productImg),e.xp6(1),e.Q6J("ngIf",(null==i.leadDraft||null==i.leadDraft.product?null:i.leadDraft.product.productImg.length)>1),e.xp6(5),e.Q6J("ngIf",i.productArtworks.length),e.xp6(1),e.Q6J("ngIf",i.productAttachments.length),e.xp6(7),e.hij("Quote ",i.shippingTermString," Prices"),e.xp6(2),e.Q6J("formGroup",i.quotationsForm),e.xp6(1),e.Q6J("ngIf",i.currentVendor.ownVendor),e.xp6(14),e.hij("Price Per ",null==i.lead||null==i.lead.customerProducts?null:i.lead.customerProducts.quantityType,":"),e.xp6(9),e.Q6J("ngForOf",i.quotationsFormControls.controls),e.xp6(3),e.Q6J("disabled",!i.hasQuoteChanges||i.isLoadingQuote),e.xp6(1),e.Q6J("ngClass",e.VKq(61,x,i.isLoadingQuote)),e.xp6(7),e.Q6J("ngIf",i.isCasePackNotfied),e.xp6(1),e.Q6J("formGroup",i.packagingForm),e.xp6(2),e.Q6J("ngIf",!i.isCasePackNotfied),e.xp6(5),e.Q6J("ngClass",e.VKq(63,g,i.packagingFormSubmittied&&i.packagingFormControls.validUpto.errors)),e.xp6(3),e.Q6J("ngIf",i.packagingFormSubmittied&&i.packagingFormControls.validUpto.errors),e.xp6(8),e.Q6J("ngClass",e.VKq(65,g,i.packagingFormSubmittied&&i.packagingFormControls.length.errors)),e.xp6(1),e.Q6J("ngClass",e.VKq(67,g,i.packagingFormSubmittied&&i.packagingFormControls.breadth.errors)),e.xp6(1),e.Q6J("ngClass",e.VKq(69,g,i.packagingFormSubmittied&&i.packagingFormControls.height.errors)),e.xp6(1),e.Q6J("ngIf",i.packagingFormSubmittied&&i.packagingFormControls.length.errors),e.xp6(1),e.Q6J("ngIf",i.packagingFormSubmittied&&i.packagingFormControls.breadth.errors),e.xp6(1),e.Q6J("ngIf",i.packagingFormSubmittied&&i.packagingFormControls.height.errors),e.xp6(7),e.Q6J("ngClass",e.VKq(71,g,i.packagingFormSubmittied&&i.packagingFormControls.grossWeight.errors)),e.xp6(1),e.Q6J("ngIf",i.packagingFormSubmittied&&i.packagingFormControls.grossWeight.errors),e.xp6(1),e.Q6J("ngIf",i.packagingForm.value.hasOwnProperty("shippingAddress")),e.xp6(3),e.Q6J("disabled",!i.hasPackagingChanges||i.isPackageLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(73,x,i.isPackageLoading)),e.xp6(31),e.Q6J("formGroup",i.ppsForm),e.xp6(8),e.Q6J("ngClass",e.VKq(75,g,i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleQuantity.errors)),e.xp6(1),e.Q6J("ngIf",i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleQuantity.errors),e.xp6(7),e.Q6J("ngClass",e.VKq(77,g,i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleProductionLeadTime.errors)),e.xp6(1),e.Q6J("ngIf",i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleProductionLeadTime.errors),e.xp6(7),e.Oqu(null==i.leadDraft?null:i.leadDraft.currency),e.xp6(1),e.Q6J("ngClass",e.VKq(79,g,i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleTotalPrice.errors)),e.xp6(1),e.Q6J("ngIf",i.ppsFormSubmittied&&i.ppsFormControls.prePurchaseSampleTotalPrice.errors),e.xp6(1),e.Q6J("ngIf",!i.checkppsformdisabled),e.xp6(36),e.Q6J("formGroup",i.oneTimeCostForm),e.xp6(1),e.Q6J("ngForOf",i.oneTimeCostFormControls.controls),e.xp6(2),e.AsE("Total One Time Cost: ",null==i.leadDraft?null:i.leadDraft.currency," ",i.totalOneTimeCostNum,""),e.xp6(3),e.Q6J("disabled",!i.hasOneTimeChanges),e.xp6(3),e.Q6J("disabled",i.hasOneTimeChanges||i.hasPpsChanges||i.hasPackagingChanges||i.hasQuoteChanges||i.hasToleranceChanges),e.xp6(2),e.Q6J("hasProgressBar",!1))},dependencies:[_.Eo,m.mk,m.sg,m.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,l.On,l.F,C.IH,m.rS],styles:[".btn[_ngcontent-%COMP%]:disabled, .btn.disabled[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{opacity:.4}.btn-success[_ngcontent-%COMP%]:disabled, .btn-success.disabled[_ngcontent-%COMP%]{background-color:#838383;border-color:#838383}@media print{.printPageButton[_ngcontent-%COMP%]{display:none!important}}"]})}return o})();const qt=function(o){return["/quotation/details",o]};function vt(o,s){if(1&o&&(e.TgZ(0,"div",66)(1,"div",14)(2,"a",67),e._uU(3,"View Previous Quotes "),e.qZA()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("routerLink",e.VKq(1,qt,null==t.quoteDetail?null:t.quoteDetail.previousQuoteId))}}function Tt(o,s){1&o&&(e.TgZ(0,"sub",74),e._uU(1,"%"),e.qZA())}function Zt(o,s){1&o&&(e.TgZ(0,"sub",74),e._uU(1,"%"),e.qZA())}function Ct(o,s){if(1&o&&(e.TgZ(0,"td",26)(1,"div",69)(2,"div")(3,"label",70),e._uU(4,"Lower Limit"),e.qZA(),e.TgZ(5,"div",14)(6,"div",71),e._uU(7),e.YNc(8,Tt,2,0,"sub",72),e.qZA()()(),e.TgZ(9,"div")(10,"label",73),e._uU(11,"Upper Limit"),e.qZA(),e.TgZ(12,"div",14)(13,"div",71),e._uU(14),e.YNc(15,Zt,2,0,"sub",72),e.qZA()()()()()),2&o){const t=e.oxw().$implicit;e.xp6(7),e.hij(" ",(null==t?null:t.lowerTolerance)||"--"," "),e.xp6(1),e.Q6J("ngIf","percentage"===(null==t?null:t.unit)),e.xp6(6),e.hij(" ",(null==t?null:t.upperTolerance)||"--"," "),e.xp6(1),e.Q6J("ngIf","percentage"===(null==t?null:t.unit))}}function xt(o,s){1&o&&(e.TgZ(0,"td",26),e._uU(1," ---- "),e.qZA())}function Dt(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._uU(4),e.qZA(),e.YNc(5,Ct,16,4,"td",68),e.YNc(6,xt,2,0,"td",68),e.qZA()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(2),e.Oqu(null==t?null:t.measurement),e.xp6(1),e.Q6J("ngIf",null==t?null:t.lowerTolerance),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.lowerTolerance))}}const bt=function(o){return{active:o}};function yt(o,s){if(1&o&&(e.TgZ(0,"div",77),e._UZ(1,"img",78),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngClass",e.VKq(2,bt,0===s.index)),e.xp6(1),e.Q6J("src",t,e.LSH)}}function At(o,s){if(1&o&&(e.TgZ(0,"div",75),e.YNc(1,yt,2,4,"div",76),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.quoteDetail||null==t.quoteDetail.customerProducts?null:t.quoteDetail.customerProducts.productImages)}}function Pt(o,s){1&o&&(e.TgZ(0,"div",75)(1,"div",79),e._UZ(2,"img",80),e.qZA()())}function Qt(o,s){1&o&&(e.TgZ(0,"button",81),e._UZ(1,"span",82),e.TgZ(2,"span",83),e._uU(3,"Previous"),e.qZA()())}function wt(o,s){1&o&&(e.TgZ(0,"button",84),e._UZ(1,"span",85),e.TgZ(2,"span",83),e._uU(3,"Next"),e.qZA()())}function Ft(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",86),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadImage(null==i.quoteDetail||null==i.quoteDetail.product?null:i.quoteDetail.product.productImg[i.selectedImage]))}),e._uU(1,"Download "),e._UZ(2,"i",87),e.qZA()}}function Ut(o,s){if(1&o&&e._UZ(0,"img",102),2&o){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function It(o,s){if(1&o&&e._UZ(0,"img",103),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function kt(o,s){if(1&o&&e._UZ(0,"img",104),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function St(o,s){if(1&o&&e._UZ(0,"img",105),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Nt(o,s){if(1&o&&e._UZ(0,"img",106),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Jt(o,s){if(1&o&&e._UZ(0,"img",107),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Yt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",92)(1,"div",93)(2,"div",94),e.YNc(3,Ut,1,2,"img",95),e.YNc(4,It,1,1,"img",96),e.YNc(5,kt,1,1,"img",97),e.YNc(6,St,1,1,"img",98),e.YNc(7,Nt,1,1,"img",99),e.YNc(8,Jt,1,1,"img",100),e.qZA(),e.TgZ(9,"h6"),e._uU(10),e.qZA()(),e.TgZ(11,"div")(12,"a",101),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.downloadImage(r.url))}),e._uU(13,"Download "),e._UZ(14,"i",87),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(3),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function Ot(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",88)(2,"h6",89),e._uU(3,"Artwork:"),e.qZA()(),e.TgZ(4,"div",90),e.YNc(5,Yt,15,7,"div",91),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.productArtworks)}}function Lt(o,s){if(1&o&&e._UZ(0,"img",102),2&o){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function Vt(o,s){if(1&o&&e._UZ(0,"img",103),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Rt(o,s){if(1&o&&e._UZ(0,"img",104),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Et(o,s){if(1&o&&e._UZ(0,"img",105),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Mt(o,s){if(1&o&&e._UZ(0,"img",106),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function jt(o,s){if(1&o&&e._UZ(0,"img",107),2&o){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Wt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",92)(1,"div",93)(2,"div",94),e.YNc(3,Lt,1,2,"img",95),e.YNc(4,Vt,1,1,"img",96),e.YNc(5,Rt,1,1,"img",97),e.YNc(6,Et,1,1,"img",98),e.YNc(7,Mt,1,1,"img",99),e.YNc(8,jt,1,1,"img",100),e.qZA(),e.TgZ(9,"h6"),e._uU(10),e.qZA()(),e.TgZ(11,"div")(12,"a",101),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.downloadImage(r.url))}),e._uU(13,"Download "),e._UZ(14,"i",87),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(3),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function Bt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",108)(2,"h6",30),e._uU(3,"Additional Attachments:"),e.qZA()(),e.TgZ(4,"div",90),e.YNc(5,Wt,15,7,"div",91),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.productAttachments)}}function $t(o,s){if(1&o&&(e.TgZ(0,"td",26),e._uU(1),e._UZ(2,"br"),e.TgZ(3,"span",109),e._uU(4),e.qZA()()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.quantity," "),e.xp6(3),e.hij(" (\xb1 ",(null==t?null:t.quantityTolerance)||0," %)")}}function Kt(o,s){if(1&o&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.productionleadTime," Days")}}function Gt(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.quoteDetail||null==t.quoteDetail.vendor?null:t.quoteDetail.vendor.currency)}}function Ht(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function Xt(o,s){if(1&o&&(e.TgZ(0,"td",26),e.YNc(1,Gt,2,1,"span",36),e.YNc(2,Ht,2,0,"span",36),e._uU(3),e.qZA()),2&o){const t=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)==(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)!=(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.hij(" ",null==t?null:t.pricePerPiece,"")}}function zt(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.quoteDetail||null==t.quoteDetail.vendor?null:t.quoteDetail.vendor.currency)}}function eo(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function to(o,s){if(1&o&&(e.TgZ(0,"td",26),e.YNc(1,zt,2,1,"span",36),e.YNc(2,eo,2,0,"span",36),e._uU(3),e.qZA()),2&o){const t=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)==(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)!=(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.hij(" ",null==t?null:t.totalPrice,"")}}function oo(o,s){if(1&o&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.totalCbm,"")}}function io(o,s){if(1&o&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.totalCartons,"")}}function no(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1,"Shipping Address"),e.qZA())}function so(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1," Origin Port"),e.qZA())}function ro(o,s){1&o&&(e.TgZ(0,"label"),e._uU(1," Destination Port"),e.qZA())}function ao(o,s){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,no,2,0,"label",36),e.YNc(2,so,2,0,"label",36),e.YNc(3,ro,2,0,"label",36),e._UZ(4,"input",54),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","DDU"===(null==t.quoteDetail?null:t.quoteDetail.shippingTerms)||"DDP"===(null==t.quoteDetail?null:t.quoteDetail.shippingTerms)||"Delivered"===(null==t.quoteDetail?null:t.quoteDetail.shippingTerms)),e.xp6(1),e.Q6J("ngIf","FOB"===(null==t.quoteDetail?null:t.quoteDetail.shippingTerms)),e.xp6(1),e.Q6J("ngIf","CIF"===(null==t.quoteDetail?null:t.quoteDetail.shippingTerms)),e.xp6(1),e.s9C("placeholder",null==t.quoteDetail?null:t.quoteDetail.shippingAddress)}}function lo(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.quoteDetail||null==t.quoteDetail.vendor?null:t.quoteDetail.vendor.currency)}}function uo(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function co(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.quoteDetail||null==t.quoteDetail.vendor?null:t.quoteDetail.vendor.currency)}}function po(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function mo(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",8),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e.YNc(4,co,2,1,"span",36),e.YNc(5,po,2,0,"span",36),e._uU(6),e.qZA()()),2&o){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(2),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)==(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==n.quoteDetail||null==n.quoteDetail.vendor?null:n.quoteDetail.vendor.currency)!=(null==n.quoteDetail||null==n.quoteDetail.customer?null:n.quoteDetail.customer.currency)),e.xp6(1),e.hij(" ",null==t?null:t.cost,"")}}const go=[{path:"",component:W},{path:"detail",component:(()=>{class o{constructor(t,n,i,r){this.routes=t,this.ngxService=n,this.QS=i,this._notify=r,this.totalOneTimeCostNum=0,this.moment=d(),this.productArtworks=[],this.productAttachments=[],this.selectedImage=0}ngOnInit(){this.routes.queryParams.subscribe(t=>{t&&t.quoteId&&(this.quoteId=t.quoteId,this.getDetail()),t&&t.leadId&&(this.quoteId=t.leadId,this.quoteDraft())}),$("#carouselExampleControls").on("slide.bs.carousel",t=>{this.selectedImage=t.to})}getDetail(){this.ngxService.start(),this.QS.quoteDetail(this.quoteId).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.quoteDetail=t?.data,this.quoteDetail?.customerProduct?.productArtworks.map(n=>{let i=n.split("/"),r=this.getFileType(i[i.length-1]);delete r.type,this.productArtworks.push({url:n,name:i[i.length-1],...r})}),this.quoteDetail?.customerProduct?.productAttachments.map(n=>{let i=n.split("/"),r=this.getFileType(i[i.length-1]);delete r.type,this.productAttachments.push({url:n,name:i[i.length-1],...r})})):this._notify.showError(t.meta.msg,"Error")})}quoteDraft(){this.ngxService.start(),this.QS.quoteDraft(this.quoteId).pipe((0,c.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.quoteDetail=t?.data,this.quoteDetail?.customerProduct?.productArtworks.map(n=>{let i=n.split("/"),r=this.getFileType(i[i.length-1]);delete r.type,this.productArtworks.push({url:n,name:i[i.length-1],...r})}),this.quoteDetail?.customerProduct?.productAttachments.map(n=>{let i=n.split("/"),r=this.getFileType(i[i.length-1]);delete r.type,this.productAttachments.push({url:n,name:i[i.length-1],...r})})):this._notify.showError(t.meta.msg,"Error")})}downloadImage(t){return(0,Q.Z)(function*(){const i=yield(yield fetch(`${t}?pactap=1`)).blob(),r=t.substring(t.lastIndexOf("/")+1),a=document.createElement("a"),p=window.URL.createObjectURL(i);a.href=p,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)})()}getFileType(t){const n=t.lastIndexOf(".");if(-1===n)return"File name has no extension";switch(t.substring(n+1).toLowerCase()){case"jpg":case"jpeg":case"png":return{type:"Image file",isImage:!0};case"pdf":return{type:"PDF file",isPdf:!0};case"doc":case"docx":return{type:"Word document",isWord:!0};case"txt":return{type:"Text file",isText:!0};case"ai":return{type:"Adobe Illustrator file",isIllustrator:!0};case"cdr":return{type:"CorelDRAW file",isCorelDraw:!0};case"xls":return{type:"Excel spreadsheet",isExcel:!0};case"csv":return{type:"CSV file",isExcel:!0};default:return"Unknown file type"}}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(h.gz),e.Y36(_.LA),e.Y36(q.P),e.Y36(v.c))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-quotaion-details"]],decls:193,vars:40,consts:[["id","print-section",1,"dashboardMain"],[1,"bg-white","white-well"],[1,"row"],[1,"col-7","col-sm-6","col-md-6","col-lg-7"],[1,"page-header","back-page","border-0","mb-2"],[1,"mb-0","ps-5"],["href","javascript:history.back()",1,"back-arrow"],["src","assets/images/back-arrow.png"],[1,"text-success"],[1,"profile-info"],[1,"col-5","col-sm-6","col-md-6","col-lg-5","text-end","printPageButton"],[1,"column-btns","d-grid","align-items-center","justify-content-end"],["class","form-box form-filter",4,"ngIf"],[1,"dropdown","form-box","form-filter"],[1,"form-group"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-submit","btn-outline-success",3,"useExistingCss"],["src","assets/images/download.png","alt","",1,"me-2"],[1,"col-12","col-sm-4","col-md-4","col-lg-4"],[1,"quotations-script","bg-success-light"],[1,"mb-0","text-white"],[1,"product-item","p-0","quotations-product-item","mb-0"],[1,"col-12","col-sm-7","col-md-8","col-lg-8","col-xl-8"],[1,"productDetailsPage"],[1,""],[1,"table-reponsive"],[1,"tableBorder"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"col-12","col-sm-5","col-md-4","col-lg-4","col-xl-4"],[1,"product-body"],[1,"mb-2"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide","mb-3"],["class","carousel-inner",4,"ngIf"],["class","carousel-control-prev printPageButton","type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",4,"ngIf"],["class","carousel-control-next printPageButton","type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",4,"ngIf"],["href","javascript:void(0)","class","downloadButton printPageButton",3,"click",4,"ngIf"],[4,"ngIf"],[1,"text-success","d-sm-inline-block","ms-3"],[1,"table-card"],[1,"table","table-bordered","table-lg"],[1,"table-success","text-white"],["class","text-center",4,"ngFor","ngForOf"],[1,"table-info"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"form-box"],[1,"formflex","justify-content-between"],[1,"col-md-12","col-12","d-flex","justify-content-start","gap-4","align-items-start"],["type","text","readonly","",1,"form-control","form-ctrl","greenborder",3,"value"],[1,"col-md-6","col-12"],[1,"d-inline-block"],[1,"text-success","fw300"],[1,"col-md-4","col-4"],["type","text","readonly","",1,"form-control","form-ctrl","greenborder","text-center",3,"placeholder"],[1,"col-md-3","col-4"],["type","text","readonly","",1,"form-control","form-ctrl","greenborder",3,"placeholder"],[1,"col-md-12","col-12","d-flex","justify-content-start","gap-4"],[1,"row","w-100"],[1,"col-md-2","col-12"],[1,"calendarInput"],["type","text","readonly","",1,"form-control","form-ctrl","datePicker","greenborder",3,"value"],[1,"formIconsinner"],[1,"bi","bi-calendar-week"],["class","form-group",4,"ngIf"],[1,"col-12","col-sm-5","col-md-5","col-lg-5"],[1,"col-12","col-sm-7","col-md-7","col-lg-7"],["fgsColor","#3E916C",3,"hasProgressBar"],[1,"form-box","form-filter"],["href","javascript:void(0)",1,"btn","btn-sumbit","btn-outline-success",3,"routerLink"],["class","text-center",4,"ngIf"],[1,"d-flex","justify-content-between"],["for","lowerLimit",1,"mb-2"],[1,"inputPercentage"],["style","bottom: 0px;",4,"ngIf"],["for","upperLimit",1,"mb-2"],[2,"bottom","0px"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"carousel-item",3,"ngClass"],["alt","...",1,"d-block","w-100",3,"src"],[1,"carousel-item","active"],["src","assets/images/no-img.png","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev","printPageButton"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next","printPageButton"],["aria-hidden","true",1,"carousel-control-next-icon"],["href","javascript:void(0)",1,"downloadButton","printPageButton",3,"click"],[1,"bi","bi-box-arrow-in-down"],[1,"product-body","printPageButton"],[1,"mb-2","mt-4"],[1,"form-group","printPageButton"],["class","form-check-inline text-center",4,"ngFor","ngForOf"],[1,"form-check-inline","text-center"],[1,"alert-photo"],[1,"alert-photo-img"],[3,"src","alt",4,"ngIf"],["src","assets/images/cdr.png",3,"alt",4,"ngIf"],["src","assets/images/pdf.png",3,"alt",4,"ngIf"],["src","assets/images/excel.png",3,"alt",4,"ngIf"],["src","assets/images/xls.png",3,"alt",4,"ngIf"],["src","assets/images/illustrator.png",3,"alt",4,"ngIf"],["href","javascript:void(0)",1,"downloadButton",3,"click"],[3,"src","alt"],["src","assets/images/cdr.png",3,"alt"],["src","assets/images/pdf.png",3,"alt"],["src","assets/images/excel.png",3,"alt"],["src","assets/images/xls.png",3,"alt"],["src","assets/images/illustrator.png",3,"alt"],[1,"product-body","mt-4","printPageButton"],[1,"small"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"a",6),e._UZ(7,"img",7),e.qZA(),e._uU(8," Quote "),e.TgZ(9,"span",8),e._uU(10),e.qZA()()(),e.TgZ(11,"div",9)(12,"h6",8),e._uU(13),e.qZA(),e.TgZ(14,"h6",8),e._uU(15),e.qZA(),e.TgZ(16,"h6",8),e._uU(17),e.qZA(),e.TgZ(18,"h6",8),e._uU(19),e.qZA()()(),e.TgZ(20,"div",10)(21,"div",11),e.YNc(22,vt,4,3,"div",12),e.TgZ(23,"div",13)(24,"div",14)(25,"button",15),e._UZ(26,"img",16),e._uU(27," Export as PDF "),e.qZA()()()()()()(),e.TgZ(28,"div",1)(29,"div",2)(30,"div",17)(31,"div",18)(32,"h4",19),e._uU(33,"Product Details"),e.qZA()()()(),e.TgZ(34,"div",20)(35,"div",2)(36,"div",21)(37,"div",22)(38,"div",23)(39,"div",24)(40,"div",25)(41,"table",23)(42,"thead")(43,"tr",23)(44,"th"),e._uU(45,"Details"),e.qZA(),e.TgZ(46,"th",26),e._uU(47,"Measurements"),e.qZA(),e.TgZ(48,"th",26),e._uU(49,"Tolerances"),e.qZA()()(),e.TgZ(50,"tbody"),e.YNc(51,Dt,7,4,"tr",27),e.qZA()()()()()()(),e.TgZ(52,"div",28)(53,"div",29)(54,"h6",30),e._uU(55,"Product Images:"),e.qZA()(),e.TgZ(56,"div")(57,"div",31),e.YNc(58,At,2,1,"div",32),e.YNc(59,Pt,3,0,"div",32),e.YNc(60,Qt,4,0,"button",33),e.YNc(61,wt,4,0,"button",34),e.qZA(),e.YNc(62,Ft,3,0,"a",35),e.qZA(),e.YNc(63,Ot,6,1,"ng-container",36),e.YNc(64,Bt,6,1,"ng-container",36),e.qZA()()()(),e.TgZ(65,"div",1)(66,"div",18)(67,"h4",19),e._uU(68,"Quotations"),e.qZA()(),e.TgZ(69,"p",37),e._uU(70),e.qZA(),e.TgZ(71,"div",38)(72,"div",24)(73,"table",39)(74,"thead")(75,"tr",40)(76,"td"),e._uU(77,"Quantity"),e.qZA(),e.YNc(78,$t,5,2,"td",41),e.qZA()(),e.TgZ(79,"tbody")(80,"tr")(81,"td",8),e._uU(82,"Prod. Lead Time (In Days):"),e.qZA(),e.YNc(83,Kt,2,1,"td",41),e.qZA(),e.TgZ(84,"tr")(85,"td",8),e._uU(86,"Price Per Piece:"),e.qZA(),e.YNc(87,Xt,4,3,"td",41),e.qZA(),e.TgZ(88,"tr",42)(89,"td",8),e._uU(90,"Grand Total Price:"),e.qZA(),e.YNc(91,to,4,3,"td",41),e.qZA(),e.TgZ(92,"tr")(93,"td",8),e._uU(94,"Total CBM:"),e.qZA(),e.YNc(95,oo,2,1,"td",41),e.qZA(),e.TgZ(96,"tr")(97,"td",8),e._uU(98,"Total Cartons:"),e.qZA(),e.YNc(99,io,2,1,"td",41),e.qZA()()()()()(),e.TgZ(100,"div",2)(101,"div",43)(102,"div",1)(103,"div",18)(104,"h4",19),e._uU(105,"Packaging Details"),e.qZA()(),e.TgZ(106,"div",44)(107,"div",45)(108,"div",2)(109,"div",46)(110,"div",14)(111,"label"),e._uU(112,"Case Pack"),e.qZA(),e._UZ(113,"input",47),e.qZA(),e.TgZ(114,"div",14)(115,"div",2)(116,"div",48)(117,"div",2)(118,"label",49),e._uU(119,"Carton Dimensions "),e.TgZ(120,"span",50),e._uU(121,"(in Inches)"),e.qZA()(),e.TgZ(122,"div",51),e._UZ(123,"input",52),e.qZA(),e.TgZ(124,"div",51),e._UZ(125,"input",52),e.qZA(),e.TgZ(126,"div",51),e._UZ(127,"input",52),e.qZA()()(),e.TgZ(128,"div",53)(129,"div",14)(130,"label"),e._uU(131,"Gross Weight "),e.TgZ(132,"span",50),e._uU(133,"(per case in kg)"),e.qZA()(),e._UZ(134,"input",54),e.qZA()()()()(),e.TgZ(135,"div",55)(136,"div",56)(137,"div",57)(138,"div",14)(139,"label"),e._uU(140,"Valid Upto"),e.qZA(),e.TgZ(141,"div",58),e._UZ(142,"input",59),e.ALo(143,"date"),e.TgZ(144,"span",60),e._UZ(145,"i",61),e.qZA()()()(),e.TgZ(146,"div",48),e.YNc(147,ao,5,4,"div",62),e.qZA()()()()()()()()(),e.TgZ(148,"div",2)(149,"div",63)(150,"div",1)(151,"div",18)(152,"h4",19),e._uU(153,"Pre Production Sample"),e.qZA()(),e.TgZ(154,"div",38)(155,"div",24)(156,"table",39)(157,"thead")(158,"tr",40)(159,"td"),e._uU(160,"PPS Quantity"),e.qZA(),e.TgZ(161,"td",26),e._uU(162),e.qZA()()(),e.TgZ(163,"tbody")(164,"tr")(165,"td",8),e._uU(166,"Prod. Lead Time (In Days):"),e.qZA(),e.TgZ(167,"td",26),e._uU(168),e.qZA()(),e.TgZ(169,"tr")(170,"td",8),e._uU(171,"Grand Total Price:"),e.qZA(),e.TgZ(172,"td",26),e.YNc(173,lo,2,1,"span",36),e.YNc(174,uo,2,0,"span",36),e._uU(175),e.qZA()()()()()()()(),e.TgZ(176,"div",64)(177,"div",1)(178,"div",18)(179,"h4",19),e._uU(180,"One Time Cost"),e.qZA()(),e.TgZ(181,"div",38)(182,"div",24)(183,"table",39)(184,"thead")(185,"tr",40)(186,"td"),e._uU(187,"One Time Cost"),e.qZA(),e.TgZ(188,"td",26),e._uU(189,"Cost"),e.qZA()()(),e.TgZ(190,"tbody"),e.YNc(191,mo,7,4,"tr",27),e.qZA()()()()()()()(),e._UZ(192,"ngx-ui-loader",65)),2&n&&(e.xp6(10),e.hij("(",null==i.quoteDetail||null==i.quoteDetail.product?null:i.quoteDetail.product.productName,")"),e.xp6(3),e.hij("Product ID : ",null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.customerProductId,""),e.xp6(2),e.AsE("Customer ID : ",null==i.quoteDetail||null==i.quoteDetail.customerLogin?null:i.quoteDetail.customerLogin.customerId," (",null==i.quoteDetail||null==i.quoteDetail.customer||null==i.quoteDetail.customer.countryObj?null:i.quoteDetail.customer.countryObj.name,")"),e.xp6(2),e.AsE(" Vendor ID : ",null==i.quoteDetail||null==i.quoteDetail.vendor?null:i.quoteDetail.vendor.vendorId,"(",null==i.quoteDetail||null==i.quoteDetail.factory?null:i.quoteDetail.factory.cityName,") "),e.xp6(2),e.hij(" Quote ID : ",null==i.quoteDetail?null:i.quoteDetail.quoteId,""),e.xp6(3),e.Q6J("ngIf",(null==i.quoteDetail?null:i.quoteDetail.isRequote)&&(null==i.quoteDetail?null:i.quoteDetail.previousQuoteId)),e.xp6(3),e.Q6J("useExistingCss",!0),e.xp6(26),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.productTolerance),e.xp6(7),e.Q6J("ngIf",0!=(null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.productImages.length)),e.xp6(1),e.Q6J("ngIf",0==(null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.productImages.length)),e.xp6(1),e.Q6J("ngIf",(null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.productImages.length)>1),e.xp6(1),e.Q6J("ngIf",(null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.productImages.length)>1),e.xp6(1),e.Q6J("ngIf",0!=(null==i.quoteDetail||null==i.quoteDetail.customerProducts?null:i.quoteDetail.customerProducts.productImages.length)),e.xp6(1),e.Q6J("ngIf",i.productArtworks.length),e.xp6(1),e.Q6J("ngIf",i.productAttachments.length),e.xp6(6),e.hij("* The Prices quoted are ",null==i.quoteDetail?null:i.quoteDetail.shippingTerms,""),e.xp6(8),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(5),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(4),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(4),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(4),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(4),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.quotation),e.xp6(14),e.s9C("value",null==i.quoteDetail?null:i.quoteDetail.casePack),e.xp6(10),e.MGl("placeholder","L: ",null==i.quoteDetail?null:i.quoteDetail.dimension.length,""),e.xp6(2),e.MGl("placeholder","B: ",null==i.quoteDetail?null:i.quoteDetail.dimension.breadth,""),e.xp6(2),e.MGl("placeholder","H: ",null==i.quoteDetail?null:i.quoteDetail.dimension.height,""),e.xp6(7),e.MGl("placeholder","",null==i.quoteDetail?null:i.quoteDetail.grossWeight," Kg"),e.xp6(8),e.s9C("value",e.lcZ(143,38,null==i.quoteDetail?null:i.quoteDetail.validUpto)),e.xp6(5),e.Q6J("ngIf","Ex-Factory"!==(null==i.quoteDetail?null:i.quoteDetail.shippingTerms)),e.xp6(15),e.Oqu((null==i.quoteDetail?null:i.quoteDetail.prePurchaseSampleQuantity)||"--"),e.xp6(6),e.hij("",(null==i.quoteDetail?null:i.quoteDetail.prePurchaseSampleProductionLeadTime)||"--"," Days "),e.xp6(5),e.Q6J("ngIf",(null==i.quoteDetail||null==i.quoteDetail.vendor?null:i.quoteDetail.vendor.currency)==(null==i.quoteDetail||null==i.quoteDetail.customer?null:i.quoteDetail.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==i.quoteDetail||null==i.quoteDetail.vendor?null:i.quoteDetail.vendor.currency)!=(null==i.quoteDetail||null==i.quoteDetail.customer?null:i.quoteDetail.customer.currency)),e.xp6(1),e.hij(" ",(null==i.quoteDetail?null:i.quoteDetail.prePurchaseSampleTotalPrice)||"--",""),e.xp6(16),e.Q6J("ngForOf",null==i.quoteDetail?null:i.quoteDetail.oneTimeCost),e.xp6(1),e.Q6J("hasProgressBar",!1))},dependencies:[_.Eo,h.rH,m.mk,m.sg,m.O5,C.IH,m.uU],styles:["@media print{.printPageButton[_ngcontent-%COMP%]{display:none}}.column-btns[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #0000000d;color:#fff;padding:10px 20px;font-size:14px}"]})}return o})()},{path:"re-quote/:id",component:ft}];let ho=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(go),h.Bz]})}return o})(),_o=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[_.Js,ho,m.ez,l.UX,l.u5,C.K8,y.Rq]})}return o})()}}]);
"use strict";(self.webpackChunkpactap_vendor=self.webpackChunkpactap_vendor||[]).push([[365],{89365:(Vt,w,m)=>{m.r(w),m.d(w,{LeadsModule:()=>Et});var _=m(96814),v=m(72253),g=m(64716),T=m(16676),k=m(78645),U=m(83620),S=m(93997),e=m(99468),x=m(63049),Q=m(61379),Z=m(29917),F=m(4213),I=m(43902),A=m(21355),L=m(14173),q=m(50458),u=m(56223),P=m(64686);function J(i,r){1&i&&(e.TgZ(0,"span",58),e._UZ(1,"img",59),e.qZA())}function D(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",60)(2,"input",61),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.show=o)})("change",function(o){const s=e.CHM(t).index,a=e.oxw();return e.KtG(a.hideShowCol(o,s))}),e.qZA(),e.TgZ(3,"label",62),e._uU(4),e.qZA()()()}if(2&i){const t=r.$implicit,n=r.index;e.xp6(2),e.MGl("id","col",n,""),e.Q6J("ngModel",t.show),e.xp6(1),e.MGl("for","col",n,""),e.xp6(1),e.hij(" ",t.column," ")}}function O(i,r){if(1&i&&(e.TgZ(0,"option",63),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.hij(" ",null==t||null==t.adminProduct?null:t.adminProduct.productName,"")}}function Y(i,r){if(1&i&&(e.TgZ(0,"option",63),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.hij("",null==t?null:t.name," ")}}function M(i,r){1&i&&(e.TgZ(0,"div",64),e._uU(1,"Lead not found "),e.qZA())}function j(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,",\xa0"),e.qZA())}function W(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,j,2,0,"span",81),e.BQk()),2&i){const t=r.$implicit,n=r.index,o=r.last;e.xp6(2),e.AsE("",t.label,": ",t.value,""),e.xp6(1),e.Q6J("ngIf",n>=0&&!o)}}function E(i,r){if(1&i&&(e.TgZ(0,"li")(1,"strong",54),e._uU(2,"Specification: \xa0"),e.qZA(),e._UZ(3,"br"),e.YNc(4,W,4,3,"ng-container",56),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngForOf",null==t?null:t.enabledContents)}}function V(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",76)(1,"div",77)(2,"div",78),e._UZ(3,"img",79),e.qZA(),e.TgZ(4,"div",80)(5,"ul")(6,"li"),e._uU(7),e.qZA(),e.TgZ(8,"li")(9,"strong",54),e._uU(10,"Product ID:"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"li")(14,"strong",54),e._uU(15,"Product: "),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"li")(19,"strong",54),e._uU(20,"Quantity Range:"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.qZA()(),e.YNc(23,E,5,1,"li",81),e.qZA(),e.TgZ(24,"div",3)(25,"button",82),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.continueToQuote(null==l?null:l._id))}),e._uU(26),e.qZA()()()()()}if(2&i){const t=r.$implicit;e.xp6(3),e.Q6J("src",null==t||null==t.product?null:t.product.productImg[0],e.LSH),e.xp6(4),e.hij(" ",null==t||null==t.product?null:t.product.productName," "),e.xp6(5),e.Oqu(null==t||null==t.product?null:t.product.productId),e.xp6(5),e.Oqu(null==t||null==t.product?null:t.product.productName),e.xp6(5),e.AsE(" ",(null==t||null==t.minMaxQuant?null:t.minMaxQuant.min)||0," to ",(null==t||null==t.minMaxQuant?null:t.minMaxQuant.max)||0," "),e.xp6(1),e.Q6J("ngIf",null==t?null:t.enabledContents.length),e.xp6(3),e.hij(" ",(null==t?null:t.status)||"Quote Now"," ")}}function B(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"div",67)(2,"div",22)(3,"div",68)(4,"div",69)(5,"h1"),e._uU(6),e.qZA(),e.TgZ(7,"h2"),e._uU(8,"Customer ID: "),e.TgZ(9,"span",70),e._uU(10),e.qZA()(),e.TgZ(11,"div",3)(12,"a",71),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",72)(15,"div",73)(16,"div",74),e.YNc(17,V,27,8,"div",75),e.qZA()()()()()()),2&i){const t=r.$implicit;e.xp6(6),e.AsE("",null==t||null==t.customer?null:t.customer.firstName[0],"",null==t||null==t.customer?null:t.customer.lastName[0]," "),e.xp6(4),e.Oqu(null==t||null==t.customerLogin?null:t.customerLogin.customerId),e.xp6(3),e.hij("",null==t||null==t.leads?null:t.leads.length," Product Shared "),e.xp6(4),e.Q6J("ngForOf",null==t?null:t.sliderProduct)}}function K(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",65),e.NdJ("scrolled",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onScrollDown(o))}),e.YNc(1,B,18,5,"div",66),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300),e.xp6(1),e.Q6J("ngForOf",t.leads)}}const y=function(i){return{colHide:i}};function G(i,r){if(1&i&&(e.TgZ(0,"th",86),e._uU(1),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.Tol("col"+n),e.Q6J("ngClass",e.VKq(4,y,!o.columns[n].show)),e.xp6(1),e.hij(" ",t.column,"")}}function H(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.label,": ",t.value,"")}}function R(i,r){if(1&i&&(e.ynx(0),e.YNc(1,H,2,2,"span",81),e.BQk()),2&i){const t=r.index;e.xp6(1),e.Q6J("ngIf",0===t)}}const z=function(i){return["/leads/details",i]};function X(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",87)(2,"a",88),e._uU(3),e.qZA(),e._UZ(4,"br"),e._uU(5),e.qZA(),e.TgZ(6,"td",89)(7,"a",90),e._uU(8),e.qZA(),e._UZ(9,"br"),e._uU(10),e.qZA(),e.TgZ(11,"td",91),e._uU(12),e.ALo(13,"date"),e._UZ(14,"br"),e.TgZ(15,"a",92),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.viewQuoteTimeLine(l))}),e._uU(16,"View More"),e.qZA()(),e.TgZ(17,"td",93),e.YNc(18,R,2,1,"ng-container",56),e.TgZ(19,"a",92),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.viewSpecifications(null==l?null:l.enabledContents))}),e._uU(20," View More "),e.qZA()(),e.TgZ(21,"td",94),e._uU(22),e.qZA(),e.TgZ(23,"td",95)(24,"a",96),e._uU(25),e.qZA()(),e.TgZ(26,"td")(27,"div",97),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.continueToQuote(l))}),e._uU(28," View"),e.qZA(),e._UZ(29,"a",98),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(21,y,!n.columns[0].show)),e.xp6(1),e.Q6J("routerLink",e.VKq(23,z,t._id)),e.xp6(1),e.hij(" ",null==t||null==t.customerLogin?null:t.customerLogin.customerId," "),e.xp6(2),e.hij(" ",null==t||null==t.customer?null:t.customer.countryObj.name," "),e.xp6(1),e.Q6J("ngClass",e.VKq(25,y,!n.columns[1].show)),e.xp6(2),e.hij("ID: ",null==t||null==t.customerProducts?null:t.customerProducts.customerProductId,""),e.xp6(2),e.hij(" Type: ",null==t||null==t.product?null:t.product.productName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(27,y,!n.columns[2].show)),e.xp6(1),e.hij(" Shared On: ",e.xi3(13,18,null==t?null:t.createdAt,"dd/MM/YYYY"),""),e.xp6(5),e.Q6J("ngClass",e.VKq(29,y,!n.columns[3].show)),e.xp6(1),e.Q6J("ngForOf",null==t?null:t.enabledContents),e.xp6(3),e.Q6J("ngClass",e.VKq(31,y,!n.columns[4].show)),e.xp6(1),e.lnq(" ",t.minMaxQuant.min||"-"," ",t.minMaxQuant.max?"to":""," ",t.minMaxQuant.max," "),e.xp6(1),e.Q6J("ngClass",e.VKq(33,y,!n.columns[5].show)),e.xp6(1),e.Q6J("ngClass","QUOTED"===(null==t?null:t.status)?"btn-success":"REQUOTED"===(null==t?null:t.status)?"btn-primary":"btn-warning"),e.xp6(1),e.hij("",(null==t?null:t.status)||"Quote Now"," ")}}function ee(i,r){1&i&&(e.TgZ(0,"div",64),e._uU(1,"Lead not found "),e.qZA())}function te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",84),e.NdJ("scrolled",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onScrollDown(o))}),e.TgZ(2,"table",53)(3,"thead")(4,"tr"),e.YNc(5,G,2,6,"th",85),e.TgZ(6,"th"),e._uU(7,"\xa0"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,X,30,35,"tr",56),e.qZA()(),e.YNc(10,ee,2,0,"div",44),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),e.xp6(4),e.Q6J("ngForOf",t.columns),e.xp6(4),e.Q6J("ngForOf",t.leads),e.xp6(1),e.Q6J("ngIf",(null==t.leads?null:t.leads.length)<1)}}function oe(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td",54),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij("",null==t?null:t.label," "),e.xp6(2),e.Oqu(null==t?null:t.value)}}const ie=function(i){return{"fa-spin fa-spinner":i}};let ne=(()=>{class i{constructor(t,n,o,l,s,a,c,d,p){this.LS=t,this.FS=n,this.ngxService=o,this.WS=l,this.router=s,this.CS=a,this.PS=c,this.HS=d,this._notifier=p,this.factoryWarehouseSelectedId=null,this.factoryWarehouseSelectedType="",this.selectedLeadId="",this.selectedProductId="",this.viewType="list",this.searchKey="",this.categoryId="",this.productId="",this.countryId="",this.leadStatus="",this.moment=T(),this.isLoading=!1,this.searchKeySubject=new k.x,this.page=1,this.contentPerPage=10,this.columns=[{column:"Customer Details",show:!0,key:"customer.companyName"},{column:"Product Details",show:!0,key:"product.productName"},{column:"Timeline",show:!0,key:"createdAt"},{column:"Specifications",show:!0,key:"specifications"},{column:"Quantity",show:!0,key:"quantity"},{column:"Status",show:!0,key:"status"}],this.totalPage=0}ngOnInit(){this.getLeadsData(),this.getProducts(),this.countryList(),this.searchKeySubject.pipe((0,U.b)(400),(0,S.x)()).subscribe(t=>{this.getLeadsData()})}hideShowCol(t,n){n&&1!==n&&5!==n?t.target.checked?$(`.col${n}`).removeClass("colHide"):$(`.col${n}`).addClass("colHide"):(this.columns[n].show=!0,$(`#col${n}`).prop("checked",!0))}exportDetails(){this.isLoading=!0;let t=JSON.parse(JSON.stringify(this.columns));t.map((o,l,s)=>{"Customer Details"===o.column&&o.show&&"Customer ID"!==s[0].column&&s.splice(l,0,{column:"Customer ID",show:!0,key:"customerLogin.customerId"}),"Timeline"===o.column&&o.show&&"Quoted On"!==s[l-1].column&&s.splice(l,1,{column:"Quoted On",show:!0,key:"quotedAt"}),"Quantity"===o.column&&o.show&&"Minimum Quantity"!==s[l-1].column&&s.splice(l,1,{column:"Minimum Quantity",show:!0,key:"minQuantity"},{column:"Maximum Quantity",show:!0,key:"maxQuantity"}),"Product Detail"===o.column&&o.show&&"Category Name"!==s[l-1].column&&s.splice(l,0,{column:"Product ID",show:!0,key:"product.productId"},{column:"Category Name",show:!0,key:"category.categoryName"})}),this.LS.exportLeadsDetails({searchKey:this.searchKey,categoryId:this.categoryId,originCountryId:this.countryId,productId:this.productId,startDate:this.fromDate||"",endDate:this.toDate||"",view:this.viewType,isExcelDownload:!0,columnPermission:t}).subscribe(o=>{this.isLoading=!1;const l=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(l),a=document.createElement("a");a.href=s,a.download="product.xlsx",a.click(),window.URL.revokeObjectURL(s),a.remove(),this._notifier.showSuccess("File downloaded successfully","Success"),o.meta.status||this._notifier.showWarning(o.meta.msg,"")},o=>{this._notifier.showError("Something Went Wrong","Error"),this.isLoading=!1})}getSpecifications(){let t=[];this.leads.map(n=>(n?.product?.productForm.map(o=>{t.push({column:o?.label,show:!0,key:`customerProducts.productForm.${o?.key}`})}),t))}countryList(){this.HS.getCountries().pipe((0,g.x)(()=>{})).subscribe(t=>{this.countries=t.meta.status?t.data:[]})}getProducts(){this.PS.getProducts().pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{this.myProducts=t?.meta?.status?t.data:[]})}ngAfterViewInit(){$(".item i").on("click",function(){$(this).toggleClass("fa-plus fa-minus").next().slideToggle()}),$(".view i").click(function(){$(".prod").removeClass("grid-view list-view").addClass($(this).data("view"))}),$(".view i").click(function(){$(this).addClass("selected").siblings().removeClass("selected")}),setTimeout(()=>{this.carouselInit()},200)}initDateRangePicker(){$(".daterangePickerLeads").dateRangePicker({format:"DD-MM-YYYY",autoClose:!0}).on("datepicker-change",(t,n)=>{this.fromDate=T(n.date1).valueOf(),this.toDate=T(n.date2).valueOf(),this.getLeadsData()})}carouselInit(){let t=document.querySelectorAll(".carousel .carousel-item");t.forEach(n=>{let l=n.nextElementSibling;for(var s=1;s<3;s++){l||(l=t[0]);let a=l.cloneNode(!0);n.appendChild(a.children[0]),l=l.nextElementSibling}})}gridView(t){this.viewType=t,this.page=1,this.leads=[],this.getLeadsData()}searchLeads(t){this.searchKey=t.target.value,this.getLeadsData()}filterByProduct(t){this.productId=t.target.value,this.getLeadsData()}filterByCountry(t){this.countryId=t.target.value,this.getLeadsData()}addQueryParams(){return{searchKey:this.searchKey,categoryId:this.categoryId,originCountryId:this.countryId,productId:this.productId,startDate:this.fromDate||"",endDate:this.toDate||"",view:this.viewType,status:this.leadStatus}}filterByStatus(t){this.leadStatus=t?.target?.value,this.getLeadsData()}onScrollDown(t){this.page<this.totalPage&&(this.page+=1,this.getLeadsData(!0))}getLeadsData(t){this.ngxService.start(),this.LS.leadsList(this.addQueryParams(),this.page,this.contentPerPage).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(n=>{n?.meta?.status?(this.leads=t?[...this.leads,...n.data]:n.data,this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),"list"!=this.viewType?(this.leads.map(o=>{let l=[];o.leads.map(s=>{s.enabledContents=[],s.product?.productForm?.map(c=>{if("panel"===c.type)c.components.map(d=>{if(d.enabled)if("object"==typeof s.customerProducts?.productForm?.[d.key])if("custom-selectboxes"===d.type){let p=[];d.values.map(f=>{s.customerProducts?.productForm[d.key][f.value]&&p.push(f.label)}),s.enabledContents.push({label:d.label,value:`${p.join(", ")}`})}else s.enabledContents.push({label:d.label,value:`${s.customerProducts?.productForm?.[d.key].value} ${s.customerProducts?.productForm?.[d.key].unit}`});else if("custom-select"===d.type){let p="";d.data.values.map(f=>{s.customerProducts?.productForm[d.key]===f.value&&(p=f.label)}),s.enabledContents.push({label:d.label,value:`${p}`})}else s.enabledContents.push({label:d.label,value:s.customerProducts?.productForm?.[d.key]})});else if("columns"===c.type)c.columns.map(d=>{d.components.map(p=>{if(p.enabled)if("object"==typeof s.customerProducts?.productForm?.[p.key])if("custom-selectboxes"===p.type){let f=[];p.values.map(C=>{s.customerProducts?.productForm[p.key][C.value]&&f.push(C.label)}),s.enabledContents.push({label:p.label,value:`${f.join(", ")}`})}else s.enabledContents.push({label:p.label,value:`${s.customerProducts?.productForm?.[p.key].value} ${s.customerProducts?.productForm?.[p.key].unit}`});else if("custom-select"===p.type){let f="";p.data.values.map(C=>{s.customerProducts?.productForm[p.key]===C.value&&(f=C.label)}),s.enabledContents.push({label:p.label,value:`${f}`})}else s.enabledContents.push({label:p.label,value:s.customerProducts?.productForm?.[p.key]})})});else if(c.enabled)if("object"==typeof s.customerProducts?.productForm[c.key])if("custom-selectboxes"===c.type){let d=[];c.values.map(p=>{s.customerProducts?.productForm[c.key][p.value]&&d.push(p.label)}),s.enabledContents.push({label:c.label,value:`${d.join(", ")}`})}else s.enabledContents.push({label:c.label,value:`${s.customerProducts?.productForm[c.key].value} ${s.customerProducts?.productForm[c.key].unit}`});else if("custom-select"===c.type){let d="";c.data.values.map(p=>{s.customerProducts?.productForm[c.key]===p.value&&(d=p.label)}),s.enabledContents.push({label:c.label,value:`${d}`})}else s.enabledContents.push({label:c.label,value:s.customerProducts?.productForm?.[c.key]})});let a=s.customerProducts?.quantities?this.findMinMax(s.customerProducts?.quantities):{max:0,min:0};s.minMaxQuant=a,l.push(s)}),o.sliderProduct=l}),this.initializeCarousel()):this.leads.map(o=>{let l=this.findMinMax(o.customerProducts?.quantities);o.minMaxQuant=l,o.specifications=[],o.product?.productForm?.map(s=>{o.specifications.push({label:s.label,value:`${o?.customerProducts?.productForm?.[s.key]}`})})}),this.leads?.map(o=>{o.enabledContents=[],o.product?.productForm?.map(l=>{if("panel"===l.type)l.components.map(s=>{if(s.enabled)if("object"==typeof o.customerProducts?.productForm?.[s.key])if("custom-selectboxes"===s.type){let a=[];s.values.map(c=>{o.customerProducts?.productForm[s.key][c.value]&&a.push(c.label)}),o.enabledContents.push({label:s.label,value:`${a.join(", ")}`})}else o.enabledContents.push({label:s.label,value:`${o.customerProducts?.productForm?.[s.key].value} ${o.customerProducts?.productForm?.[s.key].unit}`});else if("custom-select"===s.type){let a="";s.data.values.map(c=>{o.customerProducts?.productForm[s.key]===c.value&&(a=c.label)}),o.enabledContents.push({label:s.label,value:`${a}`})}else o.enabledContents.push({label:s.label,value:o.customerProducts?.productForm?.[s.key]})});else if("columns"===l.type)l.columns.map(s=>{s.components.map(a=>{if(a.enabled)if("object"==typeof o.customerProducts?.productForm?.[a.key])if("custom-selectboxes"===a.type){let c=[];a.values.map(d=>{o.customerProducts?.productForm[a.key][d.value]&&c.push(d.label)}),o.enabledContents.push({label:a.label,value:`${c.join(", ")}`})}else o.enabledContents.push({label:a.label,value:`${o.customerProducts?.productForm?.[a.key].value} ${o.customerProducts?.productForm?.[a.key].unit}`});else if("custom-select"===a.type){let c="";a.data.values.map(d=>{o.customerProducts?.productForm[a.key]===d.value&&(c=d.label)}),o.enabledContents.push({label:a.label,value:`${c}`})}else o.enabledContents.push({label:a.label,value:o.customerProducts?.productForm?.[a.key]})})});else if(l.enabled)if("object"==typeof o.customerProducts?.productForm[l.key])if("custom-selectboxes"===l.type){let s=[];l.values.map(a=>{o.customerProducts?.productForm[l.key][a.value]&&s.push(a.label)}),o.enabledContents.push({label:l.label,value:`${s.join(", ")}`})}else o.enabledContents.push({label:l.label,value:`${o.customerProducts?.productForm[l.key].value} ${o.customerProducts?.productForm[l.key].unit}`});else if("custom-select"===l.type){let s="";l.data.values.map(a=>{o.customerProducts?.productForm[l.key]===a.value&&(s=a.label)}),o.enabledContents.push({label:l.label,value:`${s}`})}else o.enabledContents.push({label:l.label,value:o.customerProducts?.productForm?.[l.key]})})})):this.leads=t?this.leads:[]})}findMinMax(t){const{min:n,max:o}=t.reduce((l,s)=>({min:Math.min(l.min,s),max:Math.max(l.max,s)}),{min:1/0,max:-1/0});return{min:n,max:o}}warehouseFactorySelect(t,n){$("#warehouseFactorySelectModal").modal("show"),this.selectedLeadId=n,this.selectedProductId=t,this.getFactories(),this.getWarehouses()}getWarehouses(){this.WS.warehouseList(this.addQueryParams()).pipe((0,g.x)(()=>{})).subscribe(t=>{this.warehouseList=t?.meta?.status?t.data:[]})}getFactories(){this.FS.factoryList(this.addQueryParams()).pipe((0,g.x)(()=>{})).subscribe(t=>{this.factoryList=t?.meta?.status?t.data:[]})}factoryWarehouseChecked(t,n){this.factoryWarehouseSelectedType=n,this.factoryWarehouseSelectedId=t?.target?.value}continueToQuote(t){this.router.navigate("QUOTED"===t?.status||"ARCHIVED"===t?.status?["/quotes/detail"]:["/leads/quote-now"],{queryParams:{leadId:t._id}})}openCalendar(t){t.stopPropagation(),$(".daterangePickerLeads").data("dateRangePicker").open()}viewQuoteTimeLine(t){this.leadDetail=t,$("#quotesId").modal("show")}viewSpecifications(t){this.specificationsList=t,$("#specificationsModal").modal("show")}initializeCarousel(){setTimeout(()=>{$(".owl-carouselleads").owlCarousel({loop:!1,autoplayHoverPause:!0,autoplay:!0,margin:10,dots:!1,nav:!0,items:3,rewind:!0,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}})},200)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x.C),e.Y36(Q.L),e.Y36(Z.LA),e.Y36(F.l),e.Y36(v.F0),e.Y36(I.H),e.Y36(A.s),e.Y36(L.W),e.Y36(q.c))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-leads"]],decls:103,vars:22,consts:[[1,"dashboardMain"],[1,"page-header","product-page-header","d-flex","justify-content-between"],[1,"rightColumnDrop"],[1,"main_btn"],["type","button",1,"btn","btn-light",3,"disabled","click"],[1,"fa",3,"ngClass"],["class","formIcons",4,"ngIf"],[1,"viewMode"],[1,"view"],["data-view","grid-view",1,"selected","fa","fa-list",3,"click"],["data-view","list-view",1,"fa","fa-th",3,"click"],[1,"column-btns","d-flex","align-items-center","justify-content-end"],[1,"dropdown","ms-4"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside",1,"btn","btn-white","dropdown-toggle"],["src","assets/images/column-icon.png",1,"me-2"],["aria-labelledby","dropdownMenuButton1","checked","",1,"dropdown-menu","form-filter-drop"],[1,"form-box","form-filter"],["class","form-group",4,"ngFor","ngForOf"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-10","col-lg-10"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],[1,"col-6","col-md-3","col-sm-6","col-lg-3"],[1,"form-control",3,"change"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","col-lg-2","col-sm-2"],["value","QUOTED"],["value","PENDING"],["value","REQUOTED"],["value","ARCHIVED"],[1,"col-12","col-md-4","col-lg-3","col-sm-3"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"leadMain"],[1,"prod","grid-view"],[1,"item","first"],["class","col-100 my-3 text-center",4,"ngIf"],["class","row","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],["class","leadsDetails",4,"ngIf"],["id","quotesId",1,"modal","fade","previousQuotes"],[1,"modal-dialog","modal-dialog-centered","modal-md","sample-popup-form"],[1,"modal-content"],[1,"modal-body"],[1,"pop-table","quotesId"],[1,"table-row","table-responsive","fix-headertbl","request_sample"],["width","100%","cellspacing","0",1,"table","table-bordered"],[1,"fw500"],["id","specificationsModal",1,"modal","fade","previousQuotes"],[4,"ngFor","ngForOf"],["fgsColor","#3E916C",3,"hasProgressBar"],[1,"formIcons"],["src","assets/images/download.png"],[1,"form-check"],["type","checkbox","name","columnName",1,"form-check-input",3,"id","ngModel","ngModelChange","change"],[1,"form-check-label",3,"for"],[3,"value"],[1,"col-100","my-3","text-center"],["infiniteScroll","",1,"row",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["class","col-12 col-sm-12 col-md-12 col-lg-12",4,"ngFor","ngForOf"],[1,"itemList"],[1,"col-12","col-sm-4","col-md-4","col-lg-3","leadsCustomer-border"],[1,"leadsCustomer"],[1,"text-primary"],["href","javascript:void(0)",1,"btn","btn-primary"],[1,"col-12","col-sm-8","col-md-8","col-lg-9"],[1,"sliderMain"],[1,"owl-carousel","owl-carouselleads"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"leadsSlider"],[1,"image"],["alt","",3,"src"],[1,"leadSliderInfo"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"leadsDetails"],["infiniteScroll","",1,"table-row","table-responsive","fix-headertbl","request_sample",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],[3,"ngClass","class",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"col0",3,"ngClass"],["href","javascript:void(0)",3,"routerLink"],[1,"col1",3,"ngClass"],["href","javascript:void(0)"],[1,"col2",3,"ngClass"],["href","javascript:void(0)",3,"click"],[1,"col3",3,"ngClass"],[1,"col4",3,"ngClass"],[1,"col5",3,"ngClass"],["href","javascript:void(0)",1,"btn","underline-none",3,"ngClass"],[1,"text-success","underline-none","viewText","mr-1","pointer",3,"click"],["href","#",1,"viewText","listDropdown"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"My Leads"),e.qZA(),e.TgZ(4,"span")(5,"div",2)(6,"div",3)(7,"button",4),e.NdJ("click",function(){return o.exportDetails()}),e._UZ(8,"i",5),e._uU(9," Export Details"),e.qZA(),e.YNc(10,J,2,0,"span",6),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"i",9),e.NdJ("click",function(){return o.gridView("list")}),e.qZA(),e.TgZ(14,"i",10),e.NdJ("click",function(){return o.gridView("")}),e.qZA()()(),e.TgZ(15,"div",11)(16,"div",12)(17,"button",13),e._UZ(18,"img",14),e._uU(19," Manage Column "),e.qZA(),e.TgZ(20,"div",15)(21,"div",16),e.YNc(22,D,5,4,"div",17),e.qZA()()()()()()(),e.TgZ(23,"div",18)(24,"div",19)(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23)(29,"div",24)(30,"div",25)(31,"input",26),e.NdJ("ngModelChange",function(s){return o.searchKey=s})("ngModelChange",function(s){return o.searchKeySubject.next(s)}),e.qZA(),e.TgZ(32,"div",27)(33,"button",28),e._UZ(34,"i",29),e.qZA()()()()(),e.TgZ(35,"div",30)(36,"div",24)(37,"select",31),e.NdJ("change",function(s){return o.filterByProduct(s)}),e.TgZ(38,"option",32),e._uU(39,"Product Type"),e.qZA(),e.YNc(40,O,2,2,"option",33),e.qZA()()(),e.TgZ(41,"div",34)(42,"div",24)(43,"select",31),e.NdJ("change",function(s){return o.filterByStatus(s)}),e.TgZ(44,"option",32),e._uU(45,"Lead Status"),e.qZA(),e.TgZ(46,"option",35),e._uU(47,"Quoted"),e.qZA(),e.TgZ(48,"option",36),e._uU(49,"Pending"),e.qZA(),e.TgZ(50,"option",37),e._uU(51,"Re Quoted"),e.qZA(),e.TgZ(52,"option",38),e._uU(53,"Archived"),e.qZA()()()(),e.TgZ(54,"div",39)(55,"div",24)(56,"select",31),e.NdJ("change",function(s){return o.filterByCountry(s)}),e.TgZ(57,"option",32),e._uU(58,"Customer Origin"),e.qZA(),e.YNc(59,Y,2,2,"option",33),e.qZA()()()()(),e.TgZ(60,"div",40)(61,"div",41)(62,"div",42)(63,"div",43),e.YNc(64,M,2,0,"div",44),e.YNc(65,K,2,3,"div",45),e.YNc(66,te,11,6,"div",46),e.qZA()()()()()()()(),e.TgZ(67,"div",47)(68,"div",48)(69,"div",49)(70,"div",50)(71,"div",51)(72,"div",52)(73,"table",53)(74,"thead")(75,"tr")(76,"th"),e._uU(77,"Timeline "),e.qZA(),e.TgZ(78,"th"),e._uU(79," Date "),e.qZA()()(),e.TgZ(80,"tbody")(81,"tr")(82,"td",54),e._uU(83,"Quote Created on "),e.qZA(),e.TgZ(84,"td"),e._uU(85),e.ALo(86,"date"),e.qZA()(),e.TgZ(87,"tr")(88,"td",54),e._uU(89,"Updated At "),e.qZA(),e.TgZ(90,"td"),e._uU(91),e.ALo(92,"date"),e.qZA()()()()()()()()()(),e.TgZ(93,"div",55)(94,"div",48)(95,"div",49)(96,"div",50)(97,"div",51)(98,"div",52)(99,"table",53)(100,"tbody"),e.YNc(101,oe,5,2,"tr",56),e.qZA()()()()()()()(),e._UZ(102,"ngx-ui-loader",57)),2&n&&(e.xp6(7),e.Q6J("disabled",o.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(20,ie,o.isLoading)),e.xp6(2),e.Q6J("ngIf",!o.isLoading),e.xp6(12),e.Q6J("ngForOf",o.columns),e.xp6(9),e.Q6J("ngModel",o.searchKey),e.xp6(9),e.Q6J("ngForOf",o.myProducts),e.xp6(19),e.Q6J("ngForOf",o.countries),e.xp6(5),e.Q6J("ngIf",!(null!=o.leads&&o.leads.length)&&"list"!==o.viewType),e.xp6(1),e.Q6J("ngIf","list"!==o.viewType),e.xp6(1),e.Q6J("ngIf","list"===o.viewType),e.xp6(19),e.Oqu(e.xi3(86,14,null==o.leadDetail?null:o.leadDetail.createdAt,"dd MMMM YYYY")),e.xp6(6),e.Oqu(e.xi3(92,17,null==o.leadDetail?null:o.leadDetail.updatedAt,"dd MMMM YYYY")),e.xp6(10),e.Q6J("ngForOf",o.specificationsList),e.xp6(1),e.Q6J("hasProgressBar",!1))},dependencies:[Z.Eo,_.mk,_.sg,_.O5,v.rH,u.YN,u.Kr,u.Fj,u.Wl,u.JJ,u.On,P.Ry,_.uU],styles:[".colHide[_ngcontent-%COMP%]{display:none}"]})}return i})();function se(i,r){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"div",24),e._UZ(6,"img",25),e.qZA(),e.TgZ(7,"div",26)(8,"ul")(9,"li"),e._uU(10),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Product ID: "),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"li"),e._uU(16,"Product: "),e.TgZ(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"li"),e._uU(20,"Quantity Range: "),e.TgZ(21,"span"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",11)(24,"button",27),e._uU(25),e.qZA()()()()()),2&i){const t=r.$implicit;e.xp6(4),e.Oqu(null==t?null:t.customerProducts.status),e.xp6(2),e.Q6J("src",null==t||null==t.product?null:t.product.productImg[0],e.LSH),e.xp6(4),e.Oqu(null==t||null==t.product?null:t.product.productName),e.xp6(4),e.Oqu(null==t||null==t.customerProducts?null:t.customerProducts.customerProductId),e.xp6(4),e.Oqu(null==t||null==t.product?null:t.product.productName),e.xp6(4),e.lnq(" ",t.minMaxQuant.min||"-"," ",t.minMaxQuant.max?"to":""," ",t.minMaxQuant.max," "),e.xp6(3),e.Oqu(null==t?null:t.status)}}let re=(()=>{class i{constructor(t,n,o,l,s){this.ngxService=t,this.notify=n,this.router=o,this.routes=l,this.LS=s}ngOnInit(){this.routes.params.subscribe(t=>{t&&t.id&&(this.leadId=t.id,this.getLeadDetail())})}getLeadDetail(){this.ngxService.start(),this.LS.leadDetails(this.leadId).pipe((0,g.x)(()=>{})).subscribe(t=>{this.ngxService.stop(),t?.meta?.status&&(this.leadDetail=t.data,this.getLeadListByCustomer())},t=>{this.ngxService.stop()})}getLeadListByCustomer(){this.ngxService.start(),this.LS.getLeadListByCustomer(this.leadDetail.customerId).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t?.meta?.status&&(this.leadList=t.data,this.leadList.map(n=>{let o=n.customerProducts?.quantities?this.findMinMax(n.customerProducts?.quantities):{max:0,min:0};n.minMaxQuant=o}),this.customerLeadDetails=t)})}findMinMax(t){const{min:n,max:o}=t.reduce((l,s)=>({min:Math.min(l.min,s),max:Math.max(l.max,s)}),{min:1/0,max:-1/0});return{min:n,max:o}}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(Z.LA),e.Y36(q.c),e.Y36(v.F0),e.Y36(v.gz),e.Y36(x.C))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-lead-details"]],decls:36,vars:11,consts:[[1,"dashboardMain"],[1,"page-header","product-page-header","d-flex","justify-content-between"],["href","javascript:history.back()"],[1,"bi","bi-arrow-left-short"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"myLeadsBox"],[1,"leadsCustomer"],[1,"customerDetails"],[1,"main_btn"],["href","javascript:void(0)",1,"btn","btn-primary"],[1,"threeBtn"],["href","javascript:void(0)",1,"btn","btn-info","underline-none"],["href","javascript:void(0)",1,"btn","btn-light","underline-none"],[1,"myLeadsDetails"],[1,"sliderMain"],[1,"row"],["class","col-12 col-sm-4 col-md-4 col-lg-4",4,"ngFor","ngForOf"],["fgsColor","#3E916C",3,"hasProgressBar"],[1,"col-12","col-sm-4","col-md-4","col-lg-4"],[1,"leadsSlider"],[1,"expiredBox"],[1,"image"],["alt","",3,"src"],[1,"leadSliderInfo"],["type","button",1,"btn","btn-success"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3")(3,"a",2),e._UZ(4,"i",3),e.qZA(),e._uU(5," My Leads"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1"),e._uU(13),e.qZA(),e.TgZ(14,"div",10)(15,"p"),e._uU(16),e.qZA(),e.TgZ(17,"h2"),e._uU(18),e.qZA(),e.TgZ(19,"div",11)(20,"a",12),e._uU(21),e.qZA()()()(),e.TgZ(22,"div",13)(23,"div",11)(24,"a",14),e._uU(25),e.qZA(),e.TgZ(26,"a",15),e._uU(27),e.qZA(),e.TgZ(28,"a",14),e._uU(29),e.qZA()()()()(),e.TgZ(30,"div",7)(31,"div",16)(32,"div",17)(33,"div",18),e.YNc(34,se,26,9,"div",19),e.qZA()()()()()()()(),e._UZ(35,"ngx-ui-loader",20)),2&n&&(e.xp6(13),e.AsE("",null==o.leadDetail||null==o.leadDetail.customer?null:o.leadDetail.customer.firstName[0],"",null==o.leadDetail||null==o.leadDetail.customer?null:o.leadDetail.customer.lastName[0],""),e.xp6(3),e.hij("Customer ID: ",null==o.leadDetail||null==o.leadDetail.customerLogin?null:o.leadDetail.customerLogin.customerId,""),e.xp6(2),e.hij(" ",null==o.leadDetail||null==o.leadDetail.customer?null:o.leadDetail.customer.companyName,""),e.xp6(3),e.AsE(" ",(null==o.customerLeadDetails?null:o.customerLeadDetails.pendingOrderCount)+(null==o.customerLeadDetails?null:o.customerLeadDetails.ongoingOrderCount)," You Fulfilled ",null==o.customerLeadDetails?null:o.customerLeadDetails.completedOrderCount," Orders "),e.xp6(4),e.hij("All Leads - ",null==o.customerLeadDetails?null:o.customerLeadDetails.allLeadsCount," "),e.xp6(2),e.hij("Quoted - ",null==o.customerLeadDetails?null:o.customerLeadDetails.quotedQuoteCount," "),e.xp6(2),e.hij("Yet to Quote - ",null==o.customerLeadDetails?null:o.customerLeadDetails.pendingLeadsCount," "),e.xp6(5),e.Q6J("ngForOf",o.leadList),e.xp6(1),e.Q6J("hasProgressBar",!1))},dependencies:[Z.Eo,_.sg]})}return i})();var le=m(15861),ae=m(69862),ue=m(93851),ce=m(6530),N=m(48983);function de(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.lead||null==t.lead.customer?null:t.lead.customer.companyName,", ")}}function pe(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.gL8(" ",null==t?null:t.warehouseName,"",null==t?null:t.factoryName,",",null==t?null:t.addressLine1,",",null==t?null:t.cityName,",",null==t||null==t.state?null:t.state.name,",",null==t||null==t.country?null:t.country.name," ")}}function me(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t._id),e.xp6(1),e.gL8(" ",null==t?null:t.warehouseName,"",null==t?null:t.factoryName,",",null==t?null:t.addressLine1,",",null==t?null:t.cityName,",",null==t||null==t.state?null:t.state.name,",",null==t||null==t.country?null:t.country.name," ")}}function ge(i,r){1&i&&(e.TgZ(0,"div",23)(1,"button",87),e._uU(2,"View Previous Quotes"),e.qZA()())}function he(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"%"),e.qZA())}function fe(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"%"),e.qZA())}function _e(i,r){if(1&i&&(e.TgZ(0,"td")(1,"div",91)(2,"div",21)(3,"div",92)(4,"label",93),e._uU(5,"Lower Limit"),e.qZA(),e.TgZ(6,"div",8),e._UZ(7,"input",94),e.YNc(8,he,2,0,"span",7),e.qZA()(),e.TgZ(9,"div",92)(10,"label",95),e._uU(11,"Upper Limit"),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",96),e.YNc(14,fe,2,0,"span",7),e.qZA()()()()()),2&i){const t=e.oxw().$implicit;e.xp6(8),e.Q6J("ngIf","percentage"===(null==t||null==t.value?null:t.value.unit)),e.xp6(6),e.Q6J("ngIf","percentage"===(null==t||null==t.value?null:t.value.unit))}}function ve(i,r){1&i&&(e.TgZ(0,"td",97),e._uU(1," ---- "),e.qZA())}function Te(i,r){if(1&i&&(e.TgZ(0,"tr",27)(1,"td"),e._UZ(2,"input",88),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",89),e.qZA(),e.YNc(5,_e,15,2,"td",7),e.YNc(6,ve,2,0,"td",90),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("formGroup",n.getFormGroup(t)),e.xp6(5),e.Q6J("ngIf",t.value.hasOwnProperty("lowerTolerance")),e.xp6(1),e.Q6J("ngIf",!t.value.hasOwnProperty("lowerTolerance"))}}const Ze=function(i){return{active:i}};function ye(i,r){if(1&i&&(e.TgZ(0,"div",98),e._UZ(1,"img",99),e.qZA()),2&i){const t=r.$implicit;e.Q6J("ngClass",e.VKq(2,Ze,0===r.index)),e.xp6(1),e.Q6J("src",t,e.LSH)}}function Ce(i,r){1&i&&(e.TgZ(0,"div",100)(1,"button",101),e._UZ(2,"span",102),e.TgZ(3,"span",103),e._uU(4,"Previous"),e.qZA()(),e.TgZ(5,"button",104),e._UZ(6,"span",105),e.TgZ(7,"span",103),e._uU(8,"Next"),e.qZA()()())}function be(i,r){if(1&i&&e._UZ(0,"img",117),2&i){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function xe(i,r){if(1&i&&e._UZ(0,"img",118),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function qe(i,r){if(1&i&&e._UZ(0,"img",119),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function we(i,r){if(1&i&&e._UZ(0,"img",120),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Qe(i,r){if(1&i&&e._UZ(0,"img",121),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Fe(i,r){if(1&i&&e._UZ(0,"img",122),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Ae(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",109)(1,"span"),e.YNc(2,be,1,2,"img",110),e.YNc(3,xe,1,1,"img",111),e.YNc(4,qe,1,1,"img",112),e.YNc(5,we,1,1,"img",113),e.YNc(6,Qe,1,1,"img",114),e.YNc(7,Fe,1,1,"img",115),e.qZA(),e.TgZ(8,"h2"),e._uU(9),e.qZA(),e.TgZ(10,"div",39)(11,"a",40),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.downloadImage(l.url))}),e._uU(12,"Download "),e._UZ(13,"img",116),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function Pe(i,r){if(1&i&&(e.TgZ(0,"div",106)(1,"h1"),e._uU(2,"Artwork:"),e.qZA(),e.TgZ(3,"div",107),e.YNc(4,Ae,14,7,"div",108),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.productArtworks)}}function Ne(i,r){if(1&i&&e._UZ(0,"img",117),2&i){const t=e.oxw().$implicit;e.s9C("src",t.url,e.LSH),e.s9C("alt",t.name)}}function ke(i,r){if(1&i&&e._UZ(0,"img",118),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Ue(i,r){if(1&i&&e._UZ(0,"img",119),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Se(i,r){if(1&i&&e._UZ(0,"img",120),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Ie(i,r){if(1&i&&e._UZ(0,"img",121),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Le(i,r){if(1&i&&e._UZ(0,"img",122),2&i){const t=e.oxw().$implicit;e.s9C("alt",t.name)}}function Je(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",109)(1,"span"),e.YNc(2,Ne,1,2,"img",110),e.YNc(3,ke,1,1,"img",111),e.YNc(4,Ue,1,1,"img",112),e.YNc(5,Se,1,1,"img",113),e.YNc(6,Ie,1,1,"img",114),e.YNc(7,Le,1,1,"img",115),e.qZA(),e.TgZ(8,"h2"),e._uU(9),e.qZA(),e.TgZ(10,"div",39)(11,"a",40),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.downloadImage(l.url))}),e._uU(12,"Download "),e._UZ(13,"img",123),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("ngIf",t.isImage),e.xp6(1),e.Q6J("ngIf",t.isCorelDraw),e.xp6(1),e.Q6J("ngIf",t.isPdf),e.xp6(1),e.Q6J("ngIf",t.isWord),e.xp6(1),e.Q6J("ngIf",t.isExcel),e.xp6(1),e.Q6J("ngIf",t.isIllustrator),e.xp6(2),e.Oqu(t.name)}}function De(i,r){if(1&i&&(e.TgZ(0,"div",106)(1,"h1"),e._uU(2,"Additional Attachments:"),e.qZA(),e.TgZ(3,"div",107),e.YNc(4,Je,14,7,"div",108),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.productAttachments)}}function Oe(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ye(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Shipping term is required. "),e.qZA())}function Me(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,Ye,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.quotationsFormGroupControls.shippingTerms.errors.required)}}const h=function(i){return{"is-invalid":i}};function je(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"div",8)(2,"label"),e._uU(3," Shipping Terms"),e.qZA(),e.TgZ(4,"select",124)(5,"option",125),e._uU(6,"Select Shipping Term"),e.qZA(),e.YNc(7,Oe,2,2,"option",12),e.qZA(),e.YNc(8,Me,2,1,"div",57),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(3,h,t.quotationFormSubmittied&&t.quotationsFormGroupControls.shippingTerms.errors)),e.xp6(3),e.Q6J("ngForOf",t.shippingTermsList),e.xp6(1),e.Q6J("ngIf",t.quotationFormSubmittied&&t.quotationsFormGroupControls.shippingTerms.errors)}}function $e(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.lead||null==t.lead.vendor?null:t.lead.vendor.currency)}}function We(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function Ee(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.lead||null==t.lead.vendor?null:t.lead.vendor.currency)}}function Ve(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function Be(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",127)(1,"div",49),e._UZ(2,"input",128),e.qZA(),e.TgZ(3,"div",129)(4,"div",130),e._uU(5," \xb1 "),e._UZ(6,"input",131),e._uU(7," % "),e.qZA(),e.TgZ(8,"div",50),e._UZ(9,"input",132),e.qZA(),e.TgZ(10,"div",50)(11,"div",133),e.YNc(12,$e,2,1,"span",7),e.YNc(13,We,2,0,"span",7),e.TgZ(14,"input",134),e.NdJ("keyup",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.changePrice(l))}),e.qZA()()(),e.TgZ(15,"div",50),e.YNc(16,Ee,2,1,"span",7),e.YNc(17,Ve,2,0,"span",7),e._UZ(18,"input",135),e.qZA(),e.TgZ(19,"div",50),e._UZ(20,"input",136),e.qZA(),e.TgZ(21,"div",50),e._UZ(22,"input",137),e.qZA(),e.TgZ(23,"div",50),e._UZ(24,"input",138),e.qZA()()()}if(2&i){const t=r.$implicit,n=e.oxw();e.Q6J("formGroup",n.getFormGroup(t)),e.xp6(12),e.Q6J("ngIf",(null==n.lead||null==n.lead.vendor?null:n.lead.vendor.currency)==(null==n.lead||null==n.lead.customer?null:n.lead.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==n.lead||null==n.lead.vendor?null:n.lead.vendor.currency)!=(null==n.lead||null==n.lead.customer?null:n.lead.customer.currency)),e.xp6(3),e.Q6J("ngIf",(null==n.lead||null==n.lead.vendor?null:n.lead.vendor.currency)==(null==n.lead||null==n.lead.customer?null:n.lead.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==n.lead||null==n.lead.vendor?null:n.lead.vendor.currency)!=(null==n.lead||null==n.lead.customer?null:n.lead.customer.currency))}}function Ke(i,r){if(1&i&&(e.TgZ(0,"h6"),e._uU(1),e.TgZ(2,"span"),e._uU(3,"Notified by Customer"),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.hij("Case Pack: ",null==t.lead||null==t.lead.customerProducts||null==t.lead.customerProducts.productForm?null:t.lead.customerProducts.productForm.casePack," ")}}function Ge(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Case Pack is required. "),e.qZA())}function He(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,Ge,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.casePack.errors.required)}}function Re(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",8)(2,"label"),e._uU(3," Case Pack"),e.qZA(),e.TgZ(4,"input",139),e.NdJ("keyup",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.changeCasepack(o))}),e.qZA(),e.YNc(5,He,2,1,"div",57),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(2,h,t.packagingFormSubmittied&&t.packagingFormControls.casePack.errors)),e.xp6(1),e.Q6J("ngIf",t.packagingFormSubmittied&&t.packagingFormControls.casePack.errors)}}function ze(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Valid Upto date is required. "),e.qZA())}function Xe(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,ze,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.validUpto.errors.required)}}function et(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Length is required. "),e.qZA())}function tt(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,et,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.length.errors.required)}}function ot(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Breadth is required. "),e.qZA())}function it(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,ot,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.breadth.errors.required)}}function nt(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Height is required. "),e.qZA())}function st(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,nt,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.height.errors.required)}}function rt(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Gross weight is required. "),e.qZA())}function lt(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,rt,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.grossWeight.errors.required)}}function at(i,r){1&i&&(e.TgZ(0,"label"),e._uU(1," Shipping Address "),e.qZA())}function ut(i,r){1&i&&(e.TgZ(0,"label"),e._uU(1," Origin Port"),e.qZA())}function ct(i,r){1&i&&(e.TgZ(0,"label"),e._uU(1," Destination Port"),e.qZA())}function dt(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function pt(i,r){if(1&i&&(e.TgZ(0,"select",142)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,dt,3,4,"option",12),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,h,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.nearestPortArr)}}function mt(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function gt(i,r){if(1&i&&(e.TgZ(0,"select",142)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,mt,3,4,"option",12),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,h,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.cifShippingPorts)}}function ht(i,r){if(1&i&&(e.TgZ(0,"option",86),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t._id),e.xp6(1),e.HOy(" ",t.name,", ",null==t?null:t.addressLine1,", ",null==t?null:t.addressLine2,", ",null==t?null:t.cityName," ")}}function ft(i,r){if(1&i&&(e.TgZ(0,"select",142)(1,"option",125),e._uU(2,"Select"),e.qZA(),e.YNc(3,ht,2,5,"option",12),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,h,t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)),e.xp6(3),e.Q6J("ngForOf",t.addresses)}}function _t(i,r){1&i&&(e.ynx(0),e._uU(1," Origin Port "),e.BQk())}function vt(i,r){1&i&&(e.ynx(0),e._uU(1," Origin Port "),e.BQk())}function Tt(i,r){1&i&&(e.ynx(0),e._uU(1," Shipping address "),e.BQk())}function Zt(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,_t,2,0,"ng-container",7),e.YNc(2,vt,2,0,"ng-container",7),e.YNc(3,Tt,2,0,"ng-container",7),e._uU(4," is required. "),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms)}}function yt(i,r){if(1&i&&(e.TgZ(0,"div",143),e.YNc(1,Zt,5,3,"div",7),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.packagingFormControls.shippingAddress.errors.required)}}function Ct(i,r){if(1&i&&(e.TgZ(0,"div",140)(1,"div",8),e.YNc(2,at,2,0,"label",7),e.YNc(3,ut,2,0,"label",7),e.YNc(4,ct,2,0,"label",7),e.YNc(5,pt,4,4,"select",141),e.YNc(6,gt,4,4,"select",141),e.YNc(7,ft,4,4,"select",141),e.YNc(8,yt,2,1,"div",75),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","FOB"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","CIF"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf","DDU"===t.quotationsForm.value.shippingTerms||"DDP"===t.quotationsForm.value.shippingTerms),e.xp6(1),e.Q6J("ngIf",t.packagingFormSubmittied&&t.packagingFormControls.shippingAddress.errors)}}function bt(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," PPS Quantity is required. "),e.qZA())}function xt(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,bt,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleQuantity.errors.required)}}function qt(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Production Lead Time is required. "),e.qZA())}function wt(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,qt,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleProductionLeadTime.errors.required)}}function Qt(i,r){if(1&i&&(e.TgZ(0,"span",144),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.lead||null==t.lead.vendor?null:t.lead.vendor.currency)}}function Ft(i,r){1&i&&(e.TgZ(0,"span",144),e._uU(1,"USD"),e.qZA())}function At(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," Grand Total Price "),e.qZA())}function Pt(i,r){if(1&i&&(e.TgZ(0,"div",143),e.YNc(1,At,2,0,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ppsFormControls.prePurchaseSampleTotalPrice.errors.required)}}const b=function(i){return{"fa-spin fa-spinner":i}};function Nt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitPpsForm())}),e._UZ(3,"i",33),e._uU(4," Save "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.isLoadingPps),e.xp6(1),e.Q6J("ngClass",e.VKq(2,b,t.isLoadingPps))}}function kt(i,r){if(1&i&&(e.TgZ(0,"option",154),e._uU(1),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.s9C("value",t),e.Q6J("disabled",n.isSelected(t)),e.xp6(1),e.hij(" ",t," ")}}function Ut(i,r){if(1&i&&(e.TgZ(0,"span",144),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.lead||null==t.lead.vendor?null:t.lead.vendor.currency)}}function St(i,r){1&i&&(e.TgZ(0,"span",144),e._uU(1,"USD"),e.qZA())}function It(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",155),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,l=e.oxw();return e.KtG(l.removeOneTimeCost(o))}),e._UZ(1,"img",156),e.qZA()}}function Lt(i,r){1&i&&e._UZ(0,"a",157)}function Jt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",158),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addItem())}),e._UZ(1,"img",159),e.qZA()}}function Dt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"div",66)(2,"div",8)(3,"select",146)(4,"option",10),e._uU(5,"Select Cost"),e.qZA(),e.YNc(6,kt,2,3,"option",147),e.qZA()()(),e.TgZ(7,"div",66)(8,"div",8)(9,"div",72),e.YNc(10,Ut,2,1,"span",73),e.YNc(11,St,2,0,"span",73),e.TgZ(12,"input",148),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.OnKeyUpOneTimeCost())})("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.totalOneTimeCost())}),e.qZA()()()(),e.TgZ(13,"div",149)(14,"div",8)(15,"div",150),e.YNc(16,It,2,0,"a",151),e.YNc(17,Lt,1,0,"a",152),e.YNc(18,Jt,2,0,"a",153),e.qZA()()()()}if(2&i){const t=r.$implicit,n=r.last,o=e.oxw();e.Q6J("formGroup",o.getFormGroup(t)),e.xp6(6),e.Q6J("ngForOf",o.costsList),e.xp6(4),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)==(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)!=(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(5),e.Q6J("ngIf",o.oneTimeCostFormControls.controls.length>1),e.xp6(1),e.Q6J("ngIf",!n),e.xp6(1),e.Q6J("ngIf",n)}}function Ot(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.lead||null==t.lead.vendor?null:t.lead.vendor.currency)}}function Yt(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"USD"),e.qZA())}function Mt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitOneTimeForm())}),e._UZ(3,"i",33),e._uU(4," Save "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.isLoadingOneTime),e.xp6(1),e.Q6J("ngClass",e.VKq(2,b,t.isLoadingOneTime))}}const jt=function(i){return{bgGrayBox:i}},$t=[{path:"",component:ne},{path:"details/:id",component:re},{path:"quote-now",component:(()=>{class i{constructor(t,n,o,l,s,a,c,d,p,f,C){this.routes=t,this.PS=n,this.QS=o,this.ngxService=l,this._notify=s,this.FB=a,this.LS=c,this.route=d,this.FS=p,this._US=f,this.WS=C,this.factoryWarehouseSelectedId="",this.factoryWarehouseSelectedType="",this.selectedLeadId="",this.selectedProductId="",this.packagingFormSubmittied=!1,this.ppsFormSubmittied=!1,this.quotationFormSubmittied=!1,this.toleranceFormSubmittied=!1,this.isLoading=!1,this.totalOneTimeCostNum=0,this.totalOneTimeCostSave=!1,this.fields=[],this.moment=T(),this.selectedImage=0,this.checkppsformdisabled=!1,this.todayDate=T().format("yyyy-MM-DD"),this.nearestPortArr=[],this.isLoadingOneTime=!1,this.isPackageLoading=!1,this.isLoadingPps=!1,this.isLoadingQuote=!1,this.isLoadingTolerance=!1,this.productArtworks=[],this.productAttachments=[],this.cifShippingPorts=[],this.addresses=[],this.isCasePackNotfied=!1,this.isToleranceDraft=!1,this.isOneTimeCostDraft=!1,this.isQuotationDraft=!1,this.isPpsDraft=!1}ngOnInit(){this.initForm(),this.routes.queryParams.subscribe(t=>{this.selectedLeadId=t.leadId,this.selectedProductId=t.productId}),this._US.getUser().subscribe(t=>{this.currentVendor=t.user}),this.oneTimeCost(),this.shippingTerm(),this.getDraft(),this.getFactoryList(),this.getWarehouseList()}ngAfterViewInit(){this.quotationsForm.valueChanges.subscribe(t=>{t.shippingTerms&&(this.shippingTermString=t.shippingTerms,"Ex-Factory"!==t.shippingTerms?this.packagingForm.addControl("shippingAddress",new u.NI("",u.kI.required)):this.packagingForm.removeControl("shippingAddress"),"Ex-Factory"!==t.shippingTerms&&this.packagingForm.get("shippingAddress")?.reset(this.leadDraft?.shippingAddress?this.leadDraft?.shippingAddress:""))})}changeOfFactoryWarehouse(t){this.factoryWarehouseSelectedId=t?.target?.value;let n=this.factoryList.find(l=>l?._id===t?.target?.value),o=this.warehouseList.find(l=>l?._id===t?.target?.value);this.nearestPortArr=[],n&&(this.nearestPortArr.push(n.nearestPort),this.factoryWarehouseSelectedType="factory"),o&&(this.nearestPortArr.push(o.nearestPort),this.factoryWarehouseSelectedType="warehouse")}addQueryParams(){return new ae.LE}getFactoryList(){this.ngxService.start(),this.FS.factoryList(this.addQueryParams()).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{this.factoryList=t?.meta?.status?t.data:[]})}getWarehouseList(){this.ngxService.start(),this.WS.warehouseList(this.addQueryParams()).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{this.warehouseList=t?.meta?.status?t.data:[]})}initForm(){this.ppsForm=this.FB.group({prePurchaseSampleQuantity:["",u.kI.required],prePurchaseSampleProductionLeadTime:["",u.kI.required],prePurchaseSampleTotalPrice:["",u.kI.required]}),this.packagingForm=this.FB.group({casePack:["",u.kI.required],validUpto:["",u.kI.required],length:["",u.kI.required],breadth:["",u.kI.required],height:["",u.kI.required],grossWeight:["",u.kI.required],shippingAddress:["",u.kI.required]}),this.oneTimeCostForm=this.FB.group({costsArray:new u.Oe([])}),this.quotationsForm=this.FB.group({shippingTerms:["",u.kI.required],quotationsArray:new u.Oe([])}),this.toleranceForm=this.FB.group({toleranceArray:new u.Oe([])})}get ppsFormControls(){return this.ppsForm.controls}get packagingFormControls(){return this.packagingForm.controls}get oneTimeCostFormControls(){return this.oneTimeCostForm.controls.costsArray}get quotationsFormControls(){return this.quotationsForm.controls.quotationsArray}get quotationsFormGroupControls(){return this.packagingForm.controls}get toleranceFormControls(){return this.toleranceForm.controls.toleranceArray}addTolerance(t,n,o){this.toleranceFormControls.push(this.tolegranceItem(t,n,o))}addQuotation(t,n){this.quotationsFormControls.push(this.quotationItem(t,n))}tolegranceItem(t,n,o){return this.FB.group(n?{name:t?.name,measurement:t?.measurement||"---",...t.upperTolerance&&{upperTolerance:[t?.upperTolerance,u.kI.required],lowerTolerance:[t?.lowerTolerance,u.kI.required]},...t.upperTolerance&&{unit:[t?.unit,u.kI.required]}}:{name:t?.label,measurement:this.findValue(t)||"---",...t.isTolerance&&{upperTolerance:[o?.upperLimit,u.kI.required],lowerTolerance:[o?.lowerLimt,u.kI.required]},...t.isTolerance&&{unit:[o?.unit,u.kI.required]}})}findValue(t){if(0==this.lead?.customerProducts?.productForm[t.key]?.length)return"---";if("object"==typeof this.lead?.customerProducts?.productForm[t.key]&&"custom-selectboxes"===t.type){let n=[];return t.values.map(o=>{this.lead?.customerProducts?.productForm[t.key][o.value]&&n.push(o.label)}),`${n.join()}`}if("object"==typeof this.lead?.customerProducts?.productForm[t.key])return t.multiple?`${this.lead?.customerProducts?.productForm[t.key].value?this.lead?.customerProducts?.productForm[t.key].value.join(", "):this.lead?.customerProducts?.productForm[t.key].join(", ")}`:`${this.lead?.customerProducts?.productForm[t.key].value} ${this.lead?.customerProducts?.productForm[t.key].unit}`;if("custom-select"===t.type){let n=t.data.values.filter(o=>o.value===this.lead?.customerProducts?.productForm[t.key]);return n.length?n[0].label:"---"}return this.lead?.customerProducts?.productForm[t.key]}quotationItem(t,n){return this.FB.group({quantity:n?t?.quantity:t,quantityTolerance:n?t?.quantityTolerance:"",productionleadTime:n?t?.productionleadTime:"",pricePerPiece:n?t?.pricePerPiece:"",totalPrice:n?t?.totalPrice:0,totalCbm:n?t?.totalCbm:"",totalCartons:n?t?.totalCartons:"Carton"===this.lead?.customerProducts?.quantityType?t:0,totalWeight:n?t?.totalWeight:""})}createItem(t){return this.FB.group({name:t?t?.name:"",cost:t?t?.cost:""})}addItem(t){this.oneTimeCostFormControls.push(this.createItem(t))}removeOneTimeCost(t){this.oneTimeCostForm.controls.costsArray.removeAt(t),this.totalOneTimeCost()}changePrice(t){t.get("totalPrice")?.setValue(Number(t.value.pricePerPiece)*t.value.quantity)}changeCasepack(t){Number(t.target.value)&&Number(t.target.value),this.quotationsFormControls.controls.map(o=>{"CARTON"===this.lead?.customerProducts?.quantityType.toUpperCase()?o.get("totalCartons")?.setValue(Number(o.value.quantity)):o.get("totalCartons")?.setValue((Number(t.target.value)?o.value.quantity/Number(t.target.value):0).toFixed())})}changeWeight(t){this.quotationsFormControls.controls.map(n=>{n.get("totalWeight")?.setValue((n.value.totalCartons*Number(t.target.value)).toFixed())})}changeLbh(t){this.quotationsFormControls.controls.map(n=>{let o=Number(n.get("totalCartons")?.value);Number(this.packagingForm.get("length")?.value)&&Number(this.packagingForm.get("breadth")?.value)&&Number(this.packagingForm.get("height")?.value)&&n.get("totalCbm")?.setValue(Number(this.packagingForm.get("length")?.value||0)*Number(this.packagingForm.get("breadth")?.value||0)*Number(this.packagingForm.get("height")?.value||0)*16387064e-12*o)})}oneTimeCost(){this.ngxService.start(),this.QS.getAppConfigByKey("ONE_TIME_COST").pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?this.costsList=t.data.value.split("|").map(n=>n.trim()):this._notify.showError(t.meta.msg,"Error")})}isSelected(t){this.oneTimeCostForm.value.costsArray.map((n,o)=>n?.name===t)}totalOneTimeCost(){let t=0;this.oneTimeCostForm.value.costsArray.map((n,o)=>{t+=n?.cost}),this.totalOneTimeCostNum=t}OnKeyUpOneTimeCost(){this.oneTimeCostForm.value.costsArray.map((t,n)=>{this.totalOneTimeCostSave=0===t?.cost||t?.cost>0})}submitOneTimeForm(){if(this.oneTimeCostForm.valid){this.isLoadingOneTime=!0;let t={_id:this.selectedLeadId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},oneTimeCost:this.oneTimeCostForm.value.costsArray,totalOneTimeCost:this.totalOneTimeCostNum};this.QS.addOneTimeCost(t).pipe((0,g.x)(()=>{this.isLoadingOneTime=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.ppsFormSubmittied=!0}getFormGroup(t){return t}shippingTerm(){this.ngxService.start(),this.QS.getAppConfigByKey("SHIPPING_TERMS_VALUE").pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.shippingTermsList=t.data.value.split("|"),this.shippingTermsList=this.shippingTermsList.map(n=>n.trim())):this._notify.showError(t.meta.msg,"Error")})}submitPackagingForm(){if(this.packagingForm.valid){this.isPackageLoading=!0;let t={_id:this.selectedLeadId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},casePack:this.packagingForm.value.casePack,validUpto:T(this.packagingForm.value.validUpto).valueOf(),dimension:{length:this.packagingForm.value.length,breadth:this.packagingForm.value.breadth,height:this.packagingForm.value.height},grossWeight:this.packagingForm.value.grossWeight,shippingAddress:this.packagingForm.value.shippingAddress};this.QS.addPackaging(t).pipe((0,g.x)(()=>{this.isPackageLoading=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.packagingFormSubmittied=!0}submitPpsForm(){if(this.ppsForm.valid){this.isLoadingPps=!0;let t={_id:this.selectedLeadId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},prePurchaseSampleQuantity:this.ppsForm.value.prePurchaseSampleQuantity,prePurchaseSampleProductionLeadTime:this.ppsForm.value.prePurchaseSampleProductionLeadTime,prePurchaseSampleTotalPrice:this.ppsForm.value.prePurchaseSampleTotalPrice};this.QS.addPps(t).pipe((0,g.x)(()=>{this.isLoadingPps=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.ppsFormSubmittied=!0}toTimeStamp(t){return Date.parse(t)/1e3}submitQuotation(){if(this.packagingForm.valid)if(this.quotationsForm.valid){this.isLoadingQuote=!0;let t={_id:this.selectedLeadId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},quotation:this.quotationsForm.value.quotationsArray,shippingTerms:this.quotationsForm.value.shippingTerms};this.QS.addQuotation(t).pipe((0,g.x)(()=>{this.isLoadingQuote=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.quotationFormSubmittied=!0;else this._notify.showWarning("please add packaging details first.","")}saveTolerance(){if(this.toleranceForm.valid){this.isLoadingTolerance=!0;let t={_id:this.selectedLeadId,..."factory"===this.factoryWarehouseSelectedType&&{factoryId:this.factoryWarehouseSelectedId},..."warehouse"===this.factoryWarehouseSelectedType&&{warehouseId:this.factoryWarehouseSelectedId},productTolerance:this.toleranceForm.value.toleranceArray};this.QS.addTolerance(t).pipe((0,g.x)(()=>{this.isLoadingTolerance=!1})).subscribe(n=>{n.meta.status?this._notify.showSuccess(n.meta.msg,"Success"):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")})}else this.toleranceFormSubmittied=!0}getLeadDetail(){this.ngxService.start(),this.LS.leadDetails(this.selectedLeadId).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.lead=t?.data,this.currentVendor.ownVendor||this.lead.vendor.countryId!==this.lead.customer.countryId?!this.currentVendor.ownVendor&&this.lead.vendor.countryId!==this.lead.customer.countryId&&(this.shippingTermString="FOB",this.quotationsForm.get("shippingTerms")?.setValue("FOB")):(this.shippingTermString="Ex-Factory",this.quotationsForm.get("shippingTerms")?.setValue("Ex-Factory")),this.addresses=this.lead.userAddresses,this.cifShippingPorts=this.lead.userAddresses.map(n=>n.mappedPort),this.cifShippingPorts=[...new Set(this.cifShippingPorts)],this.isCasePackNotfied=this.lead?.customerProducts.productForm.hasOwnProperty("casePack")&&""!=this.lead?.customerProducts.productForm.casePack,this.isCasePackNotfied&&this.packagingForm.get("casePack")?.setValue(this.lead?.customerProducts.productForm.casePack),this.lead?.customerProducts?.productArtworks.map(n=>{let o=n.split("/"),l=this.getFileType(o[o.length-1]);delete l.type,this.productArtworks.push({url:n,name:o[o.length-1],...l})}),this.lead?.customerProducts?.productAttachments.map(n=>{let o=n.split("/"),l=this.getFileType(o[o.length-1]);delete l.type,this.productAttachments.push({url:n,name:o[o.length-1],...l})}),this.isToleranceDraft||this.lead?.product?.productForm.map((n,o)=>{"panel"===n.type?n.components.map(l=>{"columns"===l.key?l.columns.map(s=>{s.components.map(a=>{this.addTolerance(a,!1,this.lead?.vendorProducts?.productForm?.[a.key])})}):this.addTolerance(l,!1,this.lead?.vendorProducts?.productForm?.[l.key])}):"columns"===n.type?n.columns.map(l=>{l.components.map(s=>{this.addTolerance(s,!1,this.lead?.vendorProducts?.productForm?.[s.key])})}):this.addTolerance(n,!1,this.lead?.vendorProducts?.productForm?.[n?.key])}),this.isQuotationDraft||(this.quantityArray=this.lead?.customerProducts?.quantities,this.quantityArray.sort((n,o)=>n-o),this.quantityArray?.map((n,o)=>{this.addQuotation(n)})),this.isCasePackNotfied&&this.quotationsFormControls.controls.map(n=>{"CARTON"===this.lead?.customerProducts?.quantityType.toUpperCase()||n.get("totalCartons")?.setValue((this.lead?.customerProducts.productForm.casePack?n.value.quantity/Number(this.lead?.customerProducts.productForm.casePack):0).toFixed())}),this.isOneTimeCostDraft||(this.addItem(),this.totalOneTimeCost()),!this.isPpsDraft&&this.lead?.customerProducts?.isPrePurchaseSampleRequired?this.ppsForm.get("prePurchaseSampleQuantity")?.setValue(this.lead?.customerProducts?.prePurchaseSampleQuantity):(this.ppsForm.disable(),this.checkppsformdisabled=!0)):this._notify.showError(t.meta.msg,"Error")})}getDraft(){this.ngxService.start(),this.QS.quoteDraft(this.selectedLeadId).pipe((0,g.x)(()=>{this.ngxService.stop()})).subscribe(t=>{t.meta.status?(this.leadDraft=t?.data,this.factoryWarehouseSelectedType=this.leadDraft.factoryId?"factory":"warehouse",this.factoryWarehouseSelectedId=this.leadDraft.factoryId?this.leadDraft.factoryId:this.leadDraft.warehouseId,this.leadDraft.factoryId?(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.factory.nearestPort)):this.leadDraft.warehouseId&&(this.nearestPortArr=[],this.nearestPortArr.push(this.leadDraft.warehouse.nearestPort)),this.leadDraft?.productTolerance?.length>0&&(this.isToleranceDraft=!0,this.leadDraft?.productTolerance.map((n,o)=>{this.addTolerance(n,!0)})),this.leadDraft?.quotation?.length>0&&(this.isQuotationDraft=!0,this.leadDraft?.quotation.map((n,o)=>{this.addQuotation(n,!0)})),this.leadDraft?.prePurchaseSampleProductionLeadTime&&(this.isPpsDraft=!0,this.ppsForm.patchValue({prePurchaseSampleProductionLeadTime:this.leadDraft?.prePurchaseSampleProductionLeadTime,prePurchaseSampleQuantity:this.leadDraft?.prePurchaseSampleQuantity,prePurchaseSampleTotalPrice:this.leadDraft?.prePurchaseSampleTotalPrice})),this.packagingForm.patchValue({casePack:this.leadDraft?.casePack,validUpto:T(this.leadDraft?.validUpto).format("yyyy-MM-DD"),length:this.leadDraft?.dimension?.length,breadth:this.leadDraft?.dimension?.breadth,height:this.leadDraft?.dimension?.height,grossWeight:this.leadDraft?.grossWeight,shippingAddress:this.leadDraft?.shippingAddress}),this.leadDraft?.shippingTerms&&this.quotationsForm.get("shippingTerms")?.setValue(this.leadDraft?.shippingTerms),this.leadDraft?.oneTimeCost?.length>0&&(this.isOneTimeCostDraft=!0,this.leadDraft?.oneTimeCost.map((n,o)=>{this.addItem(n)}),this.totalOneTimeCost()),this.getLeadDetail()):this.getLeadDetail()})}submitQuote(){this.isLoading=!0,(this.checkppsformdisabled?this.checkppsformdisabled:this.ppsForm.valid)&&this.packagingForm.valid&&this.quotationsForm.valid&&this.toleranceForm.valid?this.QS.submit(this.selectedLeadId).pipe((0,g.x)(()=>{this.isLoading=!1})).subscribe(n=>{n.meta.status?(this._notify.showSuccess(n.meta.msg,"Success"),this.route.navigate(["/quotes"])):this._notify.showWarning(n.meta.msg,"Error")},n=>{this._notify.showError("Something Went Wrong","Error")}):(this.ppsFormSubmittied=!0,this.packagingFormSubmittied=!0,this.quotationFormSubmittied=!0,this.toleranceFormSubmittied=!0)}getFileType(t){const n=t.lastIndexOf(".");if(-1===n)return"File name has no extension";switch(t.substring(n+1).toLowerCase()){case"jpg":case"jpeg":case"png":return{type:"Image file",isImage:!0};case"pdf":return{type:"PDF file",isPdf:!0};case"doc":case"docx":return{type:"Word document",isWord:!0};case"txt":return{type:"Text file",isText:!0};case"ai":return{type:"Adobe Illustrator file",isIllustrator:!0};case"cdr":return{type:"CorelDRAW file",isCorelDraw:!0};case"xls":return{type:"Excel spreadsheet",isExcel:!0};case"csv":return{type:"CSV file",isExcel:!0};default:return"Unknown file type"}}downloadImage(t){return(0,le.Z)(function*(){const o=yield(yield fetch(`${t}?pactap=1`)).blob(),l=t.substring(t.lastIndexOf("/")+1),s=document.createElement("a"),a=window.URL.createObjectURL(o);s.href=a,s.download=l,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(v.gz),e.Y36(A.s),e.Y36(ue.P),e.Y36(Z.LA),e.Y36(q.c),e.Y36(u.qu),e.Y36(x.C),e.Y36(v.F0),e.Y36(Q.L),e.Y36(ce.K),e.Y36(F.l))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-quote-now"]],decls:257,vars:88,consts:[["id","printQuoteNowPage",1,"dashboardMain"],[1,"page-header","product-page-header","d-flex","justify-content-between"],[1,"quotesHeader"],[1,"backBtn","printPageButton"],["href","javascript:history.back()"],[1,"bi","bi-arrow-left-short"],[1,"formBox","form-box"],[4,"ngIf"],[1,"form-group"],[1,"form-control","form-ctrl",3,"ngModel","ngModelChange","change"],["value","","hidden",""],["label","Factories"],[3,"value",4,"ngFor","ngForOf"],["label","Warehouses"],[1,"dropDownExport","printPageButton"],["class","main_btn",4,"ngIf"],[1,"rightColumnDrop","mt-4"],["printSectionId","printQuoteNowPage","ngxPrint","",1,"btn","btn-submit","btn-outline-success",2,"width","222px",3,"useExistingCss"],["src","assets/images/download.png","alt","",1,"me-2",2,"max-width","20px"],[1,"productDetailsPage"],[1,"login-white-box"],[1,"row"],[1,"col-12","col-sm-8","col-md-8","col-lg-8"],[1,"main_btn"],["href","javascript:void(0)",1,"btn","btn-light"],[1,"table-responsive"],[1,"tableBorder"],[3,"formGroup"],[3,"formGroup",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","col-md-4","col-lg-4"],[1,"productSliderBox"],[1,"main_btn","text-end","printPageButton"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa",3,"ngClass"],[1,"machineSlider"],["id","robotcarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","nextprev",4,"ngIf"],[1,"main_btn","printPageButton"],["href","javascript:void(0)",1,"btn","btn-default",3,"click"],["src","assets/images/download.png","alt",""],["class","atWorkBox",4,"ngIf"],[1,"mainBox"],[1,"col-12","col-sm-12","col-md-12","col-lg-12",3,"formGroup"],["class","col-12 col-sm-4 col-md-4 col-lg-3",4,"ngIf"],[1,"tableBorder","tbldesignforlist"],[1,"tblflexcolumn"],[1,"tblflexcolumnin","pe-0"],[1,"listtitlegreen"],[1,"listcontentgreen"],["class","tblflexcolumnin  ps-0 ",3,"formGroup",4,"ngFor","ngForOf"],[1,"smallBtn","printPageButton"],[1,"main_btn","text-end"],[1,"packagingDetails","form-box"],[1,"col-12","col-sm-4","col-md-4","col-lg-3"],["type","date","placeholder","DD/MM/YYYY","formControlName","validUpto",1,"form-control","form-ctrl",3,"ngClass","min"],["class","invalid-feedback",4,"ngIf"],[1,"threeBox"],["type","number","placeholder","L","formControlName","length",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","B","formControlName","breadth",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","H","formControlName","height",1,"form-control","form-ctrl",3,"ngClass","keyup"],["type","number","placeholder","Gross Weight","formControlName","grossWeight",1,"form-control","form-ctrl",3,"ngClass","keyup"],["class","col-12 col-sm-4 col-md-4 col-lg-9",4,"ngIf"],[1,"col-12","col-sm-12","col-md-12","col-lg-12"],[1,"ppsCost","form-box"],[1,"col-12","col-sm-5","col-md-5","col-lg-5"],[1,"table-responsive","d-none"],[1,"td_green"],[3,"formGroup","ngClass"],["type","text","placeholder","PPS Quantity","formControlName","prePurchaseSampleQuantity",1,"form-control","form-ctrl",3,"ngClass"],["type","text","placeholder","Production Lead Time","formControlName","prePurchaseSampleProductionLeadTime",1,"form-control","form-ctrl",3,"ngClass"],[1,"input-group","mb-3"],["class","input-group-text",4,"ngIf"],["type","text","placeholder","Price","formControlName","prePurchaseSampleTotalPrice",1,"form-control","form-ctrl",3,"ngClass"],["style","display: block;","class","invalid-feedback",4,"ngIf"],["class","smallBtn printPageButton",4,"ngIf"],[1,"col-12","col-sm-7","col-md-7","col-lg-7"],[1,"oneTimeCost"],[1,"bgGrayBox"],[1,"col-12","col-sm-6","col-md-6","col-lg-6"],[1,"formOneTime"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"main_btn","text-end","mt-5","printPageButton"],["fgsColor","#3E916C",3,"hasProgressBar"],[3,"value"],["type","button",1,"btn","btn-light"],["type","text","readonly","","formControlName","name",1,"form-control","form-ctrl","showastext"],["type","text","formControlName","measurement",1,"form-control","form-ctrl","showastext"],["class","text-center",4,"ngIf"],[1,"form-box"],[1,"col-md-6"],["for","lowerLimit",1,"mb-2"],["id","lowerLimit","type","number","placeholder","","formControlName","lowerTolerance",1,"form-control","form-ctrl"],["for","upperLimit",1,"mb-2"],["id","upperLimit","type","number","placeholder","","formControlName","upperTolerance",1,"form-control","form-ctrl"],[1,"text-center"],[1,"carousel-item","active",3,"ngClass"],["alt"," ",1,"d-block","w-100",3,"src"],[1,"nextprev"],["type","button","data-bs-target","#robotcarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#robotcarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"atWorkBox"],[1,"pdfDownloadBox"],["class","downLoadPdf",4,"ngFor","ngForOf"],[1,"downLoadPdf"],[3,"src","alt",4,"ngIf"],["src","assets/images/cdr-icon.png",3,"alt",4,"ngIf"],["src","assets/images/pdf-icon.png",3,"alt",4,"ngIf"],["src","assets/images/word-icon.png",3,"alt",4,"ngIf"],["src","assets/images/xls-icon.png",3,"alt",4,"ngIf"],["src","assets/images/illustrator-icon.png",3,"alt",4,"ngIf"],["src","assets/images/download.png","alt","Download Art"],[3,"src","alt"],["src","assets/images/cdr-icon.png",3,"alt"],["src","assets/images/pdf-icon.png",3,"alt"],["src","assets/images/word-icon.png",3,"alt"],["src","assets/images/xls-icon.png",3,"alt"],["src","assets/images/illustrator-icon.png",3,"alt"],["src","assets/images/download.png","alt","Download Addiotional Attachment"],["formControlName","shippingTerms",1,"form-ctrl","form-control",3,"ngClass"],["value",""],[1,"invalid-feedback"],[1,"tblflexcolumnin","ps-0",3,"formGroup"],["type","text","placeholder","","readonly","","formControlName","quantity",1,"form-control","form-ctrl","showastext2"],[1,"form-box","formboxtbl"],[1,"listcontentgreen","tolerancetextfield"],["type","number","placeholder","","formControlName","quantityTolerance","placeholder","0",1,"form-control","form-ctrl"],["type","text","placeholder","","formControlName","productionleadTime",1,"form-control","form-ctrl"],[1,"input-group","mb-3","align-items-center","gap-2"],["type","text","placeholder","","formControlName","pricePerPiece",1,"form-control","form-ctrl",3,"keyup"],["type","text","placeholder","","formControlName","totalPrice","readonly","",1,"form-control","form-ctrl","no-border"],["type","number","placeholder","Add packaging detail below","formControlName","totalCbm","readonly","",1,"form-control","form-ctrl","no-border"],["type","text","placeholder","","formControlName","totalCartons","readonly","",1,"form-control","form-ctrl","no-border"],["type","number","placeholder","Add packaging detail below","formControlName","totalWeight","readonly","",1,"form-control","form-ctrl","no-border"],["type","text","placeholder","Case Pack","formControlName","casePack",1,"form-control","form-ctrl",3,"ngClass","keyup"],[1,"col-12","col-sm-4","col-md-4","col-lg-9"],["class","form-ctrl form-control","formControlName","shippingAddress",3,"ngClass",4,"ngIf"],["formControlName","shippingAddress",1,"form-ctrl","form-control",3,"ngClass"],[1,"invalid-feedback",2,"display","block"],[1,"input-group-text"],[1,"row",3,"formGroup"],["formControlName","name",1,"form-control","form-ctrl"],[3,"value","disabled",4,"ngFor","ngForOf"],["type","number","placeholder","00.000","formControlName","cost",1,"form-control","form-ctrl",3,"keyup","change"],[1,"col-12","col-sm-2","col-md-2","col-lg-2","align-items-center","d-flex"],[1,"addDelete"],["class","deleteicongreen","href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",4,"ngIf"],["class","addicongreen printPageButton","href","javascript:void(0)",3,"click",4,"ngIf"],[3,"value","disabled"],["href","javascript:void(0)",1,"deleteicongreen",3,"click"],["src","assets/images/delete-green.png","alt",""],["href","javascript:void(0)"],["href","javascript:void(0)",1,"addicongreen","printPageButton",3,"click"],["src","assets/images/add-green.png","alt",""]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"div",6)(7,"h3"),e._uU(8," Quoting "),e.TgZ(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"p"),e._uU(12,"For:"),e.TgZ(13,"span"),e.YNc(14,de,2,1,"ng-container",7),e._uU(15),e._uU(16),e.qZA()(),e.TgZ(17,"div",8)(18,"label"),e._uU(19,"Quoting From:"),e.qZA(),e.TgZ(20,"select",9),e.NdJ("ngModelChange",function(s){return o.factoryWarehouseSelectedId=s})("change",function(s){return o.changeOfFactoryWarehouse(s)}),e.TgZ(21,"option",10),e._uU(22,"-- Choose Quoting From --"),e.qZA(),e.TgZ(23,"optgroup",11),e.YNc(24,pe,2,7,"option",12),e.qZA(),e.TgZ(25,"optgroup",13),e.YNc(26,me,2,7,"option",12),e.qZA()()()(),e.TgZ(27,"div",14),e.YNc(28,ge,3,0,"div",15),e.TgZ(29,"span")(30,"div",16)(31,"button",17),e._UZ(32,"img",18),e._uU(33," Export as PDF "),e.qZA()()()()()(),e.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23)(39,"a",24),e._uU(40," Product Details"),e.qZA()(),e.TgZ(41,"div",25)(42,"div",26)(43,"form",27)(44,"table")(45,"tbody")(46,"tr")(47,"th"),e._uU(48," Details"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Measurements "),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Tolerances "),e.qZA()(),e.YNc(53,Te,7,3,"tr",28),e.qZA()()()()()(),e.TgZ(54,"div",29)(55,"div",30)(56,"div",31)(57,"button",32),e.NdJ("click",function(){return o.saveTolerance()}),e._UZ(58,"i",33),e._uU(59," Save "),e.qZA()(),e.TgZ(60,"div",34)(61,"div",35)(62,"div",36),e.YNc(63,ye,2,4,"div",37),e.qZA(),e.YNc(64,Ce,9,0,"div",38),e.qZA(),e.TgZ(65,"div",39)(66,"a",40),e.NdJ("click",function(){return o.downloadImage(null==o.lead||null==o.lead.product?null:o.lead.product.productImg[o.selectedImage])}),e._uU(67,"Download "),e._UZ(68,"img",41),e.qZA()()(),e.YNc(69,Pe,5,1,"div",42),e.YNc(70,De,5,1,"div",42),e.qZA()()()(),e.TgZ(71,"div",43)(72,"div",23)(73,"a",24),e._uU(74," Quotations"),e.qZA(),e.TgZ(75,"span"),e._uU(76),e.qZA()(),e.TgZ(77,"div",20)(78,"div",21)(79,"div",44),e.YNc(80,je,9,5,"div",45),e.TgZ(81,"div",25)(82,"div",46)(83,"form")(84,"div",47)(85,"div",48)(86,"ul")(87,"li",49),e._uU(88,"Quantity"),e.qZA(),e.TgZ(89,"li",50),e._uU(90,"Quantity Tolerance:"),e.qZA(),e.TgZ(91,"li",50),e._uU(92,"Prod. Lead Time (In Days):"),e.qZA(),e.TgZ(93,"li",50),e._uU(94),e.qZA(),e.TgZ(95,"li",50),e._uU(96,"Total Price:"),e.qZA(),e.TgZ(97,"li",50),e._uU(98,"Total CBM:"),e.qZA(),e.TgZ(99,"li",50),e._uU(100,"Total Cartons:"),e.qZA(),e.TgZ(101,"li",50),e._uU(102,"Total Weight (In kg):"),e.qZA()()(),e.YNc(103,Be,25,5,"div",51),e.qZA()()()(),e.TgZ(104,"div",52)(105,"div",53)(106,"button",32),e.NdJ("click",function(){return o.submitQuotation()}),e._UZ(107,"i",33),e._uU(108," Save "),e.qZA()()()()()()(),e.TgZ(109,"div",43)(110,"div",23)(111,"a",24),e._uU(112," Packaging Details"),e.qZA()(),e.TgZ(113,"div",20)(114,"div",54),e.YNc(115,Ke,4,1,"h6",7),e.TgZ(116,"form",27)(117,"div",21),e.YNc(118,Re,6,4,"div",45),e.TgZ(119,"div",55)(120,"div",8)(121,"label"),e._uU(122," Valid Upto"),e.qZA(),e._UZ(123,"input",56),e.YNc(124,Xe,2,1,"div",57),e.qZA()(),e.TgZ(125,"div",55)(126,"div",8)(127,"label"),e._uU(128," Carton Dimensions "),e.TgZ(129,"span"),e._uU(130,"(in Inches)"),e.qZA()(),e.TgZ(131,"div",58)(132,"input",59),e.NdJ("keyup",function(s){return o.changeLbh(s)}),e.qZA(),e.TgZ(133,"input",60),e.NdJ("keyup",function(s){return o.changeLbh(s)}),e.qZA(),e.TgZ(134,"input",61),e.NdJ("keyup",function(s){return o.changeLbh(s)}),e.qZA()(),e.YNc(135,tt,2,1,"div",57),e.YNc(136,it,2,1,"div",57),e.YNc(137,st,2,1,"div",57),e.qZA()(),e.TgZ(138,"div",55)(139,"div",8)(140,"label"),e._uU(141," Gross Weight "),e.TgZ(142,"span"),e._uU(143,"(per case in kg)"),e.qZA()(),e.TgZ(144,"input",62),e.NdJ("keyup",function(s){return o.changeWeight(s)}),e.qZA(),e.YNc(145,lt,2,1,"div",57),e.qZA()(),e.YNc(146,Ct,9,7,"div",63),e.qZA()(),e.TgZ(147,"div",52)(148,"div",53)(149,"button",32),e.NdJ("click",function(){return o.submitPackagingForm()}),e._UZ(150,"i",33),e._uU(151," Save "),e.qZA()()()()()(),e.TgZ(152,"div",21)(153,"div",64)(154,"div",65)(155,"div",21)(156,"div",66)(157,"div",43)(158,"div",23)(159,"a",24),e._uU(160," PPS"),e.qZA()(),e.TgZ(161,"div",67)(162,"div",26)(163,"table")(164,"tbody")(165,"tr")(166,"th"),e._uU(167," PPS Quantity"),e.qZA(),e.TgZ(168,"th"),e._uU(169,"10"),e.qZA()(),e.TgZ(170,"tr")(171,"td",68),e._uU(172,"Prod. Lead Time (In Days): "),e.qZA(),e.TgZ(173,"td"),e._uU(174,"45 Days "),e.qZA()(),e.TgZ(175,"tr")(176,"td",68),e._uU(177,"Grand Total Price: "),e.qZA(),e.TgZ(178,"td"),e._uU(179," $ 750.00"),e.qZA()()()()()(),e.TgZ(180,"div",20)(181,"form",69)(182,"div",21)(183,"div",64)(184,"div",8)(185,"label"),e._uU(186," PPS Quantity "),e.TgZ(187,"span"),e._uU(188,":"),e.qZA()(),e._UZ(189,"input",70),e.YNc(190,xt,2,1,"div",57),e.qZA()(),e.TgZ(191,"div",64)(192,"div",8)(193,"label"),e._uU(194," Production Lead Time "),e.TgZ(195,"span"),e._uU(196,"(In Days):"),e.qZA()(),e._UZ(197,"input",71),e.YNc(198,wt,2,1,"div",57),e.qZA()(),e.TgZ(199,"div",64)(200,"div",8)(201,"label"),e._uU(202," Grand Total Price:"),e.qZA(),e.TgZ(203,"div",72),e.YNc(204,Qt,2,1,"span",73),e.YNc(205,Ft,2,0,"span",73),e._UZ(206,"input",74),e.qZA(),e.YNc(207,Pt,2,1,"div",75),e.qZA()()()(),e.YNc(208,Nt,5,4,"div",76),e.qZA()()(),e.TgZ(209,"div",77)(210,"div",43)(211,"div",23)(212,"a",24),e._uU(213," One Time Cost"),e.qZA()(),e.TgZ(214,"div",67)(215,"div",26)(216,"table")(217,"tbody")(218,"tr")(219,"th"),e._uU(220," One Time Cost"),e.qZA(),e.TgZ(221,"th"),e._uU(222,"Cost"),e.qZA()(),e.TgZ(223,"tr")(224,"td",68),e._uU(225,"Cylinder Cost "),e.qZA(),e.TgZ(226,"td"),e._uU(227,"$ 30,000 "),e.qZA()(),e.TgZ(228,"tr")(229,"td",68),e._uU(230,"Total One Time Cost: "),e.qZA(),e.TgZ(231,"td"),e._uU(232,"$ 30,000"),e.qZA()()()()()(),e.TgZ(233,"div",20)(234,"div",78)(235,"div",79)(236,"div",21)(237,"div",80)(238,"h2"),e._uU(239,"One Time Cost"),e.qZA()(),e.TgZ(240,"div",80)(241,"h2"),e._uU(242,"Cost"),e.qZA()()()(),e.TgZ(243,"div",81)(244,"form",27),e.YNc(245,Dt,19,7,"div",82),e.qZA()()(),e.TgZ(246,"h6",83),e._uU(247,"Total One Time Cost: "),e.YNc(248,Ot,2,1,"span",7),e.YNc(249,Yt,2,0,"span",7),e._uU(250),e.qZA(),e.YNc(251,Mt,5,4,"div",76),e.qZA()()()()()(),e.TgZ(252,"div",84)(253,"button",32),e.NdJ("click",function(){return o.submitQuote()}),e._UZ(254,"i",33),e._uU(255," Submit Quote "),e.qZA()()()()(),e._UZ(256,"ngx-ui-loader",85)),2&n&&(e.xp6(10),e.AsE("",null==o.lead||null==o.lead.product?null:o.lead.product.productName,", (Product ID: ",null==o.lead||null==o.lead.product?null:o.lead.product.productId,")"),e.xp6(4),e.Q6J("ngIf",o.currentVendor.ownVendor),e.xp6(1),e.hij(" (Customer ID: ",null==o.lead||null==o.lead.customerLogin?null:o.lead.customerLogin.customerId," "),e.xp6(1),e.hij(" ), ",null==o.lead||null==o.lead.customer||null==o.lead.customer.countryObj?null:o.lead.customer.countryObj.name,""),e.xp6(4),e.Q6J("ngModel",o.factoryWarehouseSelectedId),e.xp6(4),e.Q6J("ngForOf",o.factoryList),e.xp6(2),e.Q6J("ngForOf",o.warehouseList),e.xp6(2),e.Q6J("ngIf",null==o.leadDraft?null:o.leadDraft.isRequote),e.xp6(3),e.Q6J("useExistingCss",!0),e.xp6(12),e.Q6J("formGroup",o.toleranceForm),e.xp6(10),e.Q6J("ngForOf",o.toleranceFormControls.controls),e.xp6(4),e.Q6J("disabled",o.isLoadingTolerance),e.xp6(1),e.Q6J("ngClass",e.VKq(62,b,o.isLoadingTolerance)),e.xp6(5),e.Q6J("ngForOf",null==o.lead||null==o.lead.product?null:o.lead.product.productImg),e.xp6(1),e.Q6J("ngIf",(null==o.lead||null==o.lead.product?null:o.lead.product.productImg.length)>1),e.xp6(5),e.Q6J("ngIf",o.productArtworks.length),e.xp6(1),e.Q6J("ngIf",o.productAttachments.length),e.xp6(6),e.hij("Quote ",o.shippingTermString," Prices"),e.xp6(3),e.Q6J("formGroup",o.quotationsForm),e.xp6(1),e.Q6J("ngIf",o.currentVendor.ownVendor),e.xp6(14),e.hij("Price Per ",null==o.lead||null==o.lead.customerProducts?null:o.lead.customerProducts.quantityType,":"),e.xp6(9),e.Q6J("ngForOf",o.quotationsFormControls.controls),e.xp6(3),e.Q6J("disabled",o.isLoadingQuote),e.xp6(1),e.Q6J("ngClass",e.VKq(64,b,o.isLoadingQuote)),e.xp6(8),e.Q6J("ngIf",o.isCasePackNotfied),e.xp6(1),e.Q6J("formGroup",o.packagingForm),e.xp6(2),e.Q6J("ngIf",!o.isCasePackNotfied),e.xp6(5),e.Q6J("ngClass",e.VKq(66,h,o.packagingFormSubmittied&&o.packagingFormControls.validUpto.errors))("min",o.todayDate),e.xp6(1),e.Q6J("ngIf",o.packagingFormSubmittied&&o.packagingFormControls.validUpto.errors),e.xp6(8),e.Q6J("ngClass",e.VKq(68,h,o.packagingFormSubmittied&&o.packagingFormControls.length.errors)),e.xp6(1),e.Q6J("ngClass",e.VKq(70,h,o.packagingFormSubmittied&&o.packagingFormControls.breadth.errors)),e.xp6(1),e.Q6J("ngClass",e.VKq(72,h,o.packagingFormSubmittied&&o.packagingFormControls.height.errors)),e.xp6(1),e.Q6J("ngIf",o.packagingFormSubmittied&&o.packagingFormControls.length.errors),e.xp6(1),e.Q6J("ngIf",o.packagingFormSubmittied&&o.packagingFormControls.breadth.errors),e.xp6(1),e.Q6J("ngIf",o.packagingFormSubmittied&&o.packagingFormControls.height.errors),e.xp6(7),e.Q6J("ngClass",e.VKq(74,h,o.packagingFormSubmittied&&o.packagingFormControls.grossWeight.errors)),e.xp6(1),e.Q6J("ngIf",o.packagingFormSubmittied&&o.packagingFormControls.grossWeight.errors),e.xp6(1),e.Q6J("ngIf",o.packagingForm.value.hasOwnProperty("shippingAddress")),e.xp6(3),e.Q6J("disabled",o.isPackageLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(76,b,o.isPackageLoading)),e.xp6(31),e.Q6J("formGroup",o.ppsForm)("ngClass",e.VKq(78,jt,1==o.checkppsformdisabled)),e.xp6(8),e.Q6J("ngClass",e.VKq(80,h,o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleQuantity.errors)),e.xp6(1),e.Q6J("ngIf",o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleQuantity.errors),e.xp6(7),e.Q6J("ngClass",e.VKq(82,h,o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleProductionLeadTime.errors)),e.xp6(1),e.Q6J("ngIf",o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleProductionLeadTime.errors),e.xp6(6),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)==(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)!=(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(1),e.Q6J("ngClass",e.VKq(84,h,o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleTotalPrice.errors)),e.xp6(1),e.Q6J("ngIf",o.ppsFormSubmittied&&o.ppsFormControls.prePurchaseSampleTotalPrice.errors),e.xp6(1),e.Q6J("ngIf",null==o.lead||null==o.lead.customerProducts?null:o.lead.customerProducts.isPrePurchaseSampleRequired),e.xp6(36),e.Q6J("formGroup",o.oneTimeCostForm),e.xp6(1),e.Q6J("ngForOf",o.oneTimeCostFormControls.controls),e.xp6(3),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)==(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(1),e.Q6J("ngIf",(null==o.lead||null==o.lead.vendor?null:o.lead.vendor.currency)!=(null==o.lead||null==o.lead.customer?null:o.lead.customer.currency)),e.xp6(1),e.hij(" ",o.totalOneTimeCostNum,""),e.xp6(1),e.Q6J("ngIf",o.totalOneTimeCostSave),e.xp6(2),e.Q6J("disabled",o.isLoading),e.xp6(1),e.Q6J("ngClass",e.VKq(86,b,o.isLoading)),e.xp6(2),e.Q6J("hasProgressBar",!1))},dependencies:[Z.Eo,_.mk,_.sg,_.O5,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.sg,u.u,u.On,u.F,N.IH,_.rS],styles:["@media print{.printPageButton[_ngcontent-%COMP%]{display:none!important}}"]})}return i})()}];let Wt=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[v.Bz.forChild($t),v.Bz]})}return i})(),Et=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[Z.Js,_.ez,Wt,u.UX,u.u5,P.Rq,N.K8]})}return i})()}}]);